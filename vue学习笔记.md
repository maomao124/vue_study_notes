<h1 style="color:skyblue;text-align:center">Vueå­¦ä¹ ç¬”è®°</h1>













# ç¯å¢ƒå‡†å¤‡

## å®‰è£…è„šæ‰‹æ¶

å‰æéœ€è¦nodejsï¼Œvue/cli requires Node ^12.0.0 || >= 14.0.0



å‘½ä»¤å¦‚ä¸‹ï¼š

```sh
npm install -g @vue/cli
```

* -g å‚æ•°è¡¨ç¤ºå…¨å±€å®‰è£…ï¼Œè¿™æ ·åœ¨ä»»æ„ç›®å½•éƒ½å¯ä»¥ä½¿ç”¨ vue è„šæœ¬åˆ›å»ºé¡¹ç›®



```sh
PS C:\Users\mao> npm install -g @vue/cli
npm WARN deprecated apollo-server-express@3.12.0: The `apollo-server-express` package is part of Apollo Server v2 and v3, which are now deprecated (end-of-life October 22nd 2023). This package's functionality is now found in the `@apollo/server` package. See https://www.apollographql.com/docs/apollo-server/previous-versions/ for more details.
npm WARN deprecated subscriptions-transport-ws@0.11.0: The `subscriptions-transport-ws` package is no longer maintained. We recommend you use `graphql-ws` instead. For help migrating Apollo software to `graphql-ws`, see https://www.apollographql.com/docs/apollo-server/data/subscriptions/#switching-from-subscriptions-transport-ws    For general help using `graphql-ws`, see https://github.com/enisdenjo/graphql-ws/blob/master/README.md
npm WARN deprecated apollo-server-types@3.8.0: The `apollo-server-types` package is part of Apollo Server v2 and v3, which are now deprecated (end-of-life October 22nd 2023). This package's functionality is now found in the `@apollo/server` package. See https://www.apollographql.com/docs/apollo-server/previous-versions/ for more details.
npm WARN deprecated apollo-server-core@3.12.0: The `apollo-server-core` package is part of Apollo Server v2 and v3, which are now deprecated (end-of-life October 22nd 2023). This package's functionality is now found in the `@apollo/server` package. See https://www.apollographql.com/docs/apollo-server/previous-versions/ for more details.
npm WARN deprecated apollo-server-env@4.2.1: The `apollo-server-env` package is part of Apollo Server v2 and v3, which are now deprecated (end-of-life October 22nd 2023). This package's functionality is now found in the `@apollo/utils.fetcher` package. See https://www.apollographql.com/docs/apollo-server/previous-versions/ for more details.
npm WARN deprecated apollo-reporting-protobuf@3.4.0: The `apollo-reporting-protobuf` package is part of Apollo Server v2 and v3, which are now deprecated (end-of-life October 22nd 2023). This package's functionality is now found in the `@apollo/usage-reporting-protobuf` package. See https://www.apollographql.com/docs/apollo-server/previous-versions/ for more details.
npm WARN deprecated apollo-server-errors@3.3.1: The `apollo-server-errors` package is part of Apollo Server v2 and v3, which are now deprecated (end-of-life October 22nd 2023). This package's functionality is now found in the `@apollo/server` package. See https://www.apollographql.com/docs/apollo-server/previous-versions/ for more details.
npm WARN deprecated apollo-datasource@3.3.2: The `apollo-datasource` package is part of Apollo Server v2 and v3, which are now deprecated (end-of-life October 22nd 2023). See https://www.apollographql.com/docs/apollo-server/previous-versions/ for more details.
npm WARN deprecated apollo-server-plugin-base@3.7.2: The `apollo-server-plugin-base` package is part of Apollo Server v2 and v3, which are now deprecated (end-of-life October 22nd 2023). This package's functionality is now found in the `@apollo/server` package. See https://www.apollographql.com/docs/apollo-server/previous-versions/ for more details.
npm WARN deprecated source-map-resolve@0.5.3: See https://github.com/lydell/source-map-resolve#deprecated
npm WARN deprecated resolve-url@0.2.1: https://github.com/lydell/resolve-url#deprecated
npm WARN deprecated urix@0.1.0: Please see https://github.com/lydell/urix#deprecated
npm WARN deprecated source-map-url@0.4.1: See https://github.com/lydell/source-map-url#deprecated
C:\Users\mao\AppData\Roaming\npm\vue -> C:\Users\mao\AppData\Roaming\npm\node_modules\@vue\cli\bin\vue.js

> @apollo/protobufjs@1.2.7 postinstall C:\Users\mao\AppData\Roaming\npm\node_modules\@vue\cli\node_modules\@apollo\protobufjs
> node scripts/postinstall


> @apollo/protobufjs@1.2.6 postinstall C:\Users\mao\AppData\Roaming\npm\node_modules\@vue\cli\node_modules\apollo-reporting-protobuf\node_modules\@apollo\protobufjs
> node scripts/postinstall

npm WARN node-fetch@2.6.11 requires a peer of encoding@^0.1.0 but none is installed. You must install peer dependencies yourself.
npm WARN ws@7.5.9 requires a peer of bufferutil@^4.0.1 but none is installed. You must install peer dependencies yourself.
npm WARN ws@7.5.9 requires a peer of utf-8-validate@^5.0.2 but none is installed. You must install peer dependencies yourself.

+ @vue/cli@5.0.8
added 853 packages from 491 contributors in 535.031s
PS C:\Users\mao>
```







## åˆ›å»ºé¡¹ç›®

å¯ä»¥ä½¿ç”¨å‘½ä»¤`vue ui`æ¥æ‰‹åŠ¨åˆ›å»ºé¡¹ç›®ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ideaåˆ›å»ºé¡¹ç›®



### vue ui

ä½¿ç”¨å›¾å½¢å‘å¯¼æ¥åˆ›å»º vue é¡¹ç›®



```sh
PS C:\Users\mao> vue ui
ğŸš€  Starting GUI...
ğŸŒ   Ready on http://localhost:8000
```



![image-20230618222605216](img/vueå­¦ä¹ ç¬”è®°/image-20230618222605216.png)



ç‚¹å‡»æ–°å»ºé¡¹ç›®

![image-20230618222919363](img/vueå­¦ä¹ ç¬”è®°/image-20230618222919363.png)





![image-20230618222936566](img/vueå­¦ä¹ ç¬”è®°/image-20230618222936566.png)



ç­‰å¾…åˆ›å»ºæˆåŠŸ



### ideaåˆ›å»ºé¡¹ç›®

æ‰“å¼€ideaï¼Œç‚¹å‡»æ–°å»ºé¡¹ç›®ï¼Œé€‰æ‹©jsï¼Œå†é€‰æ‹©vue.js

![image-20230618223038392](img/vueå­¦ä¹ ç¬”è®°/image-20230618223038392.png)





è¾“å…¥é¡¹ç›®åç§°

![image-20230618223127615](img/vueå­¦ä¹ ç¬”è®°/image-20230618223127615.png)





ç­‰å¾…åˆ›å»º

![image-20230618223210570](img/vueå­¦ä¹ ç¬”è®°/image-20230618223210570.png)





é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š

![image-20230618225420575](img/vueå­¦ä¹ ç¬”è®°/image-20230618225420575.png)









## è¿è¡Œé¡¹ç›®

ç‚¹å‡»package.jsonæ–‡ä»¶ä¸­serveå‰çš„è¿è¡ŒæŒ‰é’®

![image-20230618225524036](img/vueå­¦ä¹ ç¬”è®°/image-20230618225524036.png)





æˆ–è€…ç›´æ¥ç‚¹å‡»è¿è¡ŒæŒ‰é’®

![image-20230618225611287](img/vueå­¦ä¹ ç¬”è®°/image-20230618225611287.png)





æˆ–è€…ç›´æ¥è¾“å…¥å‘½ä»¤ï¼š

```sh
npm run serve
```





![image-20230618230541625](img/vueå­¦ä¹ ç¬”è®°/image-20230618230541625.png)



![image-20230618230552210](img/vueå­¦ä¹ ç¬”è®°/image-20230618230552210.png)







## ä¿®æ”¹ç«¯å£

æ–‡æ¡£åœ°å€ï¼šhttps://webpack.js.org/configuration/dev-server/#devserverport



æ‰“å¼€ vue.config.js æ·»åŠ 

![image-20230618230729710](img/vueå­¦ä¹ ç¬”è®°/image-20230618230729710.png)



æ›´æ”¹æˆï¼š

![image-20230618230825235](img/vueå­¦ä¹ ç¬”è®°/image-20230618230825235.png)





```js
const {defineConfig} = require('@vue/cli-service')
module.exports = defineConfig({
    transpileDependencies: true,
    devServer:
        {
            port: 8083,
        }
})

```







## æ·»åŠ ä»£ç†

ä¸ºäº†é¿å…å‰åç«¯æœåŠ¡å™¨è”è°ƒæ—¶ï¼Œ fetchã€xhr è¯·æ±‚äº§ç”Ÿè·¨åŸŸé—®é¢˜ï¼Œéœ€è¦é…ç½®ä»£ç†



æ‰“å¼€ vue.config.js æ·»åŠ 

![image-20230618231107079](img/vueå­¦ä¹ ç¬”è®°/image-20230618231107079.png)





```js
const {defineConfig} = require('@vue/cli-service')
module.exports = defineConfig({
    transpileDependencies: true,
    devServer:
        {
            port: 8083,
            proxy:
                {
                    'api': {
                        target: "http://localhost:9090",
                        changeOrigin: true
                    },
                    'api2': {
                        target: "http://localhost:9091",
                        changeOrigin: true
                    }
                }
        }
})
```





## Vue é¡¹ç›®ç»“æ„

```
â”œâ”€assets
â”œâ”€components
â”œâ”€router
â”œâ”€store
â””â”€views
```



* assets - é™æ€èµ„æº
* components - å¯é‡ç”¨ç»„ä»¶
* router - è·¯ç”±
* store - æ•°æ®å…±äº«
* views - è§†å›¾ç»„ä»¶



ä»¥åè¿˜ä¼šæ·»åŠ 

* api - è·Ÿåå°äº¤äº’ï¼Œå‘é€ fetchã€xhr è¯·æ±‚ï¼Œæ¥æ”¶å“åº”
* plugins - æ’ä»¶

















# Vue ç»„ä»¶

## è¯´æ˜

Vue çš„ç»„ä»¶æ–‡ä»¶ä»¥ .vue ç»“å°¾ï¼Œæ¯ä¸ªç»„ä»¶ç”±ä¸‰éƒ¨åˆ†ç»„æˆ

```vue
<template></template>

<script></script>

<style></style>
```



* template æ¨¡æ¿éƒ¨åˆ†ï¼Œç”±å®ƒç”Ÿæˆ html ä»£ç 
* script ä»£ç éƒ¨åˆ†ï¼Œæ§åˆ¶æ¨¡æ¿çš„æ•°æ®æ¥æºå’Œè¡Œä¸º
* style æ ·å¼éƒ¨åˆ†



å…¥å£ç»„ä»¶æ˜¯ App.vueï¼Œå†…å®¹å¦‚ä¸‹ï¼š

```vue
<template>
  <img alt="Vue logo" src="./assets/logo.png">
  <HelloWorld msg="Welcome to Your Vue.js App"/>
</template>

<script>
import HelloWorld from './components/HelloWorld.vue'

export default {
  name: 'App',
  components: {
    HelloWorld
  }
}
</script>

<style>
#app {
  font-family: Avenir, Helvetica, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-align: center;
  color: #2c3e50;
  margin-top: 60px;
}
</style>
```







## å…¥é—¨ç¨‹åº

ç¼–å†™hello world

![image-20230618232412179](img/vueå­¦ä¹ ç¬”è®°/image-20230618232412179.png)



```vue
<template>

  <div>
    <h1 class="test">{{ msg }}</h1>
    <h2 class="test">my name is {{name}}</h2>
  </div>

</template>

<script>

export default {
  data()
  {
    return {
      msg: "hello world",
      name: "å¼ ä¸‰"
    }
  }
}
</script>

<style>
.test {
  color: crimson;
}

</style>
```



è¿è¡Œç»“æœå¦‚ä¸‹ï¼š

![image-20230618232434061](img/vueå­¦ä¹ ç¬”è®°/image-20230618232434061.png)





è§£é‡Š

* export default å¯¼å‡ºç»„ä»¶å¯¹è±¡ï¼Œä¾› main.js å¯¼å…¥ä½¿ç”¨
* è¿™ä¸ªå¯¹è±¡æœ‰ä¸€ä¸ª data æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ª**å¯¹è±¡**ï¼Œç»™ template æä¾›æ•°æ®
* `{{}}` åœ¨ Vue é‡Œç§°ä¹‹ä¸ºæ’å€¼è¡¨è¾¾å¼ï¼Œç”¨æ¥**ç»‘å®š** data æ–¹æ³•è¿”å›çš„**å¯¹è±¡**å±æ€§ï¼Œ**ç»‘å®š**çš„å«ä¹‰æ˜¯æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œé¡µé¢æ˜¾ç¤ºä¼šåŒæ­¥å˜åŒ–



**æ³¨æ„ï¼štemplate å†…åªèƒ½æœ‰ä¸€ä¸ªæ ¹å…ƒç´ **







## æ–‡æœ¬æ’å€¼

æ–°å»ºä¸€ä¸ªvueæ–‡ä»¶ï¼Œåå­—ä¸ºApp2.vueï¼š

![image-20230618234853662](img/vueå­¦ä¹ ç¬”è®°/image-20230618234853662.png)



```vue
<template>
  <div>
    <h1>{{ name }} </h1>
    <h1>æ˜¯å¦æˆå¹´ï¼š{{ age >= 18 ? 'æˆå¹´' : 'æœªæˆå¹´' }}</h1>
    <h1>5å¹´åå¹´é¾„ï¼š{{ age + 5 }}</h1>
  </div>

</template>

<script>
export default {
  name: "App2",
  data()
  {
    return {
      name: "æå››",
      age: 19
    }
  }
}
</script>

<style scoped>

</style>
```



æ›´æ”¹main.js

```js
import { createApp } from 'vue'
import App from './App2.vue'

createApp(App).mount('#app')
```



![image-20230618235507127](img/vueå­¦ä¹ ç¬”è®°/image-20230618235507127.png)



åœ¨vue.config.jsä¸­æ·»åŠ `lintOnSave:false,`

```js
const {defineConfig} = require('@vue/cli-service')
module.exports = defineConfig({
    transpileDependencies: true,
    lintOnSave:false,
    devServer:
        {
            port: 8083,
            proxy:
                {
                    'api': {
                        target: "http://localhost:9090",
                        changeOrigin: true
                    },
                    'api2': {
                        target: "http://localhost:9091",
                        changeOrigin: true
                    }
                }
        }
})
```



è¿è¡Œ

![image-20230618235610391](img/vueå­¦ä¹ ç¬”è®°/image-20230618235610391.png)



æ³¨æ„ï¼š

* `{{}}` é‡Œåªèƒ½ç»‘å®šä¸€ä¸ªå±æ€§ï¼Œç»‘å®šå¤šä¸ªå±æ€§éœ€è¦ç”¨å¤šä¸ª `{{}}` åˆ†åˆ«ç»‘å®š
* æ’å€¼å†…å¯ä»¥è¿›è¡Œç®€å•çš„è¡¨è¾¾å¼è®¡ç®—





## å±æ€§ç»‘å®š

v-bindæŒ‡ä»¤

ç®€å†™æ–¹å¼ï¼šå¯ä»¥çœç•¥ v-bind åªä¿ç•™å†’å·



```vue
<template>
  <div>
    <input type="text" v-bind:value="name">
    <br>
    <input type="text" :value="address">
    <br>
    <input type="number" :value="age">

  </div>
</template>

<script>
export default {
  name: "App3",
  data()
  {
    return {
      name: "å¼ ä¸‰",
      age: 17,
      address: "ä¸­å›½æ¹–å—"
    }
  }
}
</script>

<style scoped>

</style>
```



![image-20230619144635378](img/vueå­¦ä¹ ç¬”è®°/image-20230619144635378.png)







## äº‹ä»¶ç»‘å®š

```vue
<template>
  <div>
    <input type="number" :value="number1" v-on:click="m1">
    <br>
    <input type="number" :value="number2" @click="m2">
    <br>
    <input type="text" :value="name" @change="m3()">
  </div>
</template>

<script>
export default {
  name: "App4",
  data()
  {
    return {
      number1: 100,
      number2: 300,
      name: "å¼ ä¸‰",
    }
  },
  methods:
      {
        m1()
        {
          console.log("ç‚¹å‡»æ‰§è¡Œm1")
          this.number1++;
        },
        m2()
        {
          console.log("ç‚¹å‡»æ‰§è¡Œm2")
          this.number2++;
        },
        m3()
        {
          console.log("æ›´æ”¹äº‹ä»¶æ‰§è¡Œm3")
          console.log(this.name)
        }
      }
}
</script>

<style scoped>

</style>
```



![image-20230619145604736](img/vueå­¦ä¹ ç¬”è®°/image-20230619145604736.png)



![image-20230619145619482](img/vueå­¦ä¹ ç¬”è®°/image-20230619145619482.png)

![image-20230619145625083](img/vueå­¦ä¹ ç¬”è®°/image-20230619145625083.png)





* ç®€å†™æ–¹å¼ï¼šå¯ä»¥æŠŠ v-on: æ›¿æ¢ä¸º @
* åœ¨ methods æ–¹æ³•ä¸­çš„ this ä»£è¡¨çš„æ˜¯ data å‡½æ•°è¿”å›çš„æ•°æ®å¯¹è±¡





## åŒå‘ç»‘å®š

å½“æ”¹å˜htmlä»£ç æ—¶ï¼Œjsä»£ç ä¸­çš„æ•°æ®å¹¶æ²¡æœ‰å˜åŒ–

![image-20230619145845631](img/vueå­¦ä¹ ç¬”è®°/image-20230619145845631.png)

![image-20230619145852226](img/vueå­¦ä¹ ç¬”è®°/image-20230619145852226.png)





è§£å†³æ–¹å¼æ˜¯ä½¿ç”¨v-model å®ç°åŒå‘ç»‘å®š

* ç”¨ v-model å®ç°åŒå‘ç»‘å®šï¼Œå³
  * javascript æ•°æ®å¯ä»¥åŒæ­¥åˆ°è¡¨å•æ ‡ç­¾
  * åè¿‡æ¥ç”¨æˆ·åœ¨è¡¨å•æ ‡ç­¾è¾“å…¥çš„æ–°å€¼ä¹Ÿä¼šåŒæ­¥åˆ° javascript è¿™è¾¹
* åŒå‘ç»‘å®šåªé€‚ç”¨äºè¡¨å•è¿™ç§å¸¦ã€è¾“å…¥ã€‘åŠŸèƒ½çš„æ ‡ç­¾ï¼Œå…¶å®ƒæ ‡ç­¾çš„æ•°æ®ç»‘å®šï¼Œå•å‘å°±è¶³å¤Ÿäº†
* å¤é€‰æ¡†è¿™ç§æ ‡ç­¾ï¼ŒåŒå‘ç»‘å®šçš„ javascript æ•°æ®ç±»å‹ä¸€èˆ¬ç”¨æ•°ç»„





```vue
<template>
  <div>
    <input type="text" v-model="name" @change="m1">
    <br>
    <input type="number" v-model="age" @change="m2">
  </div>
</template>

<script>
export default {
  name: "App5",
  data()
  {
    return {
      name: "å¼ ä¸‰",
      age: 19,
    }
  },
  methods:
      {
        m1()
        {
          console.log("m1")
          console.log(this.name)
        },
        m2()
        {
          console.log("m2")
          console.log(this.age)
        }
      },
  mounted()
  {
    window.setInterval(() =>
    {
      this.age++;
    }, 5000)
  }
}
</script>

<style scoped>

</style>
```



![image-20230619150708775](img/vueå­¦ä¹ ç¬”è®°/image-20230619150708775.png)

![image-20230619150713277](img/vueå­¦ä¹ ç¬”è®°/image-20230619150713277.png)



![image-20230619150721627](img/vueå­¦ä¹ ç¬”è®°/image-20230619150721627.png)



![image-20230619150727177](img/vueå­¦ä¹ ç¬”è®°/image-20230619150727177.png)







## è®¡ç®—å±æ€§

ç›´æ¥ä½¿ç”¨æ–¹æ³•è®¡ç®—ï¼š

```vue
<template>
  <div>
    <h3>{{ fullName() }}</h3>
    <h3>{{ fullName() }}</h3>
    <h3>{{ fullName() }}</h3>
    <h3>{{ fullName() }}</h3>
  </div>
</template>

<script>
export default {
  name: "App6",
  data()
  {
    return {
      firstName: 'ä¸‰',
      lastName: 'å¼ '
    }
  },
  methods:
      {
        fullName()
        {
          //æ¨¡æ‹Ÿå»¶æ—¶
          for (let i = 0; i < 100000; i++)
          {
            for (let j = 0; j < 30000; j++)
            {

            }
          }
          console.log('è¿›å…¥äº† fullNameæ–¹æ³•')
          console.log(new Date().getTime())
          return this.lastName + this.firstName;
        }
      }
}
</script>

<style scoped>

</style>
```



![image-20230619151743462](img/vueå­¦ä¹ ç¬”è®°/image-20230619151743462.png)



![image-20230619151750351](img/vueå­¦ä¹ ç¬”è®°/image-20230619151750351.png)





4ä¸ªæ ‡ç­¾ï¼Œä¸€å…±è®¡ç®—äº†4æ¬¡ï¼Œè°ƒç”¨äº†4æ¬¡æ–¹æ³•





ä½¿ç”¨computedï¼š

```vue
<template>
  <div>
    <h3>{{ fullName }}</h3>
    <h3>{{ fullName }}</h3>
    <h3>{{ fullName }}</h3>
    <h3>{{ fullName }}</h3>
  </div>
</template>

<script>
export default {
  name: "App6",
  data()
  {
    return {
      firstName: 'ä¸‰',
      lastName: 'å¼ '
    }
  },
  methods:
      {
        /*fullName()
        {
          //æ¨¡æ‹Ÿå»¶æ—¶
          for (let i = 0; i < 100000; i++)
          {
            for (let j = 0; j < 30000; j++)
            {

            }
          }
          console.log('è¿›å…¥äº† fullNameæ–¹æ³•')
          console.log(new Date().getTime())
          return this.lastName + this.firstName;
        }*/
      },
  computed:
      {
        fullName()
        {
          //æ¨¡æ‹Ÿå»¶æ—¶
          for (let i = 0; i < 100000; i++)
          {
            for (let j = 0; j < 30000; j++)
            {

            }
          }
          console.log('è¿›å…¥äº† fullNameæ–¹æ³•')
          console.log(new Date().getTime())
          return this.lastName + this.firstName;
        }
      }
}
</script>

<style scoped>

</style>
```



![image-20230619152007734](img/vueå­¦ä¹ ç¬”è®°/image-20230619152007734.png)



![image-20230619152014261](img/vueå­¦ä¹ ç¬”è®°/image-20230619152014261.png)





4ä¸ªæ ‡ç­¾ï¼Œä¸€å…±åªè®¡ç®—äº†1æ¬¡ï¼Œè°ƒç”¨äº†1æ¬¡æ–¹æ³•ï¼Œå¤§å¤§ç¼©çŸ­äº†é¡µé¢åŠ è½½æ—¶é—´ï¼Œé¿å…äº†é‡å¤è®¡ç®—



* æ™®é€šæ–¹æ³•è°ƒç”¨å¿…é¡»åŠ  ()ï¼Œæ²¡æœ‰ç¼“å­˜åŠŸèƒ½
* è®¡ç®—å±æ€§ä½¿ç”¨æ—¶å°±æŠŠå®ƒå½“å±æ€§æ¥ç”¨ï¼Œä¸åŠ  ()ï¼Œæœ‰ç¼“å­˜åŠŸèƒ½ï¼š
  * ä¸€æ¬¡è®¡ç®—åï¼Œä¼šå°†ç»“æœç¼“å­˜ï¼Œä¸‹æ¬¡å†è®¡ç®—æ—¶ï¼Œåªè¦æ•°æ®æ²¡æœ‰å˜åŒ–ï¼Œä¸ä¼šé‡æ–°è®¡ç®—ï¼Œç›´æ¥è¿”å›ç¼“å­˜ç»“æœ







## æ¡ä»¶æ¸²æŸ“

æ¡ä»¶æ¸²æŸ“æœ‰ä¸¤ä¸ªæ ‡ç­¾ï¼š

* v-if
* v-show



### v-if

```vue
<template>
  <div>
    <p>
      æ˜¯å¦æˆå¹´ï¼š
      <strong v-if="age>=18">æ˜¯</strong>
      <strong v-else>ä¸æ˜¯</strong>
    </p>
    <p>
      æ˜¯å¦ä¸ºä¸­å›½äººï¼š
      <strong v-if="address==='ä¸­å›½'">æ˜¯</strong>
      <strong v-else>ä¸æ˜¯</strong>
    </p>
  </div>
</template>

<script>
export default {
  name: "App8",
  data()
  {
    return {
      age: 17,
      address: "ä¸­å›½"
    }
  }
}
</script>

<style scoped>

</style>
```



![image-20230619152921429](img/vueå­¦ä¹ ç¬”è®°/image-20230619152921429.png)





æ›´æ”¹æ•°æ®ï¼š

```vue
<template>
  <div>
    <p>
      æ˜¯å¦æˆå¹´ï¼š
      <strong v-if="age>=18">æ˜¯</strong>
      <strong v-else>ä¸æ˜¯</strong>
    </p>
    <p>
      æ˜¯å¦ä¸ºä¸­å›½äººï¼š
      <strong v-if="address==='ä¸­å›½'">æ˜¯</strong>
      <strong v-else>ä¸æ˜¯</strong>
    </p>
  </div>
</template>

<script>
export default {
  name: "App8",
  data()
  {
    return {
      age: 19,
      address: "ç¾å›½"
    }
  }
}
</script>

<style scoped>

</style>
```



![image-20230619153014021](img/vueå­¦ä¹ ç¬”è®°/image-20230619153014021.png)







### v-show

```vue
<template>
  <div>
    <p>
      æ˜¯å¦æˆå¹´ï¼š
      <strong v-show="age>=18">æ˜¯</strong>
      <strong v-show="age<18">ä¸æ˜¯</strong>
    </p>
    <p>
      æ˜¯å¦ä¸ºä¸­å›½äººï¼š
      <strong v-show="address==='ä¸­å›½'">æ˜¯</strong>
      <strong v-show="address!=='ä¸­å›½'">ä¸æ˜¯</strong>
    </p>
  </div>
</template>

<script>
export default {
  name: "App9",
  data()
  {
    return {
      age: 17,
      address: "ä¸­å›½"
    }
  }
}
</script>

<style scoped>

</style>
```





![image-20230619153339911](img/vueå­¦ä¹ ç¬”è®°/image-20230619153339911.png)







### åŒºåˆ«

1. v-ifåé¢èƒ½åŠ v-elseæˆ–è€…v-else-ifï¼Œv-showä¸èƒ½

![image-20230619153244742](img/vueå­¦ä¹ ç¬”è®°/image-20230619153244742.png)





2. v-ifæœ¬è´¨ä¸Šæ˜¯é€‰æ‹©æ€§åœ°æ·»åŠ æˆ–ç”Ÿæˆdomæ•°ä¸Šçš„æ ‡ç­¾ï¼Œv-showæ— è®ºæ¡ä»¶æ˜¯å¦æˆç«‹ï¼Œéƒ½ä¼šåœ¨domæ•°ä¸Šæ·»åŠ æ ‡ç­¾ï¼Œä½†æ˜¯å¯èƒ½ä¼šæœ‰display: none



v-ifæ¸²æŸ“åçš„é¡µé¢ä»£ç ï¼š

![image-20230619153543435](img/vueå­¦ä¹ ç¬”è®°/image-20230619153543435.png)



v-showæ¸²æŸ“åçš„é¡µé¢ä»£ç ï¼š

![image-20230619153753444](img/vueå­¦ä¹ ç¬”è®°/image-20230619153753444.png)









## åˆ—è¡¨æ¸²æŸ“

```vue
<template>
  <div>
    <table>
      <tr>
        <td>id</td>
        <td>å§“å</td>
        <td>æ€§åˆ«</td>
        <td>å¹´é¾„</td>
      </tr>
      <tr v-for="student of studentList" :key="student.id">
        <td>{{ student.id }}</td>
        <td>{{ student.name }}</td>
        <td>{{ student.sex }}</td>
        <td>{{ student.age }}</td>
      </tr>
    </table>
  </div>


</template>

<script>
export default {
  name: "App10",
  data()
  {
    return {
      studentList: (function ()
      {
        const data = []
        for (let i = 0; i < 20; i++)
        {
          data.push({
            id: 1000 + i,
            name: "å§“å" + (i + 1),
            age: Math.round(Math.random() * 10 + 10),
            sex: Math.random() > 0.5 ? "ç”·" : "å¥³"
          })
        }
        return data;
      }())
    }
  }
}
</script>

<style scoped>

</style>
```



![image-20230619161403926](img/vueå­¦ä¹ ç¬”è®°/image-20230619161403926.png)





æ‰“å°åºå·ï¼š

```vue
<template>
  <div>
    <table>
      <tr>
        <td>åºå·</td>
        <td>id</td>
        <td>å§“å</td>
        <td>æ€§åˆ«</td>
        <td>å¹´é¾„</td>
      </tr>
      <tr v-for="(student,index) of studentList" :key="student.id">
        <td>{{ index + 1 }}</td>
        <td>{{ student.id }}</td>
        <td>{{ student.name }}</td>
        <td>{{ student.sex }}</td>
        <td>{{ student.age }}</td>
      </tr>
    </table>
  </div>


</template>

<script>
export default {
  name: "App11",
  data()
  {
    return {
      studentList: (function ()
      {
        const data = []
        for (let i = 0; i < 20; i++)
        {
          data.push({
            id: 1000 + i,
            name: "å§“å" + (i + 1),
            age: Math.round(Math.random() * 10 + 10),
            sex: Math.random() > 0.5 ? "ç”·" : "å¥³"
          })
        }
        return data;
      }())
    }
  }
}
</script>

<style scoped>

</style>
```



![image-20230619161812817](img/vueå­¦ä¹ ç¬”è®°/image-20230619161812817.png)



* v-if å’Œ v-for ä¸èƒ½ç”¨äºåŒä¸€ä¸ªæ ‡ç­¾
* v-for éœ€è¦é…åˆç‰¹æ®Šçš„æ ‡ç­¾å±æ€§ key ä¸€èµ·ä½¿ç”¨ï¼Œå¹¶ä¸” key å±æ€§è¦ç»‘å®šåˆ°ä¸€ä¸ªèƒ½èµ·åˆ°å”¯ä¸€æ ‡è¯†ä½œç”¨çš„æ•°æ®ä¸Š





## v-text

æ˜¾ç¤ºæ–‡æœ¬

```vue
<template>
  <div>
    <p v-text="text1"></p>
    <p v-text="text2"></p>
  </div>
</template>

<script>
export default {
  name: "App12",
  data()
  {
    return {
      text1: "hello",
      text2: "<h1>ä½ å¥½</h1>",

    }
  }
}

</script>

<style scoped>

</style>
```



* v-textæ ‡ç­¾åªæ˜¾ç¤ºæ–‡æœ¬ï¼Œä¸è§£æå’Œæ¸²æŸ“æ ‡ç­¾
* ä½¿ç”¨v-textåï¼Œä¸èƒ½æ·»åŠ å€¼ï¼Œæ¯”å¦‚\<p v-text="text1">123\</p>



![image-20230619163015357](img/vueå­¦ä¹ ç¬”è®°/image-20230619163015357.png)







## v-html

```vue
<template>
  <div>
    <p v-html="text1"></p>
    <p v-html="text2"></p>
  </div>
</template>

<script>
export default {
  name: "App13",
  data()
  {
    return {
      text1: "hello",
      text2: "<h1>ä½ å¥½</h1>",
    }
  }
}

</script>

<style scoped>

</style>
```



![image-20230619163157361](img/vueå­¦ä¹ ç¬”è®°/image-20230619163157361.png)





* æ¸²æŸ“htmlæ ‡ç­¾ï¼Œæœ‰XSSæ”»å‡»é£é™©









## é‡ç”¨ç»„ä»¶

Vueé‡ç”¨ç»„ä»¶æ˜¯æŒ‡å¯ä»¥è¢«å¤šä¸ªVueå®ä¾‹é‡å¤ä½¿ç”¨çš„ç»„ä»¶ã€‚è¿™äº›ç»„ä»¶å¯ä»¥åŒ…å«è‡ªå®šä¹‰çš„çŠ¶æ€å’Œäº‹ä»¶å¤„ç†ç¨‹åºï¼Œå¹¶ä¸”å¯ä»¥åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­å…±äº«ã€‚é‡ç”¨ç»„ä»¶å¯ä»¥å‡å°‘ä»£ç å†—ä½™ï¼Œæé«˜å¼€å‘æ•ˆç‡ï¼Œå¹¶ä½¿ä»£ç æ›´åŠ æ¨¡å—åŒ–å’Œå¯ç»´æŠ¤ã€‚

åœ¨Vueä¸­ï¼Œå¯ä»¥ä½¿ç”¨\<component>æ ‡ç­¾æ¥å®šä¹‰é‡ç”¨ç»„ä»¶



åœ¨Componentsä¸‹æ·»åŠ MyButton.vue



![image-20230619215008048](img/vueå­¦ä¹ ç¬”è®°/image-20230619215008048.png)



MyButton.vueå†…å®¹ï¼š

```vue
<template>
  <div class="button" :class="[type,size]">
    -
    <slot></slot>
    -
  </div>
</template>

<script>
export default {
  name: "MyButton",
  props: ["type", "size"]
}
</script>

<style scoped>
.button {
  display: inline-block;
  text-align: center;
  border-radius: 30px;
  margin: 5px;
  font: bold 12px/25px Arial, sans-serif;
  padding: 0 2px;
  text-shadow: 1px 1px 1px rgba(255, 255, 255, .22);
  box-shadow: 1px 1px 1px rgba(0, 0, 0, .29), inset 1px 1px 1px rgba(255, 255, 255, .44);
  transition: all 0.15s ease;
}

.button:hover {
  box-shadow: 1px 1px 1px rgba(0, 0, 0, .29), inset 1px 1px 2px rgba(0, 0, 0, .5);
}

.button:active {
  box-shadow: inset 1px 1px 2px rgba(0, 0, 0, .8);
}

.primary {
  background-color: #1d6ef9;
  color: #b5e3f1;
}

.danger {
  background-color: rgb(196, 50, 50);
  color: white;
}

.success {
  background-color: #a5cd4e;;
  color: #3e5706;
}

.small {
  height: 25px;
  font-size: 14px;
  line-height: 25px;
}

.middle {
  height: 30px;
  font-size: 18px;
  line-height: 30px;
}

.large {
  height: 35px;
  font-size: 22px;
  line-height: 35px;
}
</style>

```



* props : è‡ªå®šä¹‰ç»„ä»¶å±æ€§
* slot : æ’æ§½ï¼Œç”¨æˆ·





ä½¿ç”¨MyButton.vueï¼š

```vue
<template>
  <div>
    <h1>ç»„ä»¶æµ‹è¯•</h1>
    <br>
    <my-button type="primary" size="small">12345</my-button>
    <my-button type="primary" size="middle">12345</my-button>
    <my-button type="primary" size="large">12345</my-button>
    <br>
    <my-button type="danger" size="small">12345</my-button>
    <my-button type="danger" size="middle">12345</my-button>
    <my-button type="danger" size="large">12345</my-button>
    <br>
    <my-button type="success" size="small">12345</my-button>
    <my-button type="success" size="middle">12345</my-button>
    <my-button type="success" size="large">12345</my-button>
    <br>

  </div>

</template>

<script>
import MyButton from '@/components/MyButton'

export default {
  name: "App14",
  components: {MyButton},
  data()
  {
    return {}
  }
}
</script>

<style scoped>

</style>
```





MyLink.vue

```vue
<template>
  <a :class="[size]" :href="link">
    <slot></slot>
  </a>
</template>

<script>
export default {
  name: "MyLink",
  props: ['size', 'link']
}
</script>

<style scoped>
a {
  color: tomato;
  text-decoration: none;
  display: flex;
  justify-content: center;
  align-items: center;
  text-align: center;
  padding: 0;
  list-style-type: none;
  font-family: sans-serif;
  text-transform: capitalize;
  position: relative;
  margin: 0.8em;
}

/* æ·»åŠ äº†å·¦å³ä¸¤ä¸ªåœ†ç‚¹ */
a::before, a::after {
  content: '';
  position: absolute;
  width: 0.6em;
  height: 0.6em;
  background-color: gainsboro;
  top: calc(50% - 0.3em);
  border-radius: 50%;
  transition: 0.5s cubic-bezier(0.5, -0.5, 0.25, 1.5);
}

a::before {
  left: 0;
  z-index: -1;
}

a::after {
  right: 0;
  z-index: -2;
}

/* æ·»åŠ æ‚¬æµ®æ•ˆæœ */
a:hover {
  color: deeppink;
}

/* ç»™å‰åä¼ªå…ƒç´ æ·»åŠ æ‚¬æµ®æ•ˆæœï¼Œæ³¨æ„å…ˆåé¡ºåºï¼Œå…ˆæ˜¯hoveråæ˜¯ä¼ªå…ƒç´  */
a:hover::before, a:hover::after {
  width: 100%;
  height: 100%;
  border-radius: 0;
  background-color: dodgerblue;
}

a:hover::before {
  top: 0;
  left: -0.2em;
}

a:hover::after {
  right: -0.2em;
  filter: brightness(0.8);
}

.small {
  font-size: 22px;
  width: 10em;
  height: 2em;
  line-height: 2em;
}

.middle {
  font-size: 25px;
  width: 10em;
  height: 2em;
  line-height: 2em;
}

.large {
  font-size: 28px;
  width: 10em;
  height: 2em;
  line-height: 2em;
}

</style>
```





ä½¿ç”¨MyLink.vue

```vue
<template>
  <my-link link="https://www.bilibili.com/" size="small">bç«™å®˜ç½‘</my-link>
  <my-link link="https://www.bilibili.com/" size="middle">bç«™å®˜ç½‘</my-link>
  <my-link link="https://www.bilibili.com/" size="large">bç«™å®˜ç½‘</my-link>
</template>

<script>
import MyLink from '@/components/MyLink'
export default {
  name: "App15",
  components: {MyLink}
}
</script>

<style scoped>

</style>
```



![image-20230619223725884](img/vueå­¦ä¹ ç¬”è®°/image-20230619223725884.png)



![image-20230619223732358](img/vueå­¦ä¹ ç¬”è®°/image-20230619223732358.png)













# axios

## æ¦‚è¿°

axios å®ƒçš„åº•å±‚æ˜¯ç”¨äº† XMLHttpRequestï¼ˆxhrï¼‰æ–¹å¼å‘é€è¯·æ±‚å’Œæ¥æ”¶å“åº”ï¼Œxhr ç›¸å¯¹äºä¹‹å‰è®²è¿‡çš„ fetch api æ¥è¯´ï¼ŒåŠŸèƒ½æ›´å¼ºå¤§ï¼Œä½†ç”±äºæ˜¯æ¯”è¾ƒè€çš„ apiï¼Œä¸æ”¯æŒ Promiseï¼Œaxios å¯¹ xhr è¿›è¡Œäº†å°è£…ï¼Œä½¿ä¹‹æ”¯æŒ Promiseï¼Œå¹¶æä¾›äº†å¯¹è¯·æ±‚ã€å“åº”çš„ç»Ÿä¸€æ‹¦æˆªåŠŸèƒ½





## å®‰è£…

å‘½ä»¤ï¼š

```sh
npm install axios -S
```



```sh
PS D:\ç¨‹åº\2023Q3\vue-test> npm install axios -S
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.3.2 (node_modules\fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"win32","arch":"x64"})

+ axios@1.4.0
added 6 packages from 18 contributors, removed 7 packages and audited 980 packages in 8.948s

90 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities

PS D:\ç¨‹åº\2023Q3\vue-test>
```



å¦‚æœåœ¨dependenciesä¸‹å‡ºç°axiosä¾èµ–ï¼Œè¯æ˜å®‰è£…æˆåŠŸ

![image-20230619224551265](img/vueå­¦ä¹ ç¬”è®°/image-20230619224551265.png)







## å¯¼å…¥

å‘½ä»¤ï¼š

```sh
import axios from 'axios'
```



axios é»˜è®¤å¯¼å‡ºä¸€ä¸ªå¯¹è±¡ï¼Œè¿™é‡Œçš„ import å¯¼å…¥çš„å°±æ˜¯å®ƒé»˜è®¤å¯¼å‡ºçš„å¯¹è±¡





## æ–¹æ³•

|                è¯·æ±‚                |  å¤‡æ³¨   |
| :--------------------------------: | :-----: |
|      axios.get(url[, config])      | getæ–¹æ³• |
|    axios.delete(url[, config])     |         |
|     axios.head(url[, config])      |         |
|    axios.options(url[, config])    |         |
| axios.post(url[, data[, config]])  |         |
|  axios.put(url[, data[, config]])  |         |
| axios.patch(url[, data[, config]]) |         |



* config - é€‰é¡¹å¯¹è±¡ã€ä¾‹å¦‚æŸ¥è¯¢å‚æ•°ã€è¯·æ±‚å¤´...
* data - è¯·æ±‚ä½“æ•°æ®ã€æœ€å¸¸è§çš„æ˜¯ json æ ¼å¼æ•°æ®
* getã€head è¯·æ±‚æ— æ³•æºå¸¦è¯·æ±‚ä½“ï¼Œè¿™åº”å½“æ˜¯æµè§ˆå™¨çš„é™åˆ¶æ‰€è‡´ï¼ˆxhrã€fetch api å‡æœ‰é™åˆ¶ï¼‰
* optionsã€delete è¯·æ±‚å¯ä»¥é€šè¿‡ config ä¸­çš„ data æºå¸¦è¯·æ±‚ä½“





## é…ç½®

|      åç§°       |                            å«ä¹‰                            |
| :-------------: | :--------------------------------------------------------: |
|     baseURL     |                    å°†è‡ªåŠ¨åŠ åœ¨ url å‰é¢                     |
|     headers     |                   è¯·æ±‚å¤´ï¼Œç±»å‹ä¸ºç®€å•å¯¹è±¡                   |
|     params      |  è·Ÿåœ¨ URL åçš„è¯·æ±‚å‚æ•°ï¼Œç±»å‹ä¸ºç®€å•å¯¹è±¡æˆ– URLSearchParams   |
|      data       | è¯·æ±‚ä½“ï¼Œç±»å‹æœ‰ç®€å•å¯¹è±¡ã€FormDataã€URLSearchParamsã€File ç­‰ |
| withCredentials |         è·¨åŸŸæ—¶æ˜¯å¦æºå¸¦ Cookie ç­‰å‡­è¯ï¼Œé»˜è®¤ä¸º false         |
|  responseType   |                   å“åº”ç±»å‹ï¼Œé»˜è®¤ä¸º json                    |



```js
const _axios = axios.create({
    baseURL: 'http://localhost:8080',
    withCredentials: true
});
```

* ç”Ÿäº§ç¯å¢ƒå¸Œæœ› xhr è¯·æ±‚ä¸èµ°ä»£ç†ï¼Œå¯ä»¥ç”¨ baseURL ç»Ÿä¸€ä¿®æ”¹
* å¸Œæœ›è·¨åŸŸè¯·æ±‚æºå¸¦ cookieï¼Œéœ€è¦é…ç½® withCredentials: trueï¼ŒæœåŠ¡å™¨ä¹Ÿè¦é…ç½® allowCredentials = trueï¼Œå¦åˆ™æµè§ˆå™¨è·å–è·¨åŸŸè¿”å›çš„ cookie æ—¶ä¼šæŠ¥é”™







## ç¤ºä¾‹

```vue
<template>

</template>

<script>
import axios from 'axios'

export default {
  name: "App16",
  data()
  {
    return {
      resp: null
    }
  },
  methods:
      {
        testGet()
        {
          axios.get("/api/testGet").then((resp) =>
          {
            console.log(resp);
            this.resp = resp;
          }).catch((error) =>
          {
            console.log(error);
          })
        },
        testPost()
        {
          axios.post("/api/testPost").then((resp) =>
          {
            console.log(resp);
            this.resp = resp;
          }).catch((error) =>
          {
            console.log(error);
          })
        },
        test()
        {
          //axioså‘èµ·ajaxè¯·æ±‚
          axios({
            //è¯·æ±‚çš„æ–¹å¼ï¼š
            method: "post",
            //è¯·æ±‚çš„url:
            url: "/api/testPost",
            //urlå‚æ•°ï¼š
            params:
                {
                  a: 1,
                  b: 2,
                  c: 3
                },
            //å¤´ä¿¡æ¯ï¼š
            headers:
                {
                  token: "123456"
                },
            //è¯·æ±‚ä½“å‚æ•°ï¼š
            data:
                {
                  a1: 11,
                  b2: 22,
                  c3: 33
                },
          }).then(response =>
          {
            console.log(response);
            this.resp = response;
          }).catch(error =>
          {
            console.log(error);
          })
        }
      },
  mounted()
  {
    this.testGet();
    this.testPost();
    this.test();
  }

}
</script>

<style scoped>

</style>
```



![image-20230619225901364](img/vueå­¦ä¹ ç¬”è®°/image-20230619225901364.png)



![image-20230619225924100](img/vueå­¦ä¹ ç¬”è®°/image-20230619225924100.png)



![image-20230619225950803](img/vueå­¦ä¹ ç¬”è®°/image-20230619225950803.png)



![image-20230619230002613](img/vueå­¦ä¹ ç¬”è®°/image-20230619230002613.png)











## åˆ›å»ºå®ä¾‹

```js
const _axios = axios.create(config);
```

* axios å¯¹è±¡å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œä½†ä½¿ç”¨çš„æ˜¯é»˜è®¤çš„è®¾ç½®
* ç”¨ axios.create åˆ›å»ºçš„å¯¹è±¡ï¼Œå¯ä»¥è¦†ç›–é»˜è®¤è®¾ç½®









## æ‹¦æˆªå™¨

```vue
<script>
import axios from 'axios'

const _axios = axios.create({
  baseURL: 'http://localhost:8083',
  withCredentials: true
});
_axios.interceptors.request.use(
    function (config)
    {
      //åœ¨è¿™é‡Œæ·»åŠ ç»Ÿä¸€çš„ headers
      config.headers.auth = "12345678901234567890"
      return config;
    }
)
_axios.interceptors.response.use(
    function (response)
    {
      //2xx èŒƒå›´å†…èµ°è¿™é‡Œ
      console.log("è¯·æ±‚æˆåŠŸ")
      console.log(response)
      return response;
    },
    function (error)
    {
      //è¶…å‡º 2xx, æ¯”å¦‚ 4xx, 5xx èµ°è¿™é‡Œ
      console.log("è¯·æ±‚é”™è¯¯")
      console.log(error)
      return error;
    }
);

console.log("åˆå§‹åŒ–_axios")

export default _axios;
</script>


```





ä½¿ç”¨ï¼š

```vue
<template>
  <div>

  </div>
</template>

<script>
import _axios from "@/components/MyAxios"

export default {
  name: "App17",
  methods:
      {
        test()
        {
          _axios.get("/testGet", (resp) =>
          {
            console.log(resp)
          })
        },
        test2()
        {
          //axioså‘èµ·ajaxè¯·æ±‚
          _axios({
            //è¯·æ±‚çš„æ–¹å¼ï¼š
            method: "post",
            //è¯·æ±‚çš„url:
            url: "test2",
            //urlå‚æ•°ï¼š
            params:
                {

                },
            //å¤´ä¿¡æ¯ï¼š
            headers:
                {
                  auth2: "1312324",
                  token: "12131313131"
                },
            //è¯·æ±‚ä½“å‚æ•°ï¼š
            data:
                {a:1},
          }).then(response =>
          {
            console.log(response);

          })
        }
      },
  mounted()
  {
    this.test();
    this.test2();
  }
}
</script>

<style scoped>

</style>

```



![image-20230619233257714](img/vueå­¦ä¹ ç¬”è®°/image-20230619233257714.png)



![image-20230619233307998](img/vueå­¦ä¹ ç¬”è®°/image-20230619233307998.png)





![image-20230619234048592](img/vueå­¦ä¹ ç¬”è®°/image-20230619234048592.png)



![image-20230619234059128](img/vueå­¦ä¹ ç¬”è®°/image-20230619234059128.png)













# ElementUI

## æ¦‚è¿°

Elementï¼Œä¸€å¥—ä¸ºå¼€å‘è€…ã€è®¾è®¡å¸ˆå’Œäº§å“ç»ç†å‡†å¤‡çš„åŸºäº Vue 2.0 çš„æ¡Œé¢ç«¯ç»„ä»¶åº“

æœ¬äººå·²ç»å­¦ä¹ è¿‡ï¼Œä¸èŠ±è¿‡å¤šæ—¶é—´å†æ¬¡å­¦ä¹ 



å®˜ç½‘ï¼šhttps://element.eleme.cn/#/zh-CN



![image-20230619234740466](img/vueå­¦ä¹ ç¬”è®°/image-20230619234740466.png)







**ä¸€è‡´æ€§ Consistency**

- **ä¸ç°å®ç”Ÿæ´»ä¸€è‡´ï¼š**ä¸ç°å®ç”Ÿæ´»çš„æµç¨‹ã€é€»è¾‘ä¿æŒä¸€è‡´ï¼Œéµå¾ªç”¨æˆ·ä¹ æƒ¯çš„è¯­è¨€å’Œæ¦‚å¿µï¼›
- **åœ¨ç•Œé¢ä¸­ä¸€è‡´ï¼š**æ‰€æœ‰çš„å…ƒç´ å’Œç»“æ„éœ€ä¿æŒä¸€è‡´ï¼Œæ¯”å¦‚ï¼šè®¾è®¡æ ·å¼ã€å›¾æ ‡å’Œæ–‡æœ¬ã€å…ƒç´ çš„ä½ç½®ç­‰ã€‚



**åé¦ˆ Feedback**

- **æ§åˆ¶åé¦ˆï¼š**é€šè¿‡ç•Œé¢æ ·å¼å’Œäº¤äº’åŠ¨æ•ˆè®©ç”¨æˆ·å¯ä»¥æ¸…æ™°çš„æ„ŸçŸ¥è‡ªå·±çš„æ“ä½œï¼›
- **é¡µé¢åé¦ˆï¼š**æ“ä½œåï¼Œé€šè¿‡é¡µé¢å…ƒç´ çš„å˜åŒ–æ¸…æ™°åœ°å±•ç°å½“å‰çŠ¶æ€ã€‚



**æ•ˆç‡ Efficiency**

- **ç®€åŒ–æµç¨‹ï¼š**è®¾è®¡ç®€æ´ç›´è§‚çš„æ“ä½œæµç¨‹ï¼›
- **æ¸…æ™°æ˜ç¡®ï¼š**è¯­è¨€è¡¨è¾¾æ¸…æ™°ä¸”è¡¨æ„æ˜ç¡®ï¼Œè®©ç”¨æˆ·å¿«é€Ÿç†è§£è¿›è€Œä½œå‡ºå†³ç­–ï¼›
- **å¸®åŠ©ç”¨æˆ·è¯†åˆ«ï¼š**ç•Œé¢ç®€å•ç›´ç™½ï¼Œè®©ç”¨æˆ·å¿«é€Ÿè¯†åˆ«è€Œéå›å¿†ï¼Œå‡å°‘ç”¨æˆ·è®°å¿†è´Ÿæ‹…ã€‚



**å¯æ§ Controllability**

- **ç”¨æˆ·å†³ç­–ï¼š**æ ¹æ®åœºæ™¯å¯ç»™äºˆç”¨æˆ·æ“ä½œå»ºè®®æˆ–å®‰å…¨æç¤ºï¼Œä½†ä¸èƒ½ä»£æ›¿ç”¨æˆ·è¿›è¡Œå†³ç­–ï¼›
- **ç»“æœå¯æ§ï¼š**ç”¨æˆ·å¯ä»¥è‡ªç”±çš„è¿›è¡Œæ“ä½œï¼ŒåŒ…æ‹¬æ’¤é”€ã€å›é€€å’Œç»ˆæ­¢å½“å‰æ“ä½œç­‰ã€‚







## vue2å®‰è£…elementUI

å‘½ä»¤ï¼š

```sh
npm i element-ui -S
```



```sh
PS D:\ç¨‹åº\2023Q3\vue-test> npm i element-ui -S
npm WARN deprecated core-js@2.6.12: core-js@<3.23.3 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detectio
n in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Some versions have web compatibility issues. Please, upgrade your dependencies to the actual
 version of core-js.

> core-js@2.6.12 postinstall D:\ç¨‹åº\2023Q3\vue-test\node_modules\babel-runtime\node_modules\core-js
> node -e "try{require('./postinstall')}catch(e){}"

Thank you for using core-js ( https://github.com/zloirock/core-js ) for polyfilling JavaScript standard library!

The project needs your help! Please consider supporting of core-js on Open Collective or Patreon: 
> https://opencollective.com/core-js 
> https://www.patreon.com/zloirock 

Also, the author of core-js ( https://github.com/zloirock ) is looking for a good job -)

npm WARN element-ui@2.15.13 requires a peer of vue@^2.5.17 but none is installed. You must install peer dependencies yourself.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.3.2 (node_modules\fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"win32","arch":"x64"})

+ element-ui@2.15.13
added 9 packages from 8 contributors and audited 989 packages in 19.129s

90 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities

PS D:\ç¨‹åº\2023Q3\vue-test>
```



![image-20230619235345358](img/vueå­¦ä¹ ç¬”è®°/image-20230619235345358.png)





**elementæ˜¯æ”¯æŒ vue2.x çš„ï¼Œvue3.x æš‚æ—¶è¿˜ä¸æ”¯æŒ ElementUI**

å¦‚æœç›´æ¥ä½¿ç”¨ï¼Œå°†ä¼šå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š

![image-20230620000813835](img/vueå­¦ä¹ ç¬”è®°/image-20230620000813835.png)









## vue3å®‰è£…elementUI

å‘½ä»¤ï¼š

```sh
npm install element-plus --save
```



```sh
PS D:\ç¨‹åº\2023Q3\vue-test> npm install element-plus --save

> vue-demi@0.14.5 postinstall D:\ç¨‹åº\2023Q3\vue-test\node_modules\vue-demi
> node ./scripts/postinstall.js

npm WARN element-ui@2.15.13 requires a peer of vue@^2.5.17 but none is installed. You must install peer dependencies yourself.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.3.2 (node_modules\fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"win32","arch":"x64"})

+ element-plus@2.3.6
added 19 packages from 25 contributors and audited 1008 packages in 67.979s

95 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities

PS D:\ç¨‹åº\2023Q3\vue-test>
```



```sh
npm install @element-plus/icons-vue
```



```sh
PS D:\ç¨‹åº\2023Q3\vue-test> npm install @element-plus/icons-vue
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.3.2 (node_modules\fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"win32","arch":"x64"})

+ @element-plus/icons-vue@2.1.0
updated 1 package and audited 1000 packages in 4.308s

95 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities

PS D:\ç¨‹åº\2023Q3\vue-test>
```





```sh
npm install @vue/shared
```

```sh
PS D:\ç¨‹åº\2023Q3\vue-test> npm install @vue/shared
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.3.2 (node_modules\fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"win32","arch":"x64"})

+ @vue/shared@3.3.4
added 1 package from 1 contributor and audited 1000 packages in 3.162s

95 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities

PS D:\ç¨‹åº\2023Q3\vue-test>
```



![image-20230620005022932](img/vueå­¦ä¹ ç¬”è®°/image-20230620005022932.png)





## å¼•å…¥ç»„ä»¶

vue2ï¼š

```js
import { createApp } from 'vue'
import App from './App18.vue'

import Vue from 'vue';
import ElementUI from 'element-ui';
import 'element-ui/lib/theme-chalk/index.css';
Vue.use(ElementUI);

createApp(App).mount('#app')
```



vue3ï¼š

```js
import { createApp } from 'vue'

import ElementPlus from 'element-plus'
import 'element-plus/dist/index.css'

import App from './App18.vue'

const app = createApp(App)

app.use(ElementPlus)
app.mount('#app')
```





## Button æŒ‰é’®

```vue
<template>
  <div>
    <el-row>
      <el-button>é»˜è®¤æŒ‰é’®</el-button>
      <el-button type="primary">ä¸»è¦æŒ‰é’®</el-button>
      <el-button type="success">æˆåŠŸæŒ‰é’®</el-button>
      <el-button type="info">ä¿¡æ¯æŒ‰é’®</el-button>
      <el-button type="warning">è­¦å‘ŠæŒ‰é’®</el-button>
      <el-button type="danger">å±é™©æŒ‰é’®</el-button>
    </el-row>

    <br>
    <br>

    <el-row>
      <el-button plain>æœ´ç´ æŒ‰é’®</el-button>
      <el-button type="primary" plain>ä¸»è¦æŒ‰é’®</el-button>
      <el-button type="success" plain>æˆåŠŸæŒ‰é’®</el-button>
      <el-button type="info" plain>ä¿¡æ¯æŒ‰é’®</el-button>
      <el-button type="warning" plain>è­¦å‘ŠæŒ‰é’®</el-button>
      <el-button type="danger" plain>å±é™©æŒ‰é’®</el-button>
    </el-row>

    <br>
    <br>

    <el-row>
      <el-button round>åœ†è§’æŒ‰é’®</el-button>
      <el-button type="primary" round>ä¸»è¦æŒ‰é’®</el-button>
      <el-button type="success" round>æˆåŠŸæŒ‰é’®</el-button>
      <el-button type="info" round>ä¿¡æ¯æŒ‰é’®</el-button>
      <el-button type="warning" round>è­¦å‘ŠæŒ‰é’®</el-button>
      <el-button type="danger" round>å±é™©æŒ‰é’®</el-button>
    </el-row>


  </div>
</template>

<script>

export default {
  name: "App18"
}
</script>

<style scoped>

</style>
```





![image-20230620005852317](img/vueå­¦ä¹ ç¬”è®°/image-20230620005852317.png)









## Table è¡¨æ ¼

```vue
<template>
  <div>

    <el-table
        :data="tableData"
        style="width: 100%">
      <el-table-column
          prop="id"
          label="å­¦å·"
          width="180">
      </el-table-column>
      <el-table-column
          prop="name"
          label="å§“å"
          width="180">
      </el-table-column>
      <el-table-column
          prop="sex"
          label="æ€§åˆ«"
          width="180">
      </el-table-column>
      <el-table-column
          prop="age"
          label="å¹´é¾„"
          width="180">
      </el-table-column>
    </el-table>

  </div>
</template>

<script>
import {ElMessage} from 'element-plus'

export default {
  name: "App19",
  data()
  {
    return {
      tableData: (function ()
      {
        const data = [];
        for (let i = 0; i < 100; i++)
        {
          data.push({
            id: 100001 + i,
            name: "å§“å" + (i + 1),
            sex: Math.random() > 0.5 ? "ç”·" : "å¥³",
            age: Math.round(Math.random() * 10 + 10)
          })
        }
        ElMessage({
          type: 'success',
          message: "åŠ è½½å®Œæˆ"
        })
        return data;
      }())
    }
  }
}
</script>

<style scoped>

</style>
```



![image-20230620195303433](img/vueå­¦ä¹ ç¬”è®°/image-20230620195303433.png)

















# Vue-Router

## æ¦‚è¿°

vue å±äºå•é¡µé¢åº”ç”¨ï¼Œæ‰€è°“çš„è·¯ç”±ï¼Œå°±æ˜¯æ ¹æ®æµè§ˆå™¨è·¯å¾„ä¸åŒï¼Œç”¨ä¸åŒçš„**è§†å›¾ç»„ä»¶**æ›¿æ¢è¿™ä¸ªé¡µé¢å†…å®¹å±•ç¤º

vue-routeræ˜¯Vue.jså®˜æ–¹çš„è·¯ç”±æ’ä»¶ï¼Œå®ƒå’Œvue.jsæ˜¯æ·±åº¦é›†æˆçš„ï¼Œé€‚åˆç”¨äºæ„å»ºå•é¡µé¢åº”ç”¨ã€‚

ueçš„å•é¡µé¢åº”ç”¨æ˜¯åŸºäºè·¯ç”±å’Œç»„ä»¶çš„ï¼Œè·¯ç”±ç”¨äºè®¾å®šè®¿é—®è·¯å¾„ï¼Œå¹¶å°†è·¯å¾„å’Œç»„ä»¶æ˜ å°„èµ·æ¥ã€‚ä¼ ç»Ÿçš„é¡µé¢åº”ç”¨ï¼Œæ˜¯ç”¨ä¸€äº›è¶…é“¾æ¥æ¥å®ç°é¡µé¢åˆ‡æ¢å’Œè·³è½¬çš„ã€‚åœ¨vue-routerå•é¡µé¢åº”ç”¨ä¸­ï¼Œåˆ™æ˜¯è·¯å¾„ä¹‹é—´çš„åˆ‡æ¢ï¼Œä¹Ÿå°±æ˜¯ç»„ä»¶çš„åˆ‡æ¢ã€‚è·¯ç”±æ¨¡å—çš„æœ¬è´¨ å°±æ˜¯å»ºç«‹èµ·urlå’Œé¡µé¢ä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚



è‡³äºæˆ‘ä»¬ä¸ºå•¥ä¸èƒ½ç”¨aæ ‡ç­¾ï¼Œè¿™æ˜¯å› ä¸ºç”¨Vueåšçš„éƒ½æ˜¯å•é¡µåº”ç”¨ï¼Œå°±ç›¸å½“äºåªæœ‰ä¸€ä¸ªä¸»çš„index.htmlé¡µé¢ï¼Œæ‰€ä»¥ä½ å†™çš„æ ‡ç­¾æ˜¯ä¸èµ·ä½œç”¨çš„ï¼Œä½ å¿…é¡»ä½¿ç”¨vue-routeræ¥è¿›è¡Œç®¡ç†ã€‚



åŠŸèƒ½åŒ…æ‹¬ï¼š

- åµŒå¥—è·¯ç”±æ˜ å°„
- åŠ¨æ€è·¯ç”±é€‰æ‹©
- æ¨¡å—åŒ–ã€åŸºäºç»„ä»¶çš„è·¯ç”±é…ç½®
- è·¯ç”±å‚æ•°ã€æŸ¥è¯¢ã€é€šé…ç¬¦
- å±•ç¤ºç”± Vue.js çš„è¿‡æ¸¡ç³»ç»Ÿæä¾›çš„è¿‡æ¸¡æ•ˆæœ
- ç»†è‡´çš„å¯¼èˆªæ§åˆ¶
- è‡ªåŠ¨æ¿€æ´» CSS ç±»çš„é“¾æ¥
- HTML5 history æ¨¡å¼æˆ– hash æ¨¡å¼
- å¯å®šåˆ¶çš„æ»šåŠ¨è¡Œä¸º
- URL çš„æ­£ç¡®ç¼–ç 





## å®˜ç½‘åœ°å€å’Œæ•™ç¨‹

å®˜æ–¹ç½‘ç«™ï¼šhttps://router.vuejs.org/zh/

æ•™ç¨‹åœ°å€ï¼šhttps://router.vuejs.org/zh/guide/



**vue2å’Œvue3ä¼šæœ‰æ‰€ä¸åŒ**





## å®‰è£…

å‘½ä»¤ï¼š

```sh
npm install vue-router@4
```



```sh
PS D:\ç¨‹åº\2023Q3\vue-test> npm install vue-router@4
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.3.2 (node_modules\fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"win32","arch":"x64"})

+ vue-router@4.2.2
added 2 packages from 1 contributor and audited 1002 packages in 6.82s

96 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities

PS D:\ç¨‹åº\2023Q3\vue-test>
```





![image-20230620201956766](img/vueå­¦ä¹ ç¬”è®°/image-20230620201956766.png)









## å…¥é—¨

srcä¸‹çš„routerç›®å½•åˆ›å»ºRouter1.vueï¼š

![image-20230620205214934](img/vueå­¦ä¹ ç¬”è®°/image-20230620205214934.png)



å†…å®¹å¦‚ä¸‹ï¼š

```vue
<script>

import {createRouter, createWebHashHistory} from 'vue-router'
import App from '@/App'
import App2 from '@/App2'
import App3 from '@/App3'
import App4 from '@/App4'
import App5 from '@/App5'
import App6 from '@/App6'
import App7 from '@/App7'
import App8 from '@/App8'
import App9 from '@/App9'
import App10 from '@/App10'
import App11 from '@/App11'
import App12 from '@/App12'
import App13 from '@/App13'
import App15 from '@/App15'
import App14 from '@/App14'
import App16 from '@/App16'
import App17 from '@/App17'
import App18 from '@/App18'
import App19 from '@/App19'


const routes = [
  {
    path: '/',
    component: App
  },
  {
    path: '/app2',
    component: App2
  },
  {
    path: '/app3',
    component: App3
  },
  {
    path: '/app4',
    component: App4
  },
  {
    path: '/app5',
    component: App5
  },
  {
    path: '/app6',
    component: App6
  },
  {
    path: '/app7',
    component: App7
  },
  {
    path: '/app8',
    component: App8
  },
  {
    path: '/app9',
    component: App9
  },
  {
    path: '/app10',
    component: App10
  },
  {
    path: '/app11',
    component: App11
  },
  {
    path: '/app12',
    component: App12
  },
  {
    path: '/app13',
    component: App13
  },
  {
    path: '/app14',
    component: App14
  },
  {
    path: '/app15',
    component: App15
  },
  {
    path: '/app16',
    component: App16
  },
  {
    path: '/app17',
    component: App17
  },
  {
    path: '/app18',
    component: App18
  },
  {
    path: '/app19',
    component: App19
  },
]

const router = createRouter({
  //å†…éƒ¨æä¾›äº† history æ¨¡å¼çš„å®ç°ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨ hash æ¨¡å¼ã€‚
  history: createWebHashHistory(),
  routes, // `routes: routes` çš„ç¼©å†™
})

export default router

</script>
```





æ›´æ”¹main.js



![image-20230620205322947](img/vueå­¦ä¹ ç¬”è®°/image-20230620205322947.png)



```js
import { createApp } from 'vue'

import ElementPlus from 'element-plus'
import 'element-plus/dist/index.css'

import App from './App20.vue'
import Router1 from '@/router/Router1'

const app = createApp(App)

app.use(ElementPlus)
app.use(Router1)
app.mount('#app')
```



App20.vueï¼š

```vue
<template>

  <div class="all">
    <router-view class="r"></router-view>
  </div>

</template>

<script>
export default {
  name: "App20"
}
</script>

<style scoped>
.all {
  padding: 20px;
  background: #b5e3f1;
}
.r{
  background: cornflowerblue;
}

body {

}
</style>
```





æ‰‹åŠ¨æ›´æ”¹æµè§ˆå™¨åœ°å€æ ï¼Œæµ‹è¯•å¦‚ä¸‹ï¼š

![image-20230620205416678](img/vueå­¦ä¹ ç¬”è®°/image-20230620205416678.png)



![image-20230620205438100](img/vueå­¦ä¹ ç¬”è®°/image-20230620205438100.png)



![image-20230620205447199](img/vueå­¦ä¹ ç¬”è®°/image-20230620205447199.png)



![image-20230620205510683](img/vueå­¦ä¹ ç¬”è®°/image-20230620205510683.png)



![image-20230620205521137](img/vueå­¦ä¹ ç¬”è®°/image-20230620205521137.png)



![image-20230620205537978](img/vueå­¦ä¹ ç¬”è®°/image-20230620205537978.png)



![image-20230620205559621](img/vueå­¦ä¹ ç¬”è®°/image-20230620205559621.png)



![image-20230620205608985](img/vueå­¦ä¹ ç¬”è®°/image-20230620205608985.png)







*  `<router-view>` èµ·åˆ°å ä½ä½œç”¨ï¼Œæ”¹å˜è·¯å¾„åï¼Œè¿™ä¸ªè·¯å¾„å¯¹åº”çš„è§†å›¾ç»„ä»¶å°±ä¼šå æ® `<router-view>` çš„ä½ç½®ï¼Œæ›¿æ¢æ‰å®ƒä¹‹å‰çš„å†…å®¹







## è·³è½¬

### æ¦‚è¿°

æœ‰ä¸¤ç§æ–¹å¼ï¼š

* ä½¿ç”¨router-linkæ ‡ç­¾è·³è½¬
* ä½¿ç”¨jsä»£ç è·³è½¬





### router-linkæ ‡ç­¾

```vue
<template>

  <el-container>
    <el-aside width="200px">
      <div class="link">

        <!--ä½¿ç”¨ router-link ç»„ä»¶è¿›è¡Œå¯¼èˆª -->
        <!--é€šè¿‡ä¼ é€’ `to` æ¥æŒ‡å®šé“¾æ¥ -->
        <router-link to="/">é¦–é¡µ</router-link>
        <br>
        <router-link to="/app2">app2</router-link>
        <br>
        <router-link to="/app3">app3</router-link>
        <br>
        <router-link to="/app4">app4</router-link>
        <br>
        <router-link to="/app5">app5</router-link>
        <br>
        <router-link to="/app6">app6</router-link>
        <br>
        <router-link to="/app7">app7</router-link>
        <br>
        <router-link to="/app8">app8</router-link>
        <br>
        <router-link to="/app9">app9</router-link>
        <br>
        <router-link to="/app10">app10</router-link>
        <br>
        <router-link to="/app11">app11</router-link>
        <br>
        <router-link to="/app12">app12</router-link>
        <br>
        <router-link to="/app13">app13</router-link>
        <br>
        <router-link to="/app14">app14</router-link>
        <br>
        <router-link to="/app15">app15</router-link>
        <br>
        <router-link to="/app16">app16</router-link>
        <br>
        <router-link to="/app17">app17</router-link>
        <br>
        <router-link to="/app18">app18</router-link>
        <br>
        <router-link to="/app19">app19</router-link>

      </div>
    </el-aside>
    <el-container>
      <el-header>è·¯ç”±è·³è½¬</el-header>
      <el-main>
        <div class="all">
          <router-view class="r"></router-view>
        </div>
      </el-main>
    </el-container>
  </el-container>

</template>

<script>
export default {
  name: "App21"
}
</script>

<style scoped>
.all {
  padding: 20px;
  background: #b5e3f1;
}

.r {
  background: cornflowerblue;
}

.link{
  background: #42b983;
  height: 100vh;
}
</style>
```



main.js

```vue
import { createApp } from 'vue'

import ElementPlus from 'element-plus'
import 'element-plus/dist/index.css'

import App from './App21.vue'
import Router1 from '@/router/Router1'

const app = createApp(App)

app.use(ElementPlus)
app.use(Router1)
app.mount('#app')
```





![image-20230620211247690](img/vueå­¦ä¹ ç¬”è®°/image-20230620211247690.png)



![image-20230620211306896](img/vueå­¦ä¹ ç¬”è®°/image-20230620211306896.png)



![image-20230620211329275](img/vueå­¦ä¹ ç¬”è®°/image-20230620211329275.png)





æˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨å¸¸è§„çš„ a æ ‡ç­¾ï¼Œè€Œæ˜¯ä½¿ç”¨ä¸€ä¸ªè‡ªå®šä¹‰ç»„ä»¶ router-link æ¥åˆ›å»ºé“¾æ¥ã€‚è¿™ä½¿å¾— Vue Router å¯ä»¥åœ¨ä¸é‡æ–°åŠ è½½é¡µé¢çš„æƒ…å†µä¸‹æ›´æ”¹ URLï¼Œå¤„ç† URL çš„ç”Ÿæˆä»¥åŠç¼–ç 







### jsä»£ç 

ä½¿ç”¨`this.$router.push('/')`æ¥å®ç°è·³è½¬



```vue
<template>

  <el-container>
    <el-aside width="200px">
      <div className="link">

        <br>
        <el-input type="text" size="large" autocomplete="false" v-model="to"/>
        <br>
        <el-button type="success" size="large" @click="go">ç‚¹å‡»è·³è½¬</el-button>

      </div>
    </el-aside>
    <el-container>
      <el-header>è·¯ç”±è·³è½¬</el-header>
      <el-main>
        <div className="all">
          <router-view className="r"></router-view>
        </div>
      </el-main>
    </el-container>
  </el-container>

</template>

<script>
export default {
  name: "App22",
  data()
  {
    return {
      to: "/",
    }
  },
  methods:
      {
        go()
        {
          console.log("è·³è½¬åˆ°ï¼š" + this.to)
          this.$router.push(this.to);
        }
      }

}
</script>

<style scoped>
.all {
  padding: 20px;
  background: #b5e3f1;
}

.r {
  background: cornflowerblue;
}

.link {
  background: #42b983;
  height: 100vh;
}
</style>
```



![image-20230620212552188](img/vueå­¦ä¹ ç¬”è®°/image-20230620212552188.png)



![image-20230620212605983](img/vueå­¦ä¹ ç¬”è®°/image-20230620212605983.png)



![image-20230620212622895](img/vueå­¦ä¹ ç¬”è®°/image-20230620212622895.png)



![image-20230620212629513](img/vueå­¦ä¹ ç¬”è®°/image-20230620212629513.png)









## åŠ¨æ€è·¯ç”±

å¯¹è·¯ç”±çš„æ·»åŠ é€šå¸¸æ˜¯é€šè¿‡ routes é€‰é¡¹æ¥å®Œæˆçš„ï¼Œä½†æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½æƒ³åœ¨åº”ç”¨ç¨‹åºå·²ç»è¿è¡Œçš„æ—¶å€™æ·»åŠ æˆ–åˆ é™¤è·¯ç”±ã€‚

åŠ¨æ€è·¯ç”±ä¸»è¦é€šè¿‡ä¸¤ä¸ªå‡½æ•°å®ç°ã€‚`router.addRoute()` å’Œ `router.removeRoute()`ã€‚å®ƒä»¬**åª**æ³¨å†Œä¸€ä¸ªæ–°çš„è·¯ç”±ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæ–°å¢åŠ çš„è·¯ç”±ä¸å½“å‰ä½ç½®ç›¸åŒ¹é…ï¼Œå°±éœ€è¦ä½ ç”¨ `router.push()` æˆ– `router.replace()` æ¥**æ‰‹åŠ¨å¯¼èˆª**ï¼Œæ‰èƒ½æ˜¾ç¤ºè¯¥æ–°è·¯ç”±



æœ‰å‡ ä¸ªä¸åŒçš„æ–¹æ³•æ¥åˆ é™¤ç°æœ‰çš„è·¯ç”±ï¼š

1. é€šè¿‡æ·»åŠ ä¸€ä¸ªåç§°å†²çªçš„è·¯ç”±ã€‚å¦‚æœæ·»åŠ ä¸ç°æœ‰é€”å¾„åç§°ç›¸åŒçš„é€”å¾„ï¼Œä¼šå…ˆåˆ é™¤è·¯ç”±ï¼Œå†æ·»åŠ è·¯ç”±ï¼š

```js
router.addRoute({ path: '/about', name: 'about', component: About })
// è¿™å°†ä¼šåˆ é™¤ä¹‹å‰å·²ç»æ·»åŠ çš„è·¯ç”±ï¼Œå› ä¸ºä»–ä»¬å…·æœ‰ç›¸åŒçš„åå­—ä¸”åå­—å¿…é¡»æ˜¯å”¯ä¸€çš„
router.addRoute({ path: '/other', name: 'about', component: Other })
```



2. é€šè¿‡è°ƒç”¨ `router.addRoute()` è¿”å›çš„å›è°ƒ
3. é€šè¿‡ä½¿ç”¨ `router.removeRoute()` æŒ‰åç§°åˆ é™¤è·¯ç”±ï¼š

```js
router.addRoute({ path: '/about', name: 'about', component: About })
// åˆ é™¤è·¯ç”±
router.removeRoute('about')
```



å½“è·¯ç”±è¢«åˆ é™¤æ—¶ï¼Œ**æ‰€æœ‰çš„åˆ«åå’Œå­è·¯ç”±ä¹Ÿä¼šè¢«åŒæ—¶åˆ é™¤**



è¦å°†åµŒå¥—è·¯ç”±æ·»åŠ åˆ°ç°æœ‰çš„è·¯ç”±ä¸­ï¼Œå¯ä»¥å°†è·¯ç”±çš„ *name* ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’ç»™ `router.addRoute()`ï¼Œè¿™å°†æœ‰æ•ˆåœ°æ·»åŠ è·¯ç”±ï¼Œå°±åƒé€šè¿‡ `children` æ·»åŠ çš„ä¸€æ ·ï¼š

```js
router.addRoute({ name: 'admin', path: '/admin', component: Admin })
router.addRoute('admin', { path: 'settings', component: AdminSettings })
```

ç›¸å½“äºï¼š

```js
router.addRoute({
  name: 'admin',
  path: '/admin',
  component: Admin,
  children: [{ path: 'settings', component: AdminSettings }],
})
```



Vue Router æä¾›äº†ä¸¤ä¸ªåŠŸèƒ½æ¥æŸ¥çœ‹ç°æœ‰çš„è·¯ç”±ï¼š

* `router.hasRoute()`ï¼šæ£€æŸ¥è·¯ç”±æ˜¯å¦å­˜åœ¨ã€‚
* `router.getRoutes()`ï¼šè·å–ä¸€ä¸ªåŒ…å«æ‰€æœ‰è·¯ç”±è®°å½•çš„æ•°ç»„ã€‚











åˆ›å»ºRouter2.vue

```vue
<script>

import {createRouter, createWebHashHistory} from 'vue-router'


//æ­¤æ•°æ®å¯ä»¥ä»åç«¯è·å–
const routes = [
  {
    id: 1,
    path: '/',
    component: "App"
  },
  {
    id: 2,
    path: '/app2',
    component: "App2"
  },
  {
    id: 3,
    path: '/app3',
    component: "App3"
  },
  {
    id: 4,
    path: '/app4',
    component: "App4"
  },
  {
    id: 5,
    path: '/app5',
    component: "App5"
  },
  {
    id: 6,
    path: '/app6',
    component: "App6"
  },
  {
    id: 7,
    path: '/app7',
    component: "App7"
  },
  {
    id: 8,
    path: '/app8',
    component: "App8"
  },
  {
    id: 9,
    path: '/app9',
    component: "App9"
  },
  {
    id: 10,
    path: '/app10',
    component: "App10"
  },
  {
    id: 11,
    path: '/app11',
    component: "App11"
  },
  {
    id: 12,
    path: '/app12',
    component: "App12"
  },
  {
    id: 13,
    path: '/app13',
    component: "App13"
  },
  {
    id: 14,
    path: '/app14',
    component: "App14"
  },
  {
    id: 15,
    path: '/app15',
    component: "App15"
  },
  {
    id: 16,
    path: '/app16',
    component: "App16"
  },
  {
    id: 17,
    path: '/app17',
    component: "App17"
  },
  {
    id: 18,
    path: '/app18',
    component: "App18"
  },
  {
    id: 19,
    path: '/app19',
    component: "App19"
  },
]

const router = createRouter({
  //å†…éƒ¨æä¾›äº† history æ¨¡å¼çš„å®ç°ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨ hash æ¨¡å¼ã€‚
  history: createWebHashHistory(),
  routes:[]
})


for (let i = 0; i < routes.length; i++)
{
  const r = routes[i];
  // åŠ¨æ€æ·»åŠ è·¯ç”±
  // å‚æ•°1ï¼šçˆ¶è·¯ç”±åç§°
  // å‚æ•°2ï¼šè·¯ç”±ä¿¡æ¯å¯¹è±¡
  router.addRoute("a", {
    path: r.path,
    name: r.id,
    //è®°ä½ç¬¦å·æ˜¯ ` è€Œä¸æ˜¯ ' æˆ–è€… "
    component: () => import(`@/${r.component}.vue`)
  })
  console.log("æ·»åŠ " + r.path)
}

export default router

</script>
```



ä¿®æ”¹main.js

```js
import { createApp } from 'vue'

import ElementPlus from 'element-plus'
import 'element-plus/dist/index.css'

import App from './App22.vue'
import Router2 from '@/router/Router2'

const app = createApp(App)

app.use(ElementPlus)
app.use(Router2)
app.mount('#app')
```



![image-20230620220035396](img/vueå­¦ä¹ ç¬”è®°/image-20230620220035396.png)







![image-20230620220216931](img/vueå­¦ä¹ ç¬”è®°/image-20230620220216931.png)





![image-20230620220236976](img/vueå­¦ä¹ ç¬”è®°/image-20230620220236976.png)









## æ•è·æ‰€æœ‰è·¯ç”±æˆ– 404 Not found è·¯ç”±

å¸¸è§„å‚æ•°åªåŒ¹é… url ç‰‡æ®µä¹‹é—´çš„å­—ç¬¦ï¼Œç”¨ `/` åˆ†éš”ã€‚å¦‚æœæˆ‘ä»¬æƒ³åŒ¹é…**ä»»æ„è·¯å¾„**ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰çš„ *è·¯å¾„å‚æ•°* æ­£åˆ™è¡¨è¾¾å¼ï¼Œåœ¨ *è·¯å¾„å‚æ•°* åé¢çš„æ‹¬å·ä¸­åŠ å…¥ æ­£åˆ™è¡¨è¾¾å¼ 



ç¼–å†™404.vue

```vue
<template>
  <p>404 not found</p>
</template>

<script>
export default {
  name: "404"
}
</script>

<style scoped>
p {
  font-size: 5em;
  color: red;
}
</style>
```





```vue
<script>

import {createRouter, createWebHashHistory} from 'vue-router'


//æ­¤æ•°æ®å¯ä»¥ä»åç«¯è·å–
const routes = [
  {
    id: 1,
    path: '/',
    component: "App"
  },
  {
    id: 2,
    path: '/app2',
    component: "App2"
  },
  {
    id: 3,
    path: '/app3',
    component: "App3"
  },
  {
    id: 4,
    path: '/app4',
    component: "App4"
  },
  {
    id: 5,
    path: '/app5',
    component: "App5"
  },
  {
    id: 6,
    path: '/app6',
    component: "App6"
  },
  {
    id: 7,
    path: '/app7',
    component: "App7"
  },
  {
    id: 8,
    path: '/app8',
    component: "App8"
  },
  {
    id: 9,
    path: '/app9',
    component: "App9"
  },
  {
    id: 10,
    path: '/app10',
    component: "App10"
  },
  {
    id: 11,
    path: '/app11',
    component: "App11"
  },
  {
    id: 12,
    path: '/app12',
    component: "App12"
  },
  {
    id: 13,
    path: '/app13',
    component: "App13"
  },
  {
    id: 14,
    path: '/app14',
    component: "App14"
  },
  {
    id: 15,
    path: '/app15',
    component: "App15"
  },
  {
    id: 16,
    path: '/app16',
    component: "App16"
  },
  {
    id: 17,
    path: '/app17',
    component: "App17"
  },
  {
    id: 18,
    path: '/app18',
    component: "App18"
  },
  {
    id: 19,
    path: '/app19',
    component: "App19"
  },
  {
    id: 999,
    path: '/:pathMatch(.*)*',
    component: "views/404"
  },
]

const router = createRouter({
  //å†…éƒ¨æä¾›äº† history æ¨¡å¼çš„å®ç°ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨ hash æ¨¡å¼ã€‚
  history: createWebHashHistory(),
  routes:[]
})


for (let i = 0; i < routes.length; i++)
{
  const r = routes[i];
  // åŠ¨æ€æ·»åŠ è·¯ç”±
  // å‚æ•°1ï¼šçˆ¶è·¯ç”±åç§°
  // å‚æ•°2ï¼šè·¯ç”±ä¿¡æ¯å¯¹è±¡
  router.addRoute("a", {
    path: r.path,
    name: r.id,
    //è®°ä½ç¬¦å·æ˜¯ ` è€Œä¸æ˜¯ ' æˆ–è€… "
    component: () => import(`@/${r.component}.vue`)
  })
  console.log("æ·»åŠ " + r.path)
}

export default router

</script>
```





![image-20230620221034846](img/vueå­¦ä¹ ç¬”è®°/image-20230620221034846.png)



![image-20230620221046373](img/vueå­¦ä¹ ç¬”è®°/image-20230620221046373.png)









## é‡ç½®è·¯ç”±

åœ¨ç”¨æˆ·æ³¨é”€æ—¶åº”å½“é‡ç½®è·¯ç”±



```vue
<script>

import {createRouter, createWebHashHistory} from 'vue-router'


//æ­¤æ•°æ®å¯ä»¥ä»åç«¯è·å–
const routes = [
  {
    id: 1,
    path: '/',
    component: "App"
  },
  {
    id: 2,
    path: '/app2',
    component: "App2"
  },
  {
    id: 3,
    path: '/app3',
    component: "App3"
  },
  {
    id: 4,
    path: '/app4',
    component: "App4"
  },
  {
    id: 5,
    path: '/app5',
    component: "App5"
  },
  {
    id: 6,
    path: '/app6',
    component: "App6"
  },
  {
    id: 7,
    path: '/app7',
    component: "App7"
  },
  {
    id: 8,
    path: '/app8',
    component: "App8"
  },
  {
    id: 9,
    path: '/app9',
    component: "App9"
  },
  {
    id: 10,
    path: '/app10',
    component: "App10"
  },
  {
    id: 11,
    path: '/app11',
    component: "App11"
  },
  {
    id: 12,
    path: '/app12',
    component: "App12"
  },
  {
    id: 13,
    path: '/app13',
    component: "App13"
  },
  {
    id: 14,
    path: '/app14',
    component: "App14"
  },
  {
    id: 15,
    path: '/app15',
    component: "App15"
  },
  {
    id: 16,
    path: '/app16',
    component: "App16"
  },
  {
    id: 17,
    path: '/app17',
    component: "App17"
  },
  {
    id: 18,
    path: '/app18',
    component: "App18"
  },
  {
    id: 19,
    path: '/app19',
    component: "App19"
  },
  {
    id: 999,
    path: '/:pathMatch(.*)*',
    component: "views/404"
  },
]

const router = createRouter({
  //å†…éƒ¨æä¾›äº† history æ¨¡å¼çš„å®ç°ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨ hash æ¨¡å¼ã€‚
  history: createWebHashHistory(),
  routes: []
})


for (let i = 0; i < routes.length; i++)
{
  const r = routes[i];
  // åŠ¨æ€æ·»åŠ è·¯ç”±
  // å‚æ•°1ï¼šçˆ¶è·¯ç”±åç§°
  // å‚æ•°2ï¼šè·¯ç”±ä¿¡æ¯å¯¹è±¡
  router.addRoute("a", {
    path: r.path,
    name: r.id,
    //è®°ä½ç¬¦å·æ˜¯ ` è€Œä¸æ˜¯ ' æˆ–è€… "
    component: () => import(`@/${r.component}.vue`)
  })
  console.log("æ·»åŠ " + r.path)
}

/**
 * é‡ç½®è·¯ç”±
 */
export function resetRouter()
{
  for (let i = 0; i < routes.length; i++)
  {
    const r = routes[i];
    if (r.id === 999)
    {
      break;
    }
    router.removeRoute(r.id);
  }
}

export default router

</script>
```





```vue
<template>

  <el-container>
    <el-aside width="200px">
      <div className="link">

        <br>
        <el-input type="text" size="large" autocomplete="false" v-model="to"/>
        <br>
        <el-button type="success" size="large" @click="go">ç‚¹å‡»è·³è½¬</el-button>
        <br>
        <el-button type="success" size="large" @click="resetRouter">ç‚¹å‡»é‡ç½®è·¯ç”±</el-button>

      </div>
    </el-aside>
    <el-container>
      <el-header>è·¯ç”±è·³è½¬</el-header>
      <el-main>
        <div className="all">
          <router-view className="r"></router-view>
        </div>
      </el-main>
    </el-container>
  </el-container>

</template>

<script>
import {resetRouter} from '@/router/Router2'

export default {
  name: "App23",
  data()
  {
    return {
      to: "/",
    }
  },
  methods:
      {
        go()
        {
          console.log("è·³è½¬åˆ°ï¼š" + this.to)
          this.$router.push(this.to);
        },
        resetRouter()
        {
          console.log("é‡ç½®è·¯ç”±")
          resetRouter();
        }
      }

}
</script>

<style scoped>
.all {
  padding: 20px;
  background: #b5e3f1;
}

.r {
  background: cornflowerblue;
}

.link {
  background: #42b983;
  height: 100vh;
}
</style>
```





![image-20230620223638223](img/vueå­¦ä¹ ç¬”è®°/image-20230620223638223.png)



ç‚¹å‡»é‡ç½®å

![image-20230620223655587](img/vueå­¦ä¹ ç¬”è®°/image-20230620223655587.png)



![image-20230620223704806](img/vueå­¦ä¹ ç¬”è®°/image-20230620223704806.png)











## é¡µé¢åˆ·æ–°é—®é¢˜

é¡µé¢åˆ·æ–°åï¼Œä¼šå¯¼è‡´åŠ¨æ€æ·»åŠ çš„è·¯ç”±å¤±æ•ˆï¼Œè§£å†³æ–¹æ³•æ˜¯å°†è·¯ç”±æ•°æ®å­˜å…¥ sessionStorage æˆ–è€… localStorage 



```vue
<script>

import {createRouter, createWebHashHistory} from 'vue-router'


//æ­¤æ•°æ®å¯ä»¥ä»åç«¯è·å–
let routes = [
  {
    id: 1,
    path: '/',
    component: "App"
  },
  {
    id: 2,
    path: '/app2',
    component: "App2"
  },
  {
    id: 3,
    path: '/app3',
    component: "App3"
  },
  {
    id: 4,
    path: '/app4',
    component: "App4"
  },
  {
    id: 5,
    path: '/app5',
    component: "App5"
  },
  {
    id: 6,
    path: '/app6',
    component: "App6"
  },
  {
    id: 7,
    path: '/app7',
    component: "App7"
  },
  {
    id: 8,
    path: '/app8',
    component: "App8"
  },
  {
    id: 9,
    path: '/app9',
    component: "App9"
  },
  {
    id: 10,
    path: '/app10',
    component: "App10"
  },
  {
    id: 11,
    path: '/app11',
    component: "App11"
  },
  {
    id: 12,
    path: '/app12',
    component: "App12"
  },
  {
    id: 13,
    path: '/app13',
    component: "App13"
  },
  {
    id: 14,
    path: '/app14',
    component: "App14"
  },
  {
    id: 15,
    path: '/app15',
    component: "App15"
  },
  {
    id: 16,
    path: '/app16',
    component: "App16"
  },
  {
    id: 17,
    path: '/app17',
    component: "App17"
  },
  {
    id: 18,
    path: '/app18',
    component: "App18"
  },
  {
    id: 19,
    path: '/app19',
    component: "App19"
  },
  {
    id: 999,
    path: '/:pathMatch(.*)*',
    component: "views/404"
  },
]

const router = createRouter({
  //å†…éƒ¨æä¾›äº† history æ¨¡å¼çš„å®ç°ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨ hash æ¨¡å¼ã€‚
  history: createWebHashHistory(),
  routes: []
})

/**
 * æ·»åŠ è·¯ç”±
 * @param array æ•°ç»„
 */
function addRoutes(array)
{
  for (let i = 0; i < array.length; i++)
  {
    const r = array[i];
    // åŠ¨æ€æ·»åŠ è·¯ç”±
    // å‚æ•°1ï¼šçˆ¶è·¯ç”±åç§°
    // å‚æ•°2ï¼šè·¯ç”±ä¿¡æ¯å¯¹è±¡
    router.addRoute("a", {
      path: r.path,
      name: r.id,
      //è®°ä½ç¬¦å·æ˜¯ ` è€Œä¸æ˜¯ ' æˆ–è€… "
      component: () => import(`@/${r.component}.vue`)
    })
    console.log("æ·»åŠ " + r.path)
    routes = array;
  }
}

addRoutes(routes);

/**
 * é‡ç½®è·¯ç”±
 */
export function resetRouter()
{
  for (let i = 0; i < routes.length; i++)
  {
    const r = routes[i];
    if (r.id === 999)
    {
      break;
    }
    router.removeRoute(r.id);
  }
}

/**
 * ä»SessionStorageé‡ŒåŠ è½½è·¯ç”±ä¿¡æ¯
 */
export function loadFromSessionStorage()
{
  console.log('ä»SessionStorageé‡ŒåŠ è½½è·¯ç”±ä¿¡æ¯')
  console.log(router.getRoutes().length)

  const result = JSON.parse(sessionStorage.getItem("router"))
  console.log(result)
  addRoutes(result);
}

/**
 * ä¿å­˜è·¯ç”±ä¿¡æ¯åˆ°SessionStorage
 */
export function saveToSessionStorage()
{
  console.log("ä¿å­˜è·¯ç”±åˆ°SessionStorage")
  sessionStorage.setItem("router", JSON.stringify(routes))
}

export default router

</script>
```





```vue
<template>

  <el-container>
    <el-aside width="200px">
      <div className="link">

        <br>
        <el-input type="text" size="large" autocomplete="false" v-model="to"/>
        <br>
        <el-button type="success" size="large" @click="go">ç‚¹å‡»è·³è½¬</el-button>
        <br>
        <el-button type="success" size="large" @click="resetRouter">ç‚¹å‡»é‡ç½®è·¯ç”±</el-button>
        <br>
        <el-button type="success" size="large" @click="saveToSessionStorage">ä¿å­˜è·¯ç”±ä¿¡æ¯</el-button>
        <br>
        <el-button type="success" size="large" @click="loadFromSessionStorage">åŠ è½½è·¯ç”±ä¿¡æ¯</el-button>

      </div>
    </el-aside>
    <el-container>
      <el-header>è·¯ç”±è·³è½¬</el-header>
      <el-main>
        <div className="all">
          <router-view className="r"></router-view>
        </div>
      </el-main>
    </el-container>
  </el-container>

</template>

<script>
import {resetRouter, loadFromSessionStorage, saveToSessionStorage} from '@/router/Router2'

export default {
  name: "App24",
  data()
  {
    return {
      to: "/",
    }
  },
  methods:
      {
        go()
        {
          console.log("è·³è½¬åˆ°ï¼š" + this.to)
          this.$router.push(this.to);
        },
        resetRouter()
        {
          console.log("é‡ç½®è·¯ç”±")
          resetRouter();
        },
        loadFromSessionStorage()
        {
          loadFromSessionStorage();
        },
        saveToSessionStorage()
        {
          saveToSessionStorage();
        }
      }

}
</script>

<style scoped>
.all {
  padding: 20px;
  background: #b5e3f1;
}

.r {
  background: cornflowerblue;
}

.link {
  background: #42b983;
  height: 100vh;
}
</style>
```



![image-20230620231619462](img/vueå­¦ä¹ ç¬”è®°/image-20230620231619462.png)









## åµŒå¥—è·¯ç”±

ä¸€äº›åº”ç”¨ç¨‹åºçš„ UI ç”±å¤šå±‚åµŒå¥—çš„ç»„ä»¶ç»„æˆã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒURL çš„ç‰‡æ®µé€šå¸¸å¯¹åº”äºç‰¹å®šçš„åµŒå¥—ç»„ä»¶ç»“æ„ï¼Œä¾‹å¦‚ï¼š

```sh
/user/johnny/profile                     /user/johnny/posts
+------------------+                  +-----------------+
| User             |                  | User            |
| +--------------+ |                  | +-------------+ |
| | Profile      | |  +------------>  | | Posts       | |
| |              | |                  | |             | |
| +--------------+ |                  | +-------------+ |
+------------------+                  +-----------------+
```



Router3.vue

```vue
<script>

import {createRouter, createWebHashHistory} from 'vue-router'
import App from '@/App'
import App2 from '@/App2'
import App3 from '@/App3'
import App4 from '@/App4'
import App5 from '@/App5'
import App6 from '@/App6'
import App7 from '@/App7'
import App8 from '@/App8'
import App9 from '@/App9'
import App10 from '@/App10'
import App11 from '@/App11'
import App12 from '@/App12'
import App13 from '@/App13'
import App15 from '@/App15'
import App14 from '@/App14'
import App16 from '@/App16'
import App17 from '@/App17'
import App18 from '@/App18'
import App19 from '@/App19'
import C1 from '@/views/C1'
import C2 from '@/views/C2'
import NotFound from '@/views/404.vue'


const routes = [
  {
    path: '/',
    component: App
  },
  {
    path: "/c1",
    component: C1,
    children:
        [
          {
            path: '/c1/app2',
            component: App2
          },
          {
            path: '/c1/app3',
            component: App3
          },
          {
            path: '/c1/app4',
            component: App4
          },
          {
            path: '/c1/app5',
            component: App5
          },
          {
            path: '/c1/app6',
            component: App6
          },
          {
            path: '/c1/app7',
            component: App7
          },
          {
            path: '/c1/app8',
            component: App8
          },
          {
            path: '/c1/app9',
            component: App9
          },
          {
            path: '/c1/app10',
            component: App10
          },
          {
            path: '/c1/app11',
            component: App11
          },
        ]
  },
  {
    path: "/c2",
    component: C2,
    children:
        [
          {
            path: '/c2/app9',
            component: App9
          },
          {
            path: '/c2/app10',
            component: App10
          },
          {
            path: '/c2/app11',
            component: App11
          },
          {
            path: '/c2/app12',
            component: App12
          },
          {
            path: '/c2/app13',
            component: App13
          },
          {
            path: '/c2/app14',
            component: App14
          },
          {
            path: '/c2/app15',
            component: App15
          },
          {
            path: '/c2/app16',
            component: App16
          },
          {
            path: '/c2/app17',
            component: App17
          },
          {
            path: '/c2/app18',
            component: App18
          },
          {
            path: '/c2/app19',
            component: App19
          },
        ]
  },
  {
    path: '/:pathMatch(.*)*',
    component: NotFound
  }
]

const router = createRouter({
  //å†…éƒ¨æä¾›äº† history æ¨¡å¼çš„å®ç°ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨ hash æ¨¡å¼ã€‚
  history: createWebHashHistory(),
  routes, // `routes: routes` çš„ç¼©å†™
})

export default router

</script>
```



* è¦å°†ç»„ä»¶æ¸²æŸ“åˆ°è¿™ä¸ªåµŒå¥—çš„ `router-view` ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åœ¨è·¯ç”±ä¸­é…ç½® `children`
* ä»¥ / å¼€å¤´çš„åµŒå¥—è·¯å¾„å°†è¢«è§†ä¸ºæ ¹è·¯å¾„ã€‚è¿™å…è®¸ä½ åˆ©ç”¨ç»„ä»¶åµŒå¥—ï¼Œè€Œä¸å¿…ä½¿ç”¨åµŒå¥—çš„ URL





C1.vue

```vue
<template>

  <el-container>
    <el-container>
      <el-header>åµŒå¥—è·¯ç”±-c1</el-header>
      <el-main>
        <div className="all">
          <router-view className="r"></router-view>
        </div>
      </el-main>
    </el-container>
  </el-container>

</template>

<script>
export default {
  name: "App22",
  data()
  {
    return {
      to: "/",
    }
  },
  methods:
      {
        go()
        {
          console.log("è·³è½¬åˆ°ï¼š" + this.to)
          this.$router.push(this.to);
        }
      }

}
</script>

<style scoped>
.all {
  padding: 20px;
  background: #b5e3f1;
}

.r {
  background: cornflowerblue;
}

.link {
  background: #42b983;
  height: 100vh;
}
</style>
```



C2.vue

```vue
<template>

  <el-container>
    <el-container>
      <el-header>åµŒå¥—è·¯ç”±-c2</el-header>
      <el-main>
        <div className="all">
          <router-view className="r"></router-view>
        </div>
      </el-main>
    </el-container>
  </el-container>

</template>

<script>
export default {
  name: "App22",
  data()
  {
    return {
      to: "/",
    }
  },
  methods:
      {
        go()
        {
          console.log("è·³è½¬åˆ°ï¼š" + this.to)
          this.$router.push(this.to);
        }
      }

}
</script>

<style scoped>
.all {
  padding: 20px;
  background: #b5e3f1;
}

.r {
  background: cornflowerblue;
}

.link {
  background: #42b983;
  height: 100vh;
}
</style>
```





```vue
<template>

  <el-container>
    <el-aside width="200px">
      <div className="link">

        <br>
        <el-input type="text" size="large" autocomplete="false" v-model="to"/>
        <br>
        <el-button type="success" size="large" @click="go">ç‚¹å‡»è·³è½¬</el-button>

      </div>
    </el-aside>
    <el-container>
      <el-header>è·¯ç”±è·³è½¬</el-header>
      <el-main>
        <div className="all">
          <router-view className="r"></router-view>
        </div>
      </el-main>
    </el-container>
  </el-container>

</template>

<script>
export default {
  name: "App25",
  data()
  {
    return {
      to: "/",
    }
  },
  methods:
      {
        go()
        {
          console.log("è·³è½¬åˆ°ï¼š" + this.to)
          this.$router.push(this.to);
        }
      }

}
</script>

<style scoped>
.all {
  padding: 20px;
  background: #b5e3f1;
}

.r {
  background: coral;
}

.link {
  background: #42b983;
  height: 100vh;
}
</style>
```





main.js

![image-20230620234637153](img/vueå­¦ä¹ ç¬”è®°/image-20230620234637153.png)



```js
import { createApp } from 'vue'

import ElementPlus from 'element-plus'
import 'element-plus/dist/index.css'

import App from './App25.vue'
import Router2 from '@/router/Router3'

const app = createApp(App)

app.use(ElementPlus)
app.use(Router2)
app.mount('#app')
```





æµ‹è¯•

![image-20230620234718591](img/vueå­¦ä¹ ç¬”è®°/image-20230620234718591.png)



![image-20230620234746086](img/vueå­¦ä¹ ç¬”è®°/image-20230620234746086.png)



![image-20230620234800512](img/vueå­¦ä¹ ç¬”è®°/image-20230620234800512.png)



![image-20230620234839814](img/vueå­¦ä¹ ç¬”è®°/image-20230620234839814.png)





![image-20230620234851223](img/vueå­¦ä¹ ç¬”è®°/image-20230620234851223.png)





![image-20230620234906161](img/vueå­¦ä¹ ç¬”è®°/image-20230620234906161.png)





![image-20230620234930632](img/vueå­¦ä¹ ç¬”è®°/image-20230620234930632.png)



![image-20230620234941098](img/vueå­¦ä¹ ç¬”è®°/image-20230620234941098.png)











## ç¼–ç¨‹å¼å¯¼èˆª

### push

åœ¨ Vue å®ä¾‹ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡ $router è®¿é—®è·¯ç”±å®ä¾‹ã€‚å› æ­¤ä½ å¯ä»¥è°ƒç”¨ `this.$router.push`

æƒ³è¦å¯¼èˆªåˆ°ä¸åŒçš„ URLï¼Œå¯ä»¥ä½¿ç”¨ router.push æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•ä¼šå‘ history æ ˆæ·»åŠ ä¸€ä¸ªæ–°çš„è®°å½•ï¼Œæ‰€ä»¥ï¼Œå½“ç”¨æˆ·ç‚¹å‡»æµè§ˆå™¨åé€€æŒ‰é’®æ—¶ï¼Œä¼šå›åˆ°ä¹‹å‰çš„ URLã€‚

å½“ä½ ç‚¹å‡» \<router-link> æ—¶ï¼Œå†…éƒ¨ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œæ‰€ä»¥ç‚¹å‡» \<router-link :to="..."> ç›¸å½“äºè°ƒç”¨ router.push(...)



è¯¥æ–¹æ³•çš„å‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²è·¯å¾„ï¼Œæˆ–è€…ä¸€ä¸ªæè¿°åœ°å€çš„å¯¹è±¡ï¼š

```js
// å­—ç¬¦ä¸²è·¯å¾„
router.push('/users/eduardo')

// å¸¦æœ‰è·¯å¾„çš„å¯¹è±¡
router.push({ path: '/users/eduardo' })

// å‘½åçš„è·¯ç”±ï¼Œå¹¶åŠ ä¸Šå‚æ•°ï¼Œè®©è·¯ç”±å»ºç«‹ url
router.push({ name: 'user', params: { username: 'eduardo' } })

// å¸¦æŸ¥è¯¢å‚æ•°ï¼Œç»“æœæ˜¯ /register?plan=private
router.push({ path: '/register', query: { plan: 'private' } })

// å¸¦ hashï¼Œç»“æœæ˜¯ /about#team
router.push({ path: '/about', hash: '#team' })
```



å¦‚æœæä¾›äº† pathï¼Œparams ä¼šè¢«å¿½ç•¥

```js
const username = 'eduardo'
// æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨å»ºç«‹ urlï¼Œä½†æˆ‘ä»¬å¿…é¡»è‡ªå·±å¤„ç†ç¼–ç 
router.push(`/user/${username}`) // -> /user/eduardo
// åŒæ ·
router.push({ path: `/user/${username}` }) // -> /user/eduardo
// 
router.push({ name: 'user', params: { username } }) // -> /user/eduardo
// `params` ä¸èƒ½ä¸ `path` ä¸€èµ·ä½¿ç”¨
router.push({ path: '/user', params: { username } }) // -> /user
```





### æ›¿æ¢å½“å‰ä½ç½®

å®ƒçš„ä½œç”¨ç±»ä¼¼äº `router.push`ï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯ï¼Œå®ƒåœ¨å¯¼èˆªæ—¶ä¸ä¼šå‘ history æ·»åŠ æ–°è®°å½•



|              å£°æ˜å¼               |        ç¼–ç¨‹å¼         |
| :-------------------------------: | :-------------------: |
| `<router-link :to="..." replace>` | `router.replace(...)` |



ä¹Ÿå¯ä»¥ç›´æ¥åœ¨ä¼ é€’ç»™ router.push çš„ routeLocation ä¸­å¢åŠ ä¸€ä¸ªå±æ€§ replace: trueï¼š

```js
router.push({ path: '/home', replace: true })
// ç›¸å½“äº
router.replace({ path: '/home' })
```





### æ¨ªè·¨å†å²

è¯¥æ–¹æ³•é‡‡ç”¨ä¸€ä¸ªæ•´æ•°ä½œä¸ºå‚æ•°ï¼Œè¡¨ç¤ºåœ¨å†å²å †æ ˆä¸­å‰è¿›æˆ–åé€€å¤šå°‘æ­¥ï¼Œç±»ä¼¼äº `window.history.go(n)`



```js
// å‘å‰ç§»åŠ¨ä¸€æ¡è®°å½•ï¼Œä¸ router.forward() ç›¸åŒ
router.go(1)

// è¿”å›ä¸€æ¡è®°å½•ï¼Œä¸ router.back() ç›¸åŒ
router.go(-1)

// å‰è¿› 3 æ¡è®°å½•
router.go(3)

// å¦‚æœæ²¡æœ‰é‚£ä¹ˆå¤šè®°å½•ï¼Œé™é»˜å¤±è´¥
router.go(-100)
router.go(100)
```







## å‘½åè·¯ç”±

é™¤äº† `path` ä¹‹å¤–ï¼Œä½ è¿˜å¯ä»¥ä¸ºä»»ä½•è·¯ç”±æä¾› `name`ã€‚è¿™æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š

- æ²¡æœ‰ç¡¬ç¼–ç çš„ URL
- `params` çš„è‡ªåŠ¨ç¼–ç /è§£ç ã€‚
- é˜²æ­¢ä½ åœ¨ url ä¸­å‡ºç°æ‰“å­—é”™è¯¯ã€‚
- ç»•è¿‡è·¯å¾„æ’åº



è¦é“¾æ¥åˆ°ä¸€ä¸ªå‘½åçš„è·¯ç”±ï¼Œå¯ä»¥å‘ `router-link` ç»„ä»¶çš„ `to` å±æ€§ä¼ é€’ä¸€ä¸ªå¯¹è±¡ï¼š

```js
<router-link :to="{ name: 'user', params: { username: 'erina' }}">
  User
</router-link>
```







## å‘½åè§†å›¾

### æ¦‚è¿°

æœ‰æ—¶å€™æƒ³åŒæ—¶ (åŒçº§) å±•ç¤ºå¤šä¸ªè§†å›¾ï¼Œè€Œä¸æ˜¯åµŒå¥—å±•ç¤ºï¼Œä¾‹å¦‚åˆ›å»ºä¸€ä¸ªå¸ƒå±€ï¼Œæœ‰ `sidebar` (ä¾§å¯¼èˆª) å’Œ `main` (ä¸»å†…å®¹) ä¸¤ä¸ªè§†å›¾ï¼Œè¿™ä¸ªæ—¶å€™å‘½åè§†å›¾å°±æ´¾ä¸Šç”¨åœºäº†ã€‚ä½ å¯ä»¥åœ¨ç•Œé¢ä¸­æ‹¥æœ‰å¤šä¸ªå•ç‹¬å‘½åçš„è§†å›¾ï¼Œè€Œä¸æ˜¯åªæœ‰ä¸€ä¸ªå•ç‹¬çš„å‡ºå£ã€‚å¦‚æœ `router-view` æ²¡æœ‰è®¾ç½®åå­—ï¼Œé‚£ä¹ˆé»˜è®¤ä¸º `default`ã€‚





### ä½¿ç”¨

ç¤ºä¾‹ï¼š

```vue
<router-view class="view left-sidebar" name="LeftSidebar"></router-view>
<router-view class="view main-content"></router-view>
<router-view class="view right-sidebar" name="RightSidebar"></router-view>
```



ä¸€ä¸ªè§†å›¾ä½¿ç”¨ä¸€ä¸ªç»„ä»¶æ¸²æŸ“ï¼Œå› æ­¤å¯¹äºåŒä¸ªè·¯ç”±ï¼Œå¤šä¸ªè§†å›¾å°±éœ€è¦å¤šä¸ªç»„ä»¶ã€‚ç¡®ä¿æ­£ç¡®ä½¿ç”¨ `components`

```js
const router = createRouter({
  history: createWebHashHistory(),
  routes: [
    {
      path: '/',
      components: {
        default: Home,
        // LeftSidebar: LeftSidebar çš„ç¼©å†™
        LeftSidebar,
        // å®ƒä»¬ä¸ `<router-view>` ä¸Šçš„ `name` å±æ€§åŒ¹é…
        RightSidebar,
      },
    },
  ],
})
```







App26.vue

```vue
<template>

  <div class="div">
    <hr>
    <router-view class="r1" name="r1"></router-view>
    <hr>
    <router-view class="r2"></router-view>
    <hr>
    <router-view class="r3" name="r3"></router-view>
    <hr>
  </div>

</template>

<script>
export default {
  name: "App26"
}
</script>

<style scoped>
.div{
  background: #b5e3f1;
}
.r1{
  background: blueviolet;
}
.r2{
  background: #42b983;
}

.r3{
  background: darkorange;
}
</style>
```



Router4.vue

```vue
<script>

import {createRouter, createWebHashHistory} from 'vue-router'
import App from '@/App'
import App2 from '@/App2'
import App3 from '@/App3'
import App4 from '@/App4'
import App5 from '@/App5'
import App6 from '@/App6'
import App7 from '@/App7'
import App8 from '@/App8'
import App9 from '@/App9'
import App10 from '@/App10'
import App11 from '@/App11'
import App12 from '@/App12'
import App13 from '@/App13'
import App15 from '@/App15'
import App14 from '@/App14'
import App16 from '@/App16'
import App17 from '@/App17'
import App18 from '@/App18'
import App19 from '@/App19'
import NotFound from '@/views/404'


const routes = [
  {
    path: '/',
    components:
        {
          default: App,
          r1: App2,
          r2: App3,
          r3: App4,
        }
  },
  {
    path: '/app5',
    components:
        {
          default: App5,
          r1: App6,
          r2: App7,
          r3: App8,
        }
  },
  {
    path: '/app9',
    components:
        {
          default: App9,
          r1: App10,
          r2: App11,
          r3: App12,
        }
  },
  {
    path: '/app13',
    component: App13
  },
  {
    path: '/app14',
    component: App14
  },
  {
    path: '/app15',
    component: App15
  },
  {
    path: '/app16',
    component: App16
  },
  {
    path: '/app17',
    component: App17
  },
  {
    path: '/app18',
    component: App18
  },
  {
    path: '/app19',
    component: App19
  },
  {
    path: '/:pathMatch(.*)*',
    component: NotFound
  }
]

const router = createRouter({
  //å†…éƒ¨æä¾›äº† history æ¨¡å¼çš„å®ç°ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨ hash æ¨¡å¼ã€‚
  history: createWebHashHistory(),
  routes, // `routes: routes` çš„ç¼©å†™
})

export default router

</script>
```





æ›´æ”¹main.js

![image-20230621230658900](img/vueå­¦ä¹ ç¬”è®°/image-20230621230658900.png)



```js
import { createApp } from 'vue'

import ElementPlus from 'element-plus'
import 'element-plus/dist/index.css'

import App from './App26.vue'
import Router2 from '@/router/Router4'

const app = createApp(App)

app.use(ElementPlus)
app.use(Router2)
app.mount('#app')
```





![image-20230621230723610](img/vueå­¦ä¹ ç¬”è®°/image-20230621230723610.png)



![image-20230621230746644](img/vueå­¦ä¹ ç¬”è®°/image-20230621230746644.png)



![image-20230621230836428](img/vueå­¦ä¹ ç¬”è®°/image-20230621230836428.png)

![image-20230621230930756](img/vueå­¦ä¹ ç¬”è®°/image-20230621230930756.png)



![image-20230621231124104](img/vueå­¦ä¹ ç¬”è®°/image-20230621231124104.png)



![image-20230621231137279](img/vueå­¦ä¹ ç¬”è®°/image-20230621231137279.png)







### åµŒå¥—å‘½åè§†å›¾

æˆ‘ä»¬ä¹Ÿæœ‰å¯èƒ½ä½¿ç”¨å‘½åè§†å›¾åˆ›å»ºåµŒå¥—è§†å›¾çš„å¤æ‚å¸ƒå±€ã€‚è¿™æ—¶éœ€è¦ç”¨åˆ°çš„åµŒå¥— `router-view` ç»„ä»¶



```sh
/settings/emails                                       /settings/profile
+-----------------------------------+                  +------------------------------+
| UserSettings                      |                  | UserSettings                 |
| +-----+-------------------------+ |                  | +-----+--------------------+ |
| | Nav | UserEmailsSubscriptions | |  +------------>  | | Nav | UserProfile        | |
| |     +-------------------------+ |                  | |     +--------------------+ |
| |     |                         | |                  | |     | UserProfilePreview | |
| +-----+-------------------------+ |                  | +-----+--------------------+ |
+-----------------------------------+                  +------------------------------+
```





```html
<!-- UserSettings.vue -->
<div>
  <h1>User Settings</h1>
  <NavBar />
  <router-view />
  <router-view name="helper" />
</div>
```





```js
{
  path: '/settings',
  // ä½ ä¹Ÿå¯ä»¥åœ¨é¡¶çº§è·¯ç”±å°±é…ç½®å‘½åè§†å›¾
  component: UserSettings,
  children: [{
    path: 'emails',
    component: UserEmailsSubscriptions
  }, {
    path: 'profile',
    components: {
      default: UserProfile,
      helper: UserProfilePreview
    }
  }]
}
```







## é‡å®šå‘

é‡å®šå‘ä¹Ÿæ˜¯é€šè¿‡ routes é…ç½®æ¥å®Œæˆ



ä¸‹é¢ä¾‹å­æ˜¯ä» `/home` é‡å®šå‘åˆ° `/`ï¼š

```JS
const routes = [{ path: '/home', redirect: '/' }]
```



é‡å®šå‘çš„ç›®æ ‡ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå‘½åçš„è·¯ç”±ï¼š

```JS
const routes = [{ path: '/home', redirect: { name: 'homepage' } }]
```



ç”šè‡³æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼ŒåŠ¨æ€è¿”å›é‡å®šå‘ç›®æ ‡ï¼š

```JS
const routes = [
  {
    // /search/screens -> /search?q=screens
    path: '/search/:searchText',
    redirect: to => {
      // æ–¹æ³•æ¥æ”¶ç›®æ ‡è·¯ç”±ä½œä¸ºå‚æ•°
      // return é‡å®šå‘çš„å­—ç¬¦ä¸²è·¯å¾„/è·¯å¾„å¯¹è±¡
      return { path: '/search', query: { q: to.params.searchText } }
    },
  },
  {
    path: '/search',
    // ...
  },
]
```



ä¹Ÿå¯ä»¥é‡å®šå‘åˆ°ç›¸å¯¹ä½ç½®ï¼š

```js
const routes = [
  {
    // å°†æ€»æ˜¯æŠŠ/users/123/postsé‡å®šå‘åˆ°/users/123/profileã€‚
    path: '/users/:id/posts',
    redirect: to => {
      // è¯¥å‡½æ•°æ¥æ”¶ç›®æ ‡è·¯ç”±ä½œä¸ºå‚æ•°
      // ç›¸å¯¹ä½ç½®ä¸ä»¥`/`å¼€å¤´
      // æˆ– { path: 'profile'}
      return 'profile'
    },
  },
]
```





åœ¨å†™ redirect çš„æ—¶å€™ï¼Œå¯ä»¥çœç•¥ component é…ç½®ï¼Œå› ä¸ºå®ƒä»æ¥æ²¡æœ‰è¢«ç›´æ¥è®¿é—®è¿‡ï¼Œæ‰€ä»¥æ²¡æœ‰ç»„ä»¶è¦æ¸²æŸ“ã€‚å”¯ä¸€çš„ä¾‹å¤–æ˜¯åµŒå¥—è·¯ç”±ï¼šå¦‚æœä¸€ä¸ªè·¯ç”±è®°å½•æœ‰ children å’Œ redirect å±æ€§ï¼Œå®ƒä¹Ÿåº”è¯¥æœ‰ component å±æ€§ã€‚









å°†æ‰€æœ‰æ‰¾ä¸åˆ°çš„é¡µé¢å’Œ/app13é¡µé¢éƒ½é‡å®šå‘åˆ°404é¡µé¢ï¼š



Router5.vue

```vue
<script>

import {createRouter, createWebHashHistory} from 'vue-router'
import App from '@/App'
import App2 from '@/App2'
import App3 from '@/App3'
import App4 from '@/App4'
import App5 from '@/App5'
import App6 from '@/App6'
import App7 from '@/App7'
import App8 from '@/App8'
import App9 from '@/App9'
import App10 from '@/App10'
import App11 from '@/App11'
import App12 from '@/App12'
import App13 from '@/App13'
import App15 from '@/App15'
import App14 from '@/App14'
import App16 from '@/App16'
import App17 from '@/App17'
import App18 from '@/App18'
import App19 from '@/App19'
import NotFound from '@/views/404'


const routes = [
  {
    path: '/',
    components:
        {
          default: App,
          r1: App2,
          r2: App3,
          r3: App4,
        }
  },
  {
    path: '/app5',
    components:
        {
          default: App5,
          r1: App6,
          r2: App7,
          r3: App8,
        }
  },
  {
    path: '/app9',
    components:
        {
          default: App9,
          r1: App10,
          r2: App11,
          r3: App12,
        }
  },
  {
    path: '/app13',
    component: App13,
    redirect:"/404"
  },
  {
    path: '/app14',
    component: App14
  },
  {
    path: '/app15',
    component: App15
  },
  {
    path: '/app16',
    component: App16
  },
  {
    path: '/app17',
    component: App17
  },
  {
    path: '/app18',
    component: App18
  },
  {
    path: '/app19',
    component: App19
  },
  {
    path: '/404',
    component: NotFound
  },
  {
    path: '/:pathMatch(.*)*',
    redirect:"/404"
  }
]

const router = createRouter({
  //å†…éƒ¨æä¾›äº† history æ¨¡å¼çš„å®ç°ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨ hash æ¨¡å¼ã€‚
  history: createWebHashHistory(),
  routes, // `routes: routes` çš„ç¼©å†™
})

export default router

</script>
```



main.js

```js
import { createApp } from 'vue'

import ElementPlus from 'element-plus'
import 'element-plus/dist/index.css'

import App from './App26.vue'
import Router2 from '@/router/Router5'

const app = createApp(App)

app.use(ElementPlus)
app.use(Router2)
app.mount('#app')
```





![image-20230621234358594](img/vueå­¦ä¹ ç¬”è®°/image-20230621234358594.png)



![image-20230621234409071](img/vueå­¦ä¹ ç¬”è®°/image-20230621234409071.png)



![image-20230621234439838](img/vueå­¦ä¹ ç¬”è®°/image-20230621234439838.png)



![image-20230621234446185](img/vueå­¦ä¹ ç¬”è®°/image-20230621234446185.png)









## é‡å®šå‘åˆ«å

é‡å®šå‘æ˜¯æŒ‡å½“ç”¨æˆ·è®¿é—® `/home` æ—¶ï¼ŒURL ä¼šè¢« `/` æ›¿æ¢ï¼Œç„¶ååŒ¹é…æˆ `/`

**å°† `/` åˆ«åä¸º `/home`ï¼Œæ„å‘³ç€å½“ç”¨æˆ·è®¿é—® `/home` æ—¶ï¼ŒURL ä»ç„¶æ˜¯ `/home`ï¼Œä½†ä¼šè¢«åŒ¹é…ä¸ºç”¨æˆ·æ­£åœ¨è®¿é—® `/`**



ä¸Šé¢å¯¹åº”çš„è·¯ç”±é…ç½®ä¸ºï¼š

```js
const routes = [{ path: '/', component: Homepage, alias: '/home' }]
```



é€šè¿‡åˆ«åï¼Œä½ å¯ä»¥è‡ªç”±åœ°å°† UI ç»“æ„æ˜ å°„åˆ°ä¸€ä¸ªä»»æ„çš„ URLï¼Œè€Œä¸å—é…ç½®çš„åµŒå¥—ç»“æ„çš„é™åˆ¶ã€‚ä½¿åˆ«åä»¥ `/` å¼€å¤´ï¼Œä»¥ä½¿åµŒå¥—è·¯å¾„ä¸­çš„è·¯å¾„æˆä¸ºç»å¯¹è·¯å¾„ã€‚ä½ ç”šè‡³å¯ä»¥å°†ä¸¤è€…ç»“åˆèµ·æ¥ï¼Œç”¨ä¸€ä¸ªæ•°ç»„æä¾›å¤šä¸ªåˆ«å





å°† / ç›®å½•èµ·åˆ«å ['/aaa', '/bbb', '/ccc']ï¼Œå°† /app19 ç›®å½•èµ·åˆ«å table



Router6.vue

```vue
<script>

import {createRouter, createWebHashHistory} from 'vue-router'
import App from '@/App'
import App2 from '@/App2'
import App3 from '@/App3'
import App4 from '@/App4'
import App5 from '@/App5'
import App6 from '@/App6'
import App7 from '@/App7'
import App8 from '@/App8'
import App9 from '@/App9'
import App10 from '@/App10'
import App11 from '@/App11'
import App12 from '@/App12'
import App13 from '@/App13'
import App15 from '@/App15'
import App14 from '@/App14'
import App16 from '@/App16'
import App17 from '@/App17'
import App18 from '@/App18'
import App19 from '@/App19'
import NotFound from '@/views/404'


const routes = [
  {
    path: '/',
    components:
        {
          default: App,
          r1: App2,
          r2: App3,
          r3: App4,
        },
    alias: ['/aaa', '/bbb', '/ccc']
  },
  {
    path: '/app5',
    components:
        {
          default: App5,
          r1: App6,
          r2: App7,
          r3: App8,
        }
  },
  {
    path: '/app9',
    components:
        {
          default: App9,
          r1: App10,
          r2: App11,
          r3: App12,
        }
  },
  {
    path: '/app13',
    component: App13,
    redirect: "/404"
  },
  {
    path: '/app14',
    component: App14
  },
  {
    path: '/app15',
    component: App15
  },
  {
    path: '/app16',
    component: App16
  },
  {
    path: '/app17',
    component: App17
  },
  {
    path: '/app18',
    component: App18
  },
  {
    path: '/app19',
    component: App19,
    alias: '/table'
  },
  {
    path: '/404',
    component: NotFound
  },
  {
    path: '/:pathMatch(.*)*',
    redirect: "/404"
  }
]

const router = createRouter({
  //å†…éƒ¨æä¾›äº† history æ¨¡å¼çš„å®ç°ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨ hash æ¨¡å¼ã€‚
  history: createWebHashHistory(),
  routes, // `routes: routes` çš„ç¼©å†™
})

export default router

</script>
```



```js
import { createApp } from 'vue'

import ElementPlus from 'element-plus'
import 'element-plus/dist/index.css'

import App from './App26.vue'
import Router2 from '@/router/Router6'

const app = createApp(App)

app.use(ElementPlus)
app.use(Router2)
app.mount('#app')
```





![image-20230621235722863](img/vueå­¦ä¹ ç¬”è®°/image-20230621235722863.png)



![image-20230621235735100](img/vueå­¦ä¹ ç¬”è®°/image-20230621235735100.png)

![image-20230621235744808](img/vueå­¦ä¹ ç¬”è®°/image-20230621235744808.png)



![image-20230621235759731](img/vueå­¦ä¹ ç¬”è®°/image-20230621235759731.png)













## è·¯ç”±ç»„ä»¶ä¼ å‚

ç»„ä»¶ä¸­ä½¿ç”¨ `$route` ä¼šä¸è·¯ç”±ç´§å¯†è€¦åˆï¼Œè¿™é™åˆ¶äº†ç»„ä»¶çš„çµæ´»æ€§ï¼Œå› ä¸ºå®ƒåªèƒ½ç”¨äºç‰¹å®šçš„ URLã€‚è™½ç„¶è¿™ä¸ä¸€å®šæ˜¯ä»¶åäº‹ï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡ `props` é…ç½®æ¥è§£é™¤è¿™ç§è¡Œä¸º



æˆ‘ä»¬å¯ä»¥å°†ä¸‹é¢çš„ä»£ç 

```js
const User = {
  template: '<div>User {{ $route.params.id }}</div>'
}
const routes = [{ path: '/user/:id', component: User }]
```

æ›¿æ¢æˆ

```js
const User = {
  // è¯·ç¡®ä¿æ·»åŠ ä¸€ä¸ªä¸è·¯ç”±å‚æ•°å®Œå…¨ç›¸åŒçš„ prop å
  props: ['id'],
  template: '<div>User {{ id }}</div>'
}
const routes = [{ path: '/user/:id', component: User, props: true }]
```



å½“ `props` è®¾ç½®ä¸º `true` æ—¶ï¼Œ`route.params` å°†è¢«è®¾ç½®ä¸ºç»„ä»¶çš„ props



å¯¹äºæœ‰å‘½åè§†å›¾çš„è·¯ç”±ï¼Œä½ å¿…é¡»ä¸ºæ¯ä¸ªå‘½åè§†å›¾å®šä¹‰ `props` é…ç½®ï¼š

```js
const routes = [
  {
    path: '/user/:id',
    components: { default: User, sidebar: Sidebar },
    props: { default: true, sidebar: false }
  }
]
```



å½“ `props` æ˜¯ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå®ƒå°†åŸæ ·è®¾ç½®ä¸ºç»„ä»¶ props

```js
const routes = [
  {
    path: '/promotion/from-newsletter',
    component: Promotion,
    props: { newsletterPopup: false }
  }
]
```



ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªè¿”å› props çš„å‡½æ•°ã€‚è¿™å…è®¸ä½ å°†å‚æ•°è½¬æ¢ä¸ºå…¶ä»–ç±»å‹

```js
const routes = [
  {
    path: '/search',
    component: SearchUser,
    props: route => ({ query: route.query.q })
  }
]
```



URL `/search?q=vue` å°†ä¼ é€’ `{query: 'vue'}` ä½œä¸º props ä¼ ç»™ `SearchUser` ç»„ä»¶









## ä¸åŒçš„å†å²æ¨¡å¼

### æ¦‚è¿°

åœ¨åˆ›å»ºè·¯ç”±å™¨å®ä¾‹æ—¶ï¼Œ`history` é…ç½®å…è®¸æˆ‘ä»¬åœ¨ä¸åŒçš„å†å²æ¨¡å¼ä¸­è¿›è¡Œé€‰æ‹©



### Hash æ¨¡å¼

hash æ¨¡å¼æ˜¯ç”¨ `createWebHashHistory()` åˆ›å»ºçš„

```js
import { createRouter, createWebHashHistory } from 'vue-router'

const router = createRouter({
  history: createWebHashHistory(),
  routes: [
    //...
  ],
})
```



å®ƒåœ¨å†…éƒ¨ä¼ é€’çš„å®é™… URL ä¹‹å‰ä½¿ç”¨äº†ä¸€ä¸ªå“ˆå¸Œå­—ç¬¦ï¼ˆ`#`ï¼‰ã€‚ç”±äºè¿™éƒ¨åˆ† URL ä»æœªè¢«å‘é€åˆ°æœåŠ¡å™¨ï¼Œæ‰€ä»¥å®ƒä¸éœ€è¦åœ¨æœåŠ¡å™¨å±‚é¢ä¸Šè¿›è¡Œä»»ä½•ç‰¹æ®Šå¤„ç†ã€‚ä¸è¿‡ï¼Œ**å®ƒåœ¨ SEO ä¸­ç¡®å®æœ‰ä¸å¥½çš„å½±å“**ã€‚

vue-routeré»˜è®¤hashæ¨¡å¼,ä½¿ç”¨urlçš„å“ˆå¸Œ(hash)æ¥æ¨¡æ‹Ÿä¸€ä¸ªå®Œæ•´çš„URLï¼Œå½“URLæ”¹å˜æ—¶ï¼Œé¡µé¢ä¸ä¼šé‡æ–°åŠ è½½

`#`å·åé¢çš„å‚æ•°ä¸ä¼šä¼ é€ç»™æœåŠ¡å™¨ï¼Œå…¼å®¹æ€§å¥½ï¼Œä¸ä¼šä½œä¸ºè·¯å¾„çš„ä¸€éƒ¨åˆ†å‘é€ç»™æœåŠ¡å™¨ï¼Œä¹Ÿå°±æ˜¯å®ƒä¸ä¼šåŒ…æ‹¬åœ¨`HTTP`è¯·æ±‚ä½“ä¸­ï¼Œå¯¹åç«¯å®Œå…¨æ²¡æœ‰å½±å“

é¡µé¢åˆ·æ–°æ—¶ï¼Œä¼šåœç•™åœ¨å½“å‰é¡µé¢ï¼Œä¸ä¼šé‡æ–°åŠ è½½





### HTML5 æ¨¡å¼

ç”¨ `createWebHistory()` åˆ›å»º HTML5 æ¨¡å¼ï¼Œæ¨èä½¿ç”¨è¿™ä¸ªæ¨¡å¼ï¼š

```js
import { createRouter, createWebHistory } from 'vue-router'

const router = createRouter({
  history: createWebHistory(),
  routes: [
    //...
  ],
})
```



å½“ä½¿ç”¨è¿™ç§å†å²æ¨¡å¼æ—¶ï¼ŒURL ä¼šçœ‹èµ·æ¥å¾ˆ "æ­£å¸¸"ï¼Œä¾‹å¦‚ `https://example.com/user/id`

ä¸è¿‡ï¼Œé—®é¢˜æ¥äº†ã€‚ç”±äºæˆ‘ä»¬çš„åº”ç”¨æ˜¯ä¸€ä¸ªå•é¡µçš„å®¢æˆ·ç«¯åº”ç”¨ï¼Œå¦‚æœæ²¡æœ‰é€‚å½“çš„æœåŠ¡å™¨é…ç½®ï¼Œç”¨æˆ·åœ¨æµè§ˆå™¨ä¸­ç›´æ¥è®¿é—® `https://example.com/user/id`ï¼Œå°±ä¼šå¾—åˆ°ä¸€ä¸ª 404 é”™è¯¯ã€‚

è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½ éœ€è¦åšçš„å°±æ˜¯åœ¨ä½ çš„æœåŠ¡å™¨ä¸Šæ·»åŠ ä¸€ä¸ªç®€å•çš„å›é€€è·¯ç”±ã€‚å¦‚æœ URL ä¸åŒ¹é…ä»»ä½•é™æ€èµ„æºï¼Œå®ƒåº”æä¾›ä¸ä½ çš„åº”ç”¨ç¨‹åºä¸­çš„ `index.html` ç›¸åŒçš„é¡µé¢

åœ¨hashæ¨¡å¼ä¸‹,ä½¿ç”¨hashç¬¦å·ä¹‹å‰çš„å†…å®¹ä¼šè¢«åŒ…å«åœ¨è¯·æ±‚ä½“ä¸­,#å·åé¢çš„ä¸ä¼šå‘é€ç»™æœåŠ¡å™¨

è€Œ`history`æ¨¡å¼ä¸‹,å‰ç«¯çš„`URL`å¿…é¡»å’Œå®é™…å‘åç«¯å‘èµ·è¯·æ±‚çš„`URL`ä¿æŒä¸€è‡´

æ”¹å˜ URL ä¼šå¼•èµ·é¡µé¢åŠ è½½





Router7.vue

```vue
<script>

import {createRouter, createWebHistory} from 'vue-router'
import App from '@/App'
import App2 from '@/App2'
import App3 from '@/App3'
import App4 from '@/App4'
import App5 from '@/App5'
import App6 from '@/App6'
import App7 from '@/App7'
import App8 from '@/App8'
import App9 from '@/App9'
import App10 from '@/App10'
import App11 from '@/App11'
import App12 from '@/App12'
import App13 from '@/App13'
import App15 from '@/App15'
import App14 from '@/App14'
import App16 from '@/App16'
import App17 from '@/App17'
import App18 from '@/App18'
import App19 from '@/App19'
import NotFound from '@/views/404'


const routes = [
  {
    path: '/',
    components:
        {
          default: App,
          r1: App2,
          r2: App3,
          r3: App4,
        },
    alias: ['/aaa', '/bbb', '/ccc']
  },
  {
    path: '/app5',
    components:
        {
          default: App5,
          r1: App6,
          r2: App7,
          r3: App8,
        }
  },
  {
    path: '/app9',
    components:
        {
          default: App9,
          r1: App10,
          r2: App11,
          r3: App12,
        }
  },
  {
    path: '/app13',
    component: App13,
    redirect: "/404"
  },
  {
    path: '/app14',
    component: App14
  },
  {
    path: '/app15',
    component: App15
  },
  {
    path: '/app16',
    component: App16
  },
  {
    path: '/app17',
    component: App17
  },
  {
    path: '/app18',
    component: App18
  },
  {
    path: '/app19',
    component: App19,
    alias: '/table'
  },
  {
    path: '/404',
    component: NotFound
  },
  {
    path: '/:pathMatch(.*)*',
    redirect: "/404"
  }
]

const router = createRouter({
  //createWebHistory
  history: createWebHistory(),
  routes, // `routes: routes` çš„ç¼©å†™
})

export default router

</script>
```



main.js

```js
import { createApp } from 'vue'

import ElementPlus from 'element-plus'
import 'element-plus/dist/index.css'

import App from './App26.vue'
import Router2 from '@/router/Router7'

const app = createApp(App)

app.use(ElementPlus)
app.use(Router2)
app.mount('#app')
```





![image-20230622010253113](img/vueå­¦ä¹ ç¬”è®°/image-20230622010253113.png)









## å¯¼èˆªå®ˆå«

### æ¦‚è¿°

æ­£å¦‚å…¶åï¼Œvue-router æä¾›çš„å¯¼èˆªå®ˆå«ä¸»è¦ç”¨æ¥é€šè¿‡è·³è½¬æˆ–å–æ¶ˆçš„æ–¹å¼å®ˆå«å¯¼èˆªã€‚è¿™é‡Œæœ‰å¾ˆå¤šæ–¹å¼æ¤å…¥è·¯ç”±å¯¼èˆªä¸­ï¼šå…¨å±€çš„ï¼Œå•ä¸ªè·¯ç”±ç‹¬äº«çš„ï¼Œæˆ–è€…ç»„ä»¶çº§çš„ã€‚

å½“Routerï¼ˆè·¯ç”±ï¼‰ä¹‹é—´å‘ç”Ÿè·³è½¬æ—¶ï¼Œä¼šè§¦å‘å¯¼èˆªå®ˆå«ã€‚ï¼ˆurlå‘ç”Ÿæ”¹å˜æ—¶å°±ä¼šè§¦å‘å¯¼èˆªå®ˆå«ï¼‰

å¯ä»¥çœ‹æˆè·¯ç”±çš„é’©å­å‡½æ•°ï¼ˆç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼‰ï¼Œç›¸å½“äºåç«¯springçš„æ‹¦æˆªå™¨





### å…¨å±€å‰ç½®å®ˆå«

å¯ä»¥ä½¿ç”¨ `router.beforeEach` æ³¨å†Œä¸€ä¸ªå…¨å±€å‰ç½®å®ˆå«ï¼š

```js
const router = createRouter({ ... })

router.beforeEach((to, from) => {
  // ...
  // è¿”å› false ä»¥å–æ¶ˆå¯¼èˆª
  return false
})
```



å½“ä¸€ä¸ªå¯¼èˆªè§¦å‘æ—¶ï¼Œå…¨å±€å‰ç½®å®ˆå«æŒ‰ç…§åˆ›å»ºé¡ºåºè°ƒç”¨ã€‚å®ˆå«æ˜¯å¼‚æ­¥è§£ææ‰§è¡Œï¼Œæ­¤æ—¶å¯¼èˆªåœ¨æ‰€æœ‰å®ˆå« resolve å®Œä¹‹å‰ä¸€ç›´å¤„äº**ç­‰å¾…ä¸­**ã€‚



æ¯ä¸ªå®ˆå«æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š

* å³å°†è¦è¿›å…¥çš„è·¯ç”±å¯¹è±¡
* è¦ç¦»å¼€çš„è·¯ç”±å¯¹è±¡



å¯ä»¥è¿”å›çš„å€¼å¦‚ä¸‹ï¼š

* `false`: å–æ¶ˆå½“å‰çš„å¯¼èˆªã€‚å¦‚æœæµè§ˆå™¨çš„ URL æ”¹å˜äº†(å¯èƒ½æ˜¯ç”¨æˆ·æ‰‹åŠ¨æˆ–è€…æµè§ˆå™¨åé€€æŒ‰é’®)ï¼Œé‚£ä¹ˆ URL åœ°å€ä¼šé‡ç½®åˆ° `from` è·¯ç”±å¯¹åº”çš„åœ°å€ã€‚
* ä¸€ä¸ªè·¯ç”±åœ°å€: é€šè¿‡ä¸€ä¸ªè·¯ç”±åœ°å€è·³è½¬åˆ°ä¸€ä¸ªä¸åŒçš„åœ°å€ï¼Œå°±åƒä½ è°ƒç”¨ router.push() ä¸€æ ·ï¼Œä½ å¯ä»¥è®¾ç½®è¯¸å¦‚ replace: true æˆ– name: 'home' ä¹‹ç±»çš„é…ç½®ã€‚å½“å‰çš„å¯¼èˆªè¢«ä¸­æ–­ï¼Œç„¶åè¿›è¡Œä¸€ä¸ªæ–°çš„å¯¼èˆªï¼Œå°±å’Œ from ä¸€æ ·



å¦‚æœé‡åˆ°äº†æ„æ–™ä¹‹å¤–çš„æƒ…å†µï¼Œå¯èƒ½ä¼šæŠ›å‡ºä¸€ä¸ª Errorã€‚è¿™ä¼šå–æ¶ˆå¯¼èˆªå¹¶ä¸”è°ƒç”¨ router.onError() æ³¨å†Œè¿‡çš„å›è°ƒã€‚

å¦‚æœä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œ`undefined` æˆ–è¿”å› `true`ï¼Œ**åˆ™å¯¼èˆªæ˜¯æœ‰æ•ˆçš„**ï¼Œå¹¶è°ƒç”¨ä¸‹ä¸€ä¸ªå¯¼èˆªå®ˆå«





ç¼–å†™Router8.vueï¼Œè°ƒè½¬çš„æ—¶å€™ï¼Œæœ‰0.5çš„æ¦‚ç‡è°ƒè½¬å¤±è´¥ï¼Œ0.5çš„æ¦‚ç‡è·³è½¬æˆåŠŸï¼Œè¿™0.5æ¦‚ç‡çš„æˆåŠŸç‡ä¸­ï¼Œæœ‰0.5çš„æ¦‚ç‡è·³è½¬åˆ°/app9é¡µé¢ï¼š

```vue
<script>

import {createRouter, createWebHashHistory} from 'vue-router'
import App from '@/App'
import App2 from '@/App2'
import App3 from '@/App3'
import App4 from '@/App4'
import App5 from '@/App5'
import App6 from '@/App6'
import App7 from '@/App7'
import App8 from '@/App8'
import App9 from '@/App9'
import App10 from '@/App10'
import App11 from '@/App11'
import App12 from '@/App12'
import App13 from '@/App13'
import App15 from '@/App15'
import App14 from '@/App14'
import App16 from '@/App16'
import App17 from '@/App17'
import App18 from '@/App18'
import App19 from '@/App19'
import NotFound from '@/views/404'


const routes = [
  {
    path: '/',
    components:
        {
          default: App,
          r1: App2,
          r2: App3,
          r3: App4,
        },
    alias: ['/aaa', '/bbb', '/ccc']
  },
  {
    path: '/app5',
    components:
        {
          default: App5,
          r1: App6,
          r2: App7,
          r3: App8,
        }
  },
  {
    path: '/app9',
    components:
        {
          default: App9,
          r1: App10,
          r2: App11,
          r3: App12,
        }
  },
  {
    path: '/app13',
    component: App13,
    redirect: "/404"
  },
  {
    path: '/app14',
    component: App14
  },
  {
    path: '/app15',
    component: App15
  },
  {
    path: '/app16',
    component: App16
  },
  {
    path: '/app17',
    component: App17
  },
  {
    path: '/app18',
    component: App18
  },
  {
    path: '/app19',
    component: App19,
    alias: '/table'
  },
  {
    path: '/404',
    component: NotFound
  },
  {
    path: '/:pathMatch(.*)*',
    redirect: "/404"
  }
]

const router = createRouter({
  //å†…éƒ¨æä¾›äº† history æ¨¡å¼çš„å®ç°ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨ hash æ¨¡å¼ã€‚
  history: createWebHashHistory(),
  routes, // `routes: routes` çš„ç¼©å†™
})

router.beforeEach((to, from) =>
{
  console.log("ä»" + from.path + "åˆ°" + to.path)
  if (to.path === "/404")
  {
    return true;
  }
  //0.5çš„æ¦‚ç‡æ”¾è¡Œ
  if (Math.random() > 0.5)
  {
    console.log("æ”¾è¡Œ")
    return true
  }
  console.log("ä¸æ”¾è¡Œ")
  return false
})

router.beforeEach((to, from) =>
{
  console.log("ç¬¬äºŒä¸ªå…¨å±€å‰ç½®å®ˆå«")
  if (to.path === "/404")
  {
    return true;
  }
  if (Math.random() > 0.5)
  {
    console.log("æ”¾è¡Œ")
    return true
  }
  else
  {
    console.log("è½¬/app9")
    return {path: '/app9'}
  }
})

export default router

</script>
```



![image-20230622132351050](img/vueå­¦ä¹ ç¬”è®°/image-20230622132351050.png)

![image-20230622132358120](img/vueå­¦ä¹ ç¬”è®°/image-20230622132358120.png)





![image-20230622132452410](img/vueå­¦ä¹ ç¬”è®°/image-20230622132452410.png)







åœ¨ä¹‹å‰çš„ Vue Router ç‰ˆæœ¬ä¸­ï¼Œä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨ ç¬¬ä¸‰ä¸ªå‚æ•° next çš„ã€‚è¿™æ˜¯ä¸€ä¸ªå¸¸è§çš„é”™è¯¯æ¥æºï¼Œå¯ä»¥é€šè¿‡ RFC æ¥æ¶ˆé™¤é”™è¯¯ã€‚

**`next` å‡½æ•°åœ¨ä»»ä½•ç»™å®šçš„å¯¼èˆªå®ˆå«ä¸­éƒ½è¢«ä¸¥æ ¼è°ƒç”¨ä¸€æ¬¡ã€‚å®ƒå¯ä»¥å‡ºç°å¤šäºä¸€æ¬¡ï¼Œ**ä½†æ˜¯åªèƒ½åœ¨æ‰€æœ‰çš„é€»è¾‘è·¯å¾„éƒ½ä¸é‡å çš„æƒ…å†µä¸‹**ï¼Œå¦åˆ™é’©å­æ°¸è¿œéƒ½ä¸ä¼šè¢«è§£ææˆ–æŠ¥é”™**ï¼ˆç™½è¯ç†è§£ï¼šç»™å®šçš„å¯¼èˆªå®ˆå«ä¸€**æ¬¡åªèƒ½æœ‰ä¸€ä¸ªnextè¢«è¿è¡Œ**ï¼‰



é”™è¯¯çš„ç¤ºä¾‹ï¼š

```js
// BAD
router.beforeEach((to, from, next) => {
  if (to.name !== 'Login' && !isAuthenticated) next({ name: 'Login' })
  // å¦‚æœç”¨æˆ·æœªèƒ½éªŒè¯èº«ä»½ï¼Œåˆ™ `next` ä¼šè¢«è°ƒç”¨ä¸¤æ¬¡
  next()
})
```



æ­£ç¡®çš„ç¤ºä¾‹ï¼š

```js
// GOOD
router.beforeEach((to, from, next) => {
  if (to.name !== 'Login' && !isAuthenticated) next({ name: 'Login' })
  else next()
})
```







### å…¨å±€è§£æå®ˆå«

ä½ å¯ä»¥ç”¨ `router.beforeResolve` æ³¨å†Œä¸€ä¸ªå…¨å±€å®ˆå«ã€‚è¿™å’Œ `router.beforeEach` ç±»ä¼¼ï¼Œå› ä¸ºå®ƒåœ¨**æ¯æ¬¡å¯¼èˆª**æ—¶éƒ½ä¼šè§¦å‘ï¼Œä¸åŒçš„æ˜¯ï¼Œè§£æå®ˆå«åˆšå¥½ä¼šåœ¨å¯¼èˆªè¢«ç¡®è®¤ä¹‹å‰ã€**æ‰€æœ‰ç»„ä»¶å†…å®ˆå«å’Œå¼‚æ­¥è·¯ç”±ç»„ä»¶è¢«è§£æä¹‹å**è°ƒç”¨ã€‚



`router.beforeResolve` æ˜¯è·å–æ•°æ®æˆ–æ‰§è¡Œä»»ä½•å…¶ä»–æ“ä½œï¼ˆå¦‚æœç”¨æˆ·æ— æ³•è¿›å…¥é¡µé¢æ—¶ä½ å¸Œæœ›é¿å…æ‰§è¡Œçš„æ“ä½œï¼‰çš„ç†æƒ³ä½ç½®ã€‚



```js
router.beforeResolve(async to => {
  if (to.meta.requiresCamera) {
    try {
      await askForCameraPermission()
    } catch (error) {
      if (error instanceof NotAllowedError) {
        // ... å¤„ç†é”™è¯¯ï¼Œç„¶åå–æ¶ˆå¯¼èˆª
        return false
      } else {
        // æ„æ–™ä¹‹å¤–çš„é”™è¯¯ï¼Œå–æ¶ˆå¯¼èˆªå¹¶æŠŠé”™è¯¯ä¼ ç»™å…¨å±€å¤„ç†å™¨
        throw error
      }
    }
  }
})
```





### å…¨å±€åç½®é’©å­

ä½ ä¹Ÿå¯ä»¥æ³¨å†Œå…¨å±€åç½®é’©å­ï¼Œç„¶è€Œå’Œå®ˆå«ä¸åŒçš„æ˜¯ï¼Œè¿™äº›é’©å­ä¸ä¼šæ¥å— `next` å‡½æ•°ä¹Ÿä¸ä¼šæ”¹å˜å¯¼èˆªæœ¬èº«ï¼š

å®ƒä»¬å¯¹äºåˆ†æã€æ›´æ”¹é¡µé¢æ ‡é¢˜ã€å£°æ˜é¡µé¢ç­‰è¾…åŠ©åŠŸèƒ½ä»¥åŠè®¸å¤šå…¶ä»–äº‹æƒ…éƒ½å¾ˆæœ‰ç”¨ã€‚

```js
router.afterEach((to, from) => {
  sendToAnalytics(to.fullPath)
})
```



```vue
<script>

import {createRouter, createWebHashHistory} from 'vue-router'
import App from '@/App'
import App2 from '@/App2'
import App3 from '@/App3'
import App4 from '@/App4'
import App5 from '@/App5'
import App6 from '@/App6'
import App7 from '@/App7'
import App8 from '@/App8'
import App9 from '@/App9'
import App10 from '@/App10'
import App11 from '@/App11'
import App12 from '@/App12'
import App13 from '@/App13'
import App15 from '@/App15'
import App14 from '@/App14'
import App16 from '@/App16'
import App17 from '@/App17'
import App18 from '@/App18'
import App19 from '@/App19'
import NotFound from '@/views/404'


const routes = [
  {
    path: '/',
    components:
        {
          default: App,
          r1: App2,
          r2: App3,
          r3: App4,
        },
    alias: ['/aaa', '/bbb', '/ccc']
  },
  {
    path: '/app5',
    components:
        {
          default: App5,
          r1: App6,
          r2: App7,
          r3: App8,
        }
  },
  {
    path: '/app9',
    components:
        {
          default: App9,
          r1: App10,
          r2: App11,
          r3: App12,
        }
  },
  {
    path: '/app13',
    component: App13,
    redirect: "/404"
  },
  {
    path: '/app14',
    component: App14
  },
  {
    path: '/app15',
    component: App15
  },
  {
    path: '/app16',
    component: App16
  },
  {
    path: '/app17',
    component: App17
  },
  {
    path: '/app18',
    component: App18
  },
  {
    path: '/app19',
    component: App19,
    alias: '/table'
  },
  {
    path: '/404',
    component: NotFound
  },
  {
    path: '/:pathMatch(.*)*',
    redirect: "/404"
  }
]

const router = createRouter({
  //å†…éƒ¨æä¾›äº† history æ¨¡å¼çš„å®ç°ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨ hash æ¨¡å¼ã€‚
  history: createWebHashHistory(),
  routes, // `routes: routes` çš„ç¼©å†™
})

router.beforeEach((to, from) =>
{
  console.log("ç¬¬ä¸€ä¸ªå…¨å±€å‰ç½®å®ˆå«")
  if (to.path === "/404")
  {
    return true;
  }
  //0.5çš„æ¦‚ç‡æ”¾è¡Œ
  if (Math.random() > 0.5)
  {
    console.log("æ”¾è¡Œ")
    return true
  }
  console.log("ä¸æ”¾è¡Œ")
  return false
})

router.beforeEach((to, from) =>
{
  console.log("ç¬¬äºŒä¸ªå…¨å±€å‰ç½®å®ˆå«")
  if (to.path === "/404")
  {
    return true;
  }
  if (Math.random() > 0.5)
  {
    console.log("æ”¾è¡Œ")
    return true
  }
  else
  {
    console.log("è½¬/app9")
    return {path: '/app9'}
  }
})

router.afterEach((to, from) =>
{
  console.log("å…¨å±€åç½®é’©å­")
  console.log("ä»" + from.path + "åˆ°" + to.path)
})

export default router

</script>
```





![image-20230622133458806](img/vueå­¦ä¹ ç¬”è®°/image-20230622133458806.png)



![image-20230622133518875](img/vueå­¦ä¹ ç¬”è®°/image-20230622133518875.png)









### è·¯ç”±ç‹¬äº«çš„å®ˆå«

å¯ä»¥ç›´æ¥åœ¨è·¯ç”±é…ç½®ä¸Šå®šä¹‰ `beforeEnter` å®ˆå«ï¼š

```js
const routes = [
  {
    path: '/users/:id',
    component: UserDetails,
    beforeEnter: (to, from) => {
      // reject the navigation
      return false
    },
  },
]
```



`beforeEnter` å®ˆå« **åªåœ¨è¿›å…¥è·¯ç”±æ—¶è§¦å‘**ï¼Œä¸ä¼šåœ¨ `params`ã€`query` æˆ– `hash` æ”¹å˜æ—¶è§¦å‘ã€‚ä¾‹å¦‚ï¼Œä» `/users/2` è¿›å…¥åˆ° `/users/3` æˆ–è€…ä» `/users/2#info` è¿›å…¥åˆ° `/users/2#projects`ã€‚å®ƒä»¬åªæœ‰åœ¨ **ä»ä¸€ä¸ªä¸åŒçš„** è·¯ç”±å¯¼èˆªæ—¶ï¼Œæ‰ä¼šè¢«è§¦å‘ã€‚



ä¹Ÿå¯ä»¥å°†ä¸€ä¸ªå‡½æ•°æ•°ç»„ä¼ é€’ç»™ `beforeEnter`

```js
function removeQueryParams(to) {
  if (Object.keys(to.query).length)
    return { path: to.path, query: {}, hash: to.hash }
}

function removeHash(to) {
  if (to.hash) return { path: to.path, query: to.query, hash: '' }
}

const routes = [
  {
    path: '/users/:id',
    component: UserDetails,
    beforeEnter: [removeQueryParams, removeHash],
  },
  {
    path: '/about',
    component: UserDetails,
    beforeEnter: [removeQueryParams],
  },
]
```





Router9.vue

```vue
<script>

import {createRouter, createWebHashHistory} from 'vue-router'
import App from '@/App'
import App2 from '@/App2'
import App3 from '@/App3'
import App4 from '@/App4'
import App5 from '@/App5'
import App6 from '@/App6'
import App7 from '@/App7'
import App8 from '@/App8'
import App9 from '@/App9'
import App10 from '@/App10'
import App11 from '@/App11'
import App12 from '@/App12'
import App13 from '@/App13'
import App15 from '@/App15'
import App14 from '@/App14'
import App16 from '@/App16'
import App17 from '@/App17'
import App18 from '@/App18'
import App19 from '@/App19'
import NotFound from '@/views/404'

function f1()
{
  console.log("ç¬¬ä¸€ä¸ªè·¯ç”±ç‹¬äº«çš„å®ˆå«")
  return true;
}

function f2()
{
  console.log("ç¬¬äºŒä¸ªè·¯ç”±ç‹¬äº«çš„å®ˆå«")
  return true;
}

const routes = [
  {
    path: '/',
    components:
        {
          default: App,
          r1: App2,
          r2: App3,
          r3: App4,
        },
    alias: ['/aaa', '/bbb', '/ccc']
  },
  {
    path: '/app5',
    components:
        {
          default: App5,
          r1: App6,
          r2: App7,
          r3: App8,
        },
    beforeEnter: [f1, f2]
  },
  {
    path: '/app9',
    components:
        {
          default: App9,
          r1: App10,
          r2: App11,
          r3: App12,
        },
    beforeEnter: (to, from) =>
    {
      console.log("ä»" + from.path + "åˆ°" + to.path)
      //0.5çš„æ¦‚ç‡æ”¾è¡Œ
      if (Math.random() > 0.5)
      {
        console.log("æ”¾è¡Œ")
        return true
      }
      console.log("ä¸æ”¾è¡Œ")
      return false
    }
  },
  {
    path: '/app13',
    component: App13,
    redirect: "/404"
  },
  {
    path: '/app14',
    component: App14,
    beforeEnter: [f1, f2]
  },
  {
    path: '/app15',
    component: App15
  },
  {
    path: '/app16',
    component: App16
  },
  {
    path: '/app17',
    component: App17
  },
  {
    path: '/app18',
    component: App18
  },
  {
    path: '/app19',
    component: App19,
    alias: '/table'
  },
  {
    path: '/404',
    component: NotFound
  },
  {
    path: '/:pathMatch(.*)*',
    redirect: "/404"
  }
]

const router = createRouter({
  //å†…éƒ¨æä¾›äº† history æ¨¡å¼çš„å®ç°ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨ hash æ¨¡å¼ã€‚
  history: createWebHashHistory(),
  routes, // `routes: routes` çš„ç¼©å†™
})


export default router

</script>
```





![image-20230622134933489](img/vueå­¦ä¹ ç¬”è®°/image-20230622134933489.png)





![image-20230622135151830](img/vueå­¦ä¹ ç¬”è®°/image-20230622135151830.png)





### ç»„ä»¶å†…çš„å®ˆå«

å¯ä»¥åœ¨è·¯ç”±ç»„ä»¶å†…ç›´æ¥å®šä¹‰è·¯ç”±å¯¼èˆªå®ˆå«(ä¼ é€’ç»™è·¯ç”±é…ç½®çš„)

ä½ å¯ä»¥ä¸ºè·¯ç”±ç»„ä»¶æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š

- `beforeRouteEnter`
- `beforeRouteUpdate`
- `beforeRouteLeave`



```js
const UserDetails = {
  template: `...`,
  beforeRouteEnter(to, from) {
    // åœ¨æ¸²æŸ“è¯¥ç»„ä»¶çš„å¯¹åº”è·¯ç”±è¢«éªŒè¯å‰è°ƒç”¨
    // ä¸èƒ½è·å–ç»„ä»¶å®ä¾‹ `this` ï¼
    // å› ä¸ºå½“å®ˆå«æ‰§è¡Œæ—¶ï¼Œç»„ä»¶å®ä¾‹è¿˜æ²¡è¢«åˆ›å»ºï¼
  },
  beforeRouteUpdate(to, from) {
    // åœ¨å½“å‰è·¯ç”±æ”¹å˜ï¼Œä½†æ˜¯è¯¥ç»„ä»¶è¢«å¤ç”¨æ—¶è°ƒç”¨
    // ä¸¾ä¾‹æ¥è¯´ï¼Œå¯¹äºä¸€ä¸ªå¸¦æœ‰åŠ¨æ€å‚æ•°çš„è·¯å¾„ `/users/:id`ï¼Œåœ¨ `/users/1` å’Œ `/users/2` ä¹‹é—´è·³è½¬çš„æ—¶å€™ï¼Œ
    // ç”±äºä¼šæ¸²æŸ“åŒæ ·çš„ `UserDetails` ç»„ä»¶ï¼Œå› æ­¤ç»„ä»¶å®ä¾‹ä¼šè¢«å¤ç”¨ã€‚è€Œè¿™ä¸ªé’©å­å°±ä¼šåœ¨è¿™ä¸ªæƒ…å†µä¸‹è¢«è°ƒç”¨ã€‚
    // å› ä¸ºåœ¨è¿™ç§æƒ…å†µå‘ç”Ÿçš„æ—¶å€™ï¼Œç»„ä»¶å·²ç»æŒ‚è½½å¥½äº†ï¼Œå¯¼èˆªå®ˆå«å¯ä»¥è®¿é—®ç»„ä»¶å®ä¾‹ `this`
  },
  beforeRouteLeave(to, from) {
    // åœ¨å¯¼èˆªç¦»å¼€æ¸²æŸ“è¯¥ç»„ä»¶çš„å¯¹åº”è·¯ç”±æ—¶è°ƒç”¨
    // ä¸ `beforeRouteUpdate` ä¸€æ ·ï¼Œå®ƒå¯ä»¥è®¿é—®ç»„ä»¶å®ä¾‹ `this`
  },
}
```



`beforeRouteEnter` å®ˆå« **ä¸èƒ½** è®¿é—® `this`ï¼Œå› ä¸ºå®ˆå«åœ¨å¯¼èˆªç¡®è®¤å‰è¢«è°ƒç”¨ï¼Œå› æ­¤å³å°†ç™»åœºçš„æ–°ç»„ä»¶è¿˜æ²¡è¢«åˆ›å»ºã€‚

ä¸è¿‡ï¼Œä½ å¯ä»¥é€šè¿‡ä¼ ä¸€ä¸ªå›è°ƒç»™ `next` æ¥è®¿é—®ç»„ä»¶å®ä¾‹ã€‚åœ¨å¯¼èˆªè¢«ç¡®è®¤çš„æ—¶å€™æ‰§è¡Œå›è°ƒï¼Œå¹¶ä¸”æŠŠç»„ä»¶å®ä¾‹ä½œä¸ºå›è°ƒæ–¹æ³•çš„å‚æ•°ï¼š



App27.vue

```vue
<template>
  <h1>ç»„ä»¶å†…çš„å®ˆå«</h1>
  <h2>{{$route.query.id}}</h2>
</template>

<script>
export default {
  name: "App27",
  data()
  {
    return {}
  },
  beforeRouteEnter: (to, from) =>
  {
    // åœ¨æ¸²æŸ“è¯¥ç»„ä»¶çš„å¯¹åº”è·¯ç”±è¢«éªŒè¯å‰è°ƒç”¨
    // ä¸èƒ½è·å–ç»„ä»¶å®ä¾‹ `this` ï¼
    // å› ä¸ºå½“å®ˆå«æ‰§è¡Œæ—¶ï¼Œç»„ä»¶å®ä¾‹è¿˜æ²¡è¢«åˆ›å»ºï¼
    console.log("æ‰§è¡Œ beforeRouteEnter æ–¹æ³•")
  },
  beforeRouteUpdate: (to, from) =>
  {
    // åœ¨å½“å‰è·¯ç”±æ”¹å˜ï¼Œä½†æ˜¯è¯¥ç»„ä»¶è¢«å¤ç”¨æ—¶è°ƒç”¨
    // ä¸¾ä¾‹æ¥è¯´ï¼Œå¯¹äºä¸€ä¸ªå¸¦æœ‰åŠ¨æ€å‚æ•°çš„è·¯å¾„ `/users/:id`ï¼Œåœ¨ `/users/1` å’Œ `/users/2` ä¹‹é—´è·³è½¬çš„æ—¶å€™ï¼Œ
    // ç”±äºä¼šæ¸²æŸ“åŒæ ·çš„ `UserDetails` ç»„ä»¶ï¼Œå› æ­¤ç»„ä»¶å®ä¾‹ä¼šè¢«å¤ç”¨ã€‚è€Œè¿™ä¸ªé’©å­å°±ä¼šåœ¨è¿™ä¸ªæƒ…å†µä¸‹è¢«è°ƒç”¨ã€‚
    // å› ä¸ºåœ¨è¿™ç§æƒ…å†µå‘ç”Ÿçš„æ—¶å€™ï¼Œç»„ä»¶å·²ç»æŒ‚è½½å¥½äº†ï¼Œå¯¼èˆªå®ˆå«å¯ä»¥è®¿é—®ç»„ä»¶å®ä¾‹ `this`
    console.log("æ‰§è¡Œ beforeRouteUpdate æ–¹æ³•")

  },
  beforeRouteLeave: (to, from) =>
  {
    // åœ¨å¯¼èˆªç¦»å¼€æ¸²æŸ“è¯¥ç»„ä»¶çš„å¯¹åº”è·¯ç”±æ—¶è°ƒç”¨
    // ä¸ `beforeRouteUpdate` ä¸€æ ·ï¼Œå®ƒå¯ä»¥è®¿é—®ç»„ä»¶å®ä¾‹ `this`
    console.log("æ‰§è¡Œ beforeRouteLeave æ–¹æ³•")
  },

}
</script>

<style scoped>

</style>
```



Router10.vue

```vue
<script>

import {createRouter, createWebHashHistory} from 'vue-router'
import App from '@/App'
import App2 from '@/App2'
import App3 from '@/App3'
import App4 from '@/App4'
import App5 from '@/App5'
import App6 from '@/App6'
import App7 from '@/App7'
import App8 from '@/App8'
import App9 from '@/App9'
import App10 from '@/App10'
import App11 from '@/App11'
import App12 from '@/App12'
import App13 from '@/App13'
import App15 from '@/App15'
import App14 from '@/App14'
import App16 from '@/App16'
import App17 from '@/App17'
import App18 from '@/App18'
import App19 from '@/App19'
import App_27 from '@/App27'
import NotFound from '@/views/404'

function f1()
{
  console.log("ç¬¬ä¸€ä¸ªè·¯ç”±ç‹¬äº«çš„å®ˆå«")
  return true;
}

function f2()
{
  console.log("ç¬¬äºŒä¸ªè·¯ç”±ç‹¬äº«çš„å®ˆå«")
  return true;
}

const routes = [
  {
    path: '/',
    components:
        {
          default: App,
          r1: App2,
          r2: App3,
          r3: App4,
        },
    alias: ['/aaa', '/bbb', '/ccc']
  },
  {
    path: '/app5',
    components:
        {
          default: App5,
          r1: App6,
          r2: App7,
          r3: App8,
        },
    beforeEnter: [f1, f2]
  },
  {
    path: '/app9',
    components:
        {
          default: App9,
          r1: App10,
          r2: App11,
          r3: App12,
        },
    beforeEnter: (to, from) =>
    {
      console.log("ä»" + from.path + "åˆ°" + to.path)
      //0.5çš„æ¦‚ç‡æ”¾è¡Œ
      if (Math.random() > 0.5)
      {
        console.log("æ”¾è¡Œ")
        return true
      }
      console.log("ä¸æ”¾è¡Œ")
      return false
    }
  },
  {
    path: '/app13',
    component: App13,
    redirect: "/404"
  },
  {
    path: '/app14',
    component: App14,
    beforeEnter: [f1, f2]
  },
  {
    path: '/app15',
    component: App15
  },
  {
    path: '/app16',
    component: App16
  },
  {
    path: '/app17',
    component: App17
  },
  {
    path: '/app18',
    component: App18,
  },
  {
    path: '/app19',
    component: App19,
    alias: '/table'
  },
  {
    path: '/app27',
    component: App_27,
  },
  {
    path: '/404',
    component: NotFound
  },
  {
    path: '/:pathMatch(.*)*',
    redirect: "/404"
  }
]

const router = createRouter({
  //å†…éƒ¨æä¾›äº† history æ¨¡å¼çš„å®ç°ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨ hash æ¨¡å¼ã€‚
  history: createWebHashHistory(),
  routes, // `routes: routes` çš„ç¼©å†™
})


export default router

</script>
```





![image-20230622141030619](img/vueå­¦ä¹ ç¬”è®°/image-20230622141030619.png)



![image-20230622141045312](img/vueå­¦ä¹ ç¬”è®°/image-20230622141045312.png)



![image-20230622141104109](img/vueå­¦ä¹ ç¬”è®°/image-20230622141104109.png)

![image-20230622141112737](img/vueå­¦ä¹ ç¬”è®°/image-20230622141112737.png)



![image-20230622141134323](img/vueå­¦ä¹ ç¬”è®°/image-20230622141134323.png)



![image-20230622141141718](img/vueå­¦ä¹ ç¬”è®°/image-20230622141141718.png)





æ³¨æ„ `beforeRouteEnter` æ˜¯æ”¯æŒç»™ `next` ä¼ é€’å›è°ƒçš„å”¯ä¸€å®ˆå«ã€‚å¯¹äº `beforeRouteUpdate` å’Œ `beforeRouteLeave` æ¥è¯´ï¼Œ`this` å·²ç»å¯ç”¨äº†ï¼Œæ‰€ä»¥*ä¸æ”¯æŒ* ä¼ é€’å›è°ƒï¼Œå› ä¸ºæ²¡æœ‰å¿…è¦äº†ï¼š

```js
beforeRouteUpdate (to, from) {
  // just use `this`
  this.name = to.params.name
}
```





è¿™ä¸ª **ç¦»å¼€å®ˆå«** é€šå¸¸ç”¨æ¥é¢„é˜²ç”¨æˆ·åœ¨è¿˜æœªä¿å­˜ä¿®æ”¹å‰çªç„¶ç¦»å¼€ã€‚è¯¥å¯¼èˆªå¯ä»¥é€šè¿‡è¿”å› `false` æ¥å–æ¶ˆã€‚

```js
beforeRouteLeave (to, from) {
  const answer = window.confirm('Do you really want to leave? you have unsaved changes!')
  if (!answer) 
      return false
}
```



```vue
<template>
  <h1>ç»„ä»¶å†…çš„å®ˆå«</h1>
  <h2>{{ $route.query.id }}</h2>
</template>

<script>
import {ElMessage} from 'element-plus'


export default {
  name: "App27",
  data()
  {
    return {
      id: this.$route.query.id
    }
  },
  beforeRouteEnter: (to, from) =>
  {
    // åœ¨æ¸²æŸ“è¯¥ç»„ä»¶çš„å¯¹åº”è·¯ç”±è¢«éªŒè¯å‰è°ƒç”¨
    // ä¸èƒ½è·å–ç»„ä»¶å®ä¾‹ `this` ï¼
    // å› ä¸ºå½“å®ˆå«æ‰§è¡Œæ—¶ï¼Œç»„ä»¶å®ä¾‹è¿˜æ²¡è¢«åˆ›å»ºï¼
    console.log("æ‰§è¡Œ beforeRouteEnter æ–¹æ³•")
  },
  beforeRouteUpdate: (to, from) =>
  {
    // åœ¨å½“å‰è·¯ç”±æ”¹å˜ï¼Œä½†æ˜¯è¯¥ç»„ä»¶è¢«å¤ç”¨æ—¶è°ƒç”¨
    // ä¸¾ä¾‹æ¥è¯´ï¼Œå¯¹äºä¸€ä¸ªå¸¦æœ‰åŠ¨æ€å‚æ•°çš„è·¯å¾„ `/users/:id`ï¼Œåœ¨ `/users/1` å’Œ `/users/2` ä¹‹é—´è·³è½¬çš„æ—¶å€™ï¼Œ
    // ç”±äºä¼šæ¸²æŸ“åŒæ ·çš„ `UserDetails` ç»„ä»¶ï¼Œå› æ­¤ç»„ä»¶å®ä¾‹ä¼šè¢«å¤ç”¨ã€‚è€Œè¿™ä¸ªé’©å­å°±ä¼šåœ¨è¿™ä¸ªæƒ…å†µä¸‹è¢«è°ƒç”¨ã€‚
    // å› ä¸ºåœ¨è¿™ç§æƒ…å†µå‘ç”Ÿçš„æ—¶å€™ï¼Œç»„ä»¶å·²ç»æŒ‚è½½å¥½äº†ï¼Œå¯¼èˆªå®ˆå«å¯ä»¥è®¿é—®ç»„ä»¶å®ä¾‹ `this`
    console.log("æ‰§è¡Œ beforeRouteUpdate æ–¹æ³•")

  },
  beforeRouteLeave(to, from)
  {
    // åœ¨å¯¼èˆªç¦»å¼€æ¸²æŸ“è¯¥ç»„ä»¶çš„å¯¹åº”è·¯ç”±æ—¶è°ƒç”¨
    // ä¸ `beforeRouteUpdate` ä¸€æ ·ï¼Œå®ƒå¯ä»¥è®¿é—®ç»„ä»¶å®ä¾‹ `this`
    console.log("æ‰§è¡Œ beforeRouteLeave æ–¹æ³•")
    ElMessage.info({
      message: "å³å°†ç¦»å¼€/app27",
      center: true,
    })
    if (this.id === undefined || this.id !== '123')
    {
      ElMessage.error({
        message: "id å‚æ•°ä¸ä¸º123ï¼Œæ— æ³•ç¦»å¼€",
        center: true,
      })
      return false
    }
    else
    {
      ElMessage.success({
        message: "æˆåŠŸç¦»å¼€/app27",
        center: true,
      })
      return true
    }
  },

}
</script>

<style scoped>

</style>
```



![image-20230622143452425](img/vueå­¦ä¹ ç¬”è®°/image-20230622143452425.png)



![image-20230622143522119](img/vueå­¦ä¹ ç¬”è®°/image-20230622143522119.png)



![image-20230622143630584](img/vueå­¦ä¹ ç¬”è®°/image-20230622143630584.png)







### å¯¼èˆªè§£ææµç¨‹

1. å¯¼èˆªè¢«è§¦å‘ã€‚
2. åœ¨å¤±æ´»çš„ç»„ä»¶é‡Œè°ƒç”¨ `beforeRouteLeave` å®ˆå«ã€‚
3. è°ƒç”¨å…¨å±€çš„ `beforeEach` å®ˆå«ã€‚
4. åœ¨é‡ç”¨çš„ç»„ä»¶é‡Œè°ƒç”¨ `beforeRouteUpdate` å®ˆå«(2.2+)ã€‚
5. åœ¨è·¯ç”±é…ç½®é‡Œè°ƒç”¨ `beforeEnter`ã€‚
6. è§£æå¼‚æ­¥è·¯ç”±ç»„ä»¶ã€‚
7. åœ¨è¢«æ¿€æ´»çš„ç»„ä»¶é‡Œè°ƒç”¨ `beforeRouteEnter`ã€‚
8. è°ƒç”¨å…¨å±€çš„ `beforeResolve` å®ˆå«(2.5+)ã€‚
9. å¯¼èˆªè¢«ç¡®è®¤ã€‚
10. è°ƒç”¨å…¨å±€çš„ `afterEach` é’©å­ã€‚
11. è§¦å‘ DOM æ›´æ–°ã€‚
12. è°ƒç”¨ `beforeRouteEnter` å®ˆå«ä¸­ä¼ ç»™ `next` çš„å›è°ƒå‡½æ•°ï¼Œåˆ›å»ºå¥½çš„ç»„ä»¶å®ä¾‹ä¼šä½œä¸ºå›è°ƒå‡½æ•°çš„å‚æ•°ä¼ å…¥ã€‚









## è·¯ç”±å…ƒä¿¡æ¯

æœ‰æ—¶ï¼Œä½ å¯èƒ½å¸Œæœ›å°†ä»»æ„ä¿¡æ¯é™„åŠ åˆ°è·¯ç”±ä¸Šï¼Œå¦‚è¿‡æ¸¡åç§°ã€è°å¯ä»¥è®¿é—®è·¯ç”±ç­‰ã€‚è¿™äº›äº‹æƒ…å¯ä»¥é€šè¿‡æ¥æ”¶å±æ€§å¯¹è±¡çš„`meta`å±æ€§æ¥å®ç°ï¼Œå¹¶ä¸”å®ƒå¯ä»¥åœ¨è·¯ç”±åœ°å€å’Œå¯¼èˆªå®ˆå«ä¸Šéƒ½è¢«è®¿é—®åˆ°ã€‚å®šä¹‰è·¯ç”±çš„æ—¶å€™ä½ å¯ä»¥è¿™æ ·é…ç½® `meta` å­—æ®µï¼š

```js
const routes = [
  {
    path: '/posts',
    component: PostsLayout,
    children: [
      {
        path: 'new',
        component: PostsNew,
        // åªæœ‰ç»è¿‡èº«ä»½éªŒè¯çš„ç”¨æˆ·æ‰èƒ½åˆ›å»ºå¸–å­
        meta: { requiresAuth: true }
      },
      {
        path: ':id',
        component: PostsDetail
        // ä»»ä½•äººéƒ½å¯ä»¥é˜…è¯»æ–‡ç« 
        meta: { requiresAuth: false }
      }
    ]
  }
]
```



`routes` é…ç½®ä¸­çš„æ¯ä¸ªè·¯ç”±å¯¹è±¡ä¸º **è·¯ç”±è®°å½•**ã€‚è·¯ç”±è®°å½•å¯ä»¥æ˜¯åµŒå¥—çš„ï¼Œå› æ­¤ï¼Œå½“ä¸€ä¸ªè·¯ç”±åŒ¹é…æˆåŠŸåï¼Œå®ƒå¯èƒ½åŒ¹é…å¤šä¸ªè·¯ç”±è®°å½•ã€‚

ä¾‹å¦‚ï¼Œæ ¹æ®ä¸Šé¢çš„è·¯ç”±é…ç½®ï¼Œ`/posts/new` è¿™ä¸ª URL å°†ä¼šåŒ¹é…çˆ¶è·¯ç”±è®°å½• (`path: '/posts'`) ä»¥åŠå­è·¯ç”±è®°å½• (`path: 'new'`)ã€‚



ä¸€ä¸ªè·¯ç”±åŒ¹é…åˆ°çš„æ‰€æœ‰è·¯ç”±è®°å½•ä¼šæš´éœ²ä¸º `$route` å¯¹è±¡(è¿˜æœ‰åœ¨å¯¼èˆªå®ˆå«ä¸­çš„è·¯ç”±å¯¹è±¡)çš„`$route.matched` æ•°ç»„ã€‚æˆ‘ä»¬éœ€è¦éå†è¿™ä¸ªæ•°ç»„æ¥æ£€æŸ¥è·¯ç”±è®°å½•ä¸­çš„ `meta` å­—æ®µï¼Œä½†æ˜¯ Vue Router è¿˜ä¸ºä½ æä¾›äº†ä¸€ä¸ª `$route.meta` æ–¹æ³•ï¼Œå®ƒæ˜¯ä¸€ä¸ªéé€’å½’åˆå¹¶**æ‰€æœ‰ `meta`** å­—æ®µçš„ï¼ˆä»çˆ¶å­—æ®µåˆ°å­å­—æ®µï¼‰çš„æ–¹æ³•



```js
router.beforeEach((to, from) => {
  // è€Œä¸æ˜¯å»æ£€æŸ¥æ¯æ¡è·¯ç”±è®°å½•
  // to.matched.some(record => record.meta.requiresAuth)
  if (to.meta.requiresAuth && !auth.isLoggedIn()) {
    // æ­¤è·¯ç”±éœ€è¦æˆæƒï¼Œè¯·æ£€æŸ¥æ˜¯å¦å·²ç™»å½•
    // å¦‚æœæ²¡æœ‰ï¼Œåˆ™é‡å®šå‘åˆ°ç™»å½•é¡µé¢
    return {
      path: '/login',
      // ä¿å­˜æˆ‘ä»¬æ‰€åœ¨çš„ä½ç½®ï¼Œä»¥ä¾¿ä»¥åå†æ¥
      query: { redirect: to.fullPath },
    }
  }
})
```





```vue
<template>
  <h1>ç»„ä»¶å†…çš„å®ˆå«</h1>
  <h2>id={{ $route.query.id }}</h2>
  <h2>a={{ $route.meta.a }}</h2>
  <h2>b={{ $route.meta.b }}</h2>
</template>

<script>
import {ElMessage} from 'element-plus'


export default {
  name: "App27",
  data()
  {
    return {
      id: this.$route.query.id
    }
  },
  beforeRouteEnter(to, from)
  {
    // åœ¨æ¸²æŸ“è¯¥ç»„ä»¶çš„å¯¹åº”è·¯ç”±è¢«éªŒè¯å‰è°ƒç”¨
    // ä¸èƒ½è·å–ç»„ä»¶å®ä¾‹ `this` ï¼
    // å› ä¸ºå½“å®ˆå«æ‰§è¡Œæ—¶ï¼Œç»„ä»¶å®ä¾‹è¿˜æ²¡è¢«åˆ›å»ºï¼
    console.log("æ‰§è¡Œ beforeRouteEnter æ–¹æ³•")
    console.log(to.meta.a)
    console.log(to.meta.b)
  },
  beforeRouteUpdate: (to, from) =>
  {
    // åœ¨å½“å‰è·¯ç”±æ”¹å˜ï¼Œä½†æ˜¯è¯¥ç»„ä»¶è¢«å¤ç”¨æ—¶è°ƒç”¨
    // ä¸¾ä¾‹æ¥è¯´ï¼Œå¯¹äºä¸€ä¸ªå¸¦æœ‰åŠ¨æ€å‚æ•°çš„è·¯å¾„ `/users/:id`ï¼Œåœ¨ `/users/1` å’Œ `/users/2` ä¹‹é—´è·³è½¬çš„æ—¶å€™ï¼Œ
    // ç”±äºä¼šæ¸²æŸ“åŒæ ·çš„ `UserDetails` ç»„ä»¶ï¼Œå› æ­¤ç»„ä»¶å®ä¾‹ä¼šè¢«å¤ç”¨ã€‚è€Œè¿™ä¸ªé’©å­å°±ä¼šåœ¨è¿™ä¸ªæƒ…å†µä¸‹è¢«è°ƒç”¨ã€‚
    // å› ä¸ºåœ¨è¿™ç§æƒ…å†µå‘ç”Ÿçš„æ—¶å€™ï¼Œç»„ä»¶å·²ç»æŒ‚è½½å¥½äº†ï¼Œå¯¼èˆªå®ˆå«å¯ä»¥è®¿é—®ç»„ä»¶å®ä¾‹ `this`
    console.log("æ‰§è¡Œ beforeRouteUpdate æ–¹æ³•")

  },
  beforeRouteLeave(to, from)
  {
    // åœ¨å¯¼èˆªç¦»å¼€æ¸²æŸ“è¯¥ç»„ä»¶çš„å¯¹åº”è·¯ç”±æ—¶è°ƒç”¨
    // ä¸ `beforeRouteUpdate` ä¸€æ ·ï¼Œå®ƒå¯ä»¥è®¿é—®ç»„ä»¶å®ä¾‹ `this`
    console.log("æ‰§è¡Œ beforeRouteLeave æ–¹æ³•")
    ElMessage.info({
      message: "å³å°†ç¦»å¼€/app27",
      center: true,
    })
    console.log(typeof this.id)
    if (this.id === undefined || this.id !== '123')
    {
      ElMessage.error({
        message: "id å‚æ•°ä¸ä¸º123ï¼Œæ— æ³•ç¦»å¼€",
        center: true,
      })
      return false
    }
    else
    {
      ElMessage.success({
        message: "æˆåŠŸç¦»å¼€/app27",
        center: true,
      })
      return true
    }
  },

}
</script>

<style scoped>

</style>
```





```vue
<script>

import {createRouter, createWebHashHistory} from 'vue-router'
import App from '@/App'
import App2 from '@/App2'
import App3 from '@/App3'
import App4 from '@/App4'
import App5 from '@/App5'
import App6 from '@/App6'
import App7 from '@/App7'
import App8 from '@/App8'
import App9 from '@/App9'
import App10 from '@/App10'
import App11 from '@/App11'
import App12 from '@/App12'
import App13 from '@/App13'
import App15 from '@/App15'
import App14 from '@/App14'
import App16 from '@/App16'
import App17 from '@/App17'
import App18 from '@/App18'
import App19 from '@/App19'
import App_27 from '@/App27'
import NotFound from '@/views/404'

function f1()
{
  console.log("ç¬¬ä¸€ä¸ªè·¯ç”±ç‹¬äº«çš„å®ˆå«")
  return true;
}

function f2()
{
  console.log("ç¬¬äºŒä¸ªè·¯ç”±ç‹¬äº«çš„å®ˆå«")
  return true;
}

const routes = [
  {
    path: '/',
    components:
        {
          default: App,
          r1: App2,
          r2: App3,
          r3: App4,
        },
    alias: ['/aaa', '/bbb', '/ccc']
  },
  {
    path: '/app5',
    components:
        {
          default: App5,
          r1: App6,
          r2: App7,
          r3: App8,
        },
    beforeEnter: [f1, f2]
  },
  {
    path: '/app9',
    components:
        {
          default: App9,
          r1: App10,
          r2: App11,
          r3: App12,
        },
    beforeEnter: (to, from) =>
    {
      console.log("ä»" + from.path + "åˆ°" + to.path)
      //0.5çš„æ¦‚ç‡æ”¾è¡Œ
      if (Math.random() > 0.5)
      {
        console.log("æ”¾è¡Œ")
        return true
      }
      console.log("ä¸æ”¾è¡Œ")
      return false
    }
  },
  {
    path: '/app13',
    component: App13,
    redirect: "/404"
  },
  {
    path: '/app14',
    component: App14,
    beforeEnter: [f1, f2]
  },
  {
    path: '/app15',
    component: App15
  },
  {
    path: '/app16',
    component: App16
  },
  {
    path: '/app17',
    component: App17
  },
  {
    path: '/app18',
    component: App18,
  },
  {
    path: '/app19',
    component: App19,
    alias: '/table'
  },
  {
    path: '/app27',
    component: App_27,
    meta: {a: 131234, b: 666666}
  },
  {
    path: '/404',
    component: NotFound
  },
  {
    path: '/:pathMatch(.*)*',
    redirect: "/404"
  }
]

const router = createRouter({
  //å†…éƒ¨æä¾›äº† history æ¨¡å¼çš„å®ç°ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨ hash æ¨¡å¼ã€‚
  history: createWebHashHistory(),
  routes, // `routes: routes` çš„ç¼©å†™
})


export default router

</script>
```





![image-20230622144912208](img/vueå­¦ä¹ ç¬”è®°/image-20230622144912208.png)

![image-20230622144921496](img/vueå­¦ä¹ ç¬”è®°/image-20230622144921496.png)







## æ•°æ®è·å–

### æ¦‚è¿°

æœ‰æ—¶å€™ï¼Œè¿›å…¥æŸä¸ªè·¯ç”±åï¼Œéœ€è¦ä»æœåŠ¡å™¨è·å–æ•°æ®ã€‚ä¾‹å¦‚ï¼Œåœ¨æ¸²æŸ“ç”¨æˆ·ä¿¡æ¯æ—¶ï¼Œä½ éœ€è¦ä»æœåŠ¡å™¨è·å–ç”¨æˆ·çš„æ•°æ®ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼æ¥å®ç°ï¼š

- **å¯¼èˆªå®Œæˆä¹‹åè·å–**ï¼šå…ˆå®Œæˆå¯¼èˆªï¼Œç„¶ååœ¨æ¥ä¸‹æ¥çš„ç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­ä¸­è·å–æ•°æ®ã€‚åœ¨æ•°æ®è·å–æœŸé—´æ˜¾ç¤ºâ€œåŠ è½½ä¸­â€ä¹‹ç±»çš„æŒ‡ç¤ºã€‚
- **å¯¼èˆªå®Œæˆä¹‹å‰è·å–**ï¼šå¯¼èˆªå®Œæˆå‰ï¼Œåœ¨è·¯ç”±è¿›å…¥çš„å®ˆå«ä¸­è·å–æ•°æ®ï¼Œåœ¨æ•°æ®è·å–æˆåŠŸåæ‰§è¡Œå¯¼èˆªã€‚

ä»æŠ€æœ¯è§’åº¦è®²ï¼Œä¸¤ç§æ–¹å¼éƒ½ä¸é”™ ï¼Œå°±çœ‹ä½ æƒ³è¦çš„ç”¨æˆ·ä½“éªŒæ˜¯å“ªç§ã€‚





### å¯¼èˆªå®Œæˆåè·å–æ•°æ®

å½“ä½ ä½¿ç”¨è¿™ç§æ–¹å¼æ—¶ï¼Œæˆ‘ä»¬ä¼šé©¬ä¸Šå¯¼èˆªå’Œæ¸²æŸ“ç»„ä»¶ï¼Œç„¶ååœ¨ç»„ä»¶çš„ created é’©å­ä¸­è·å–æ•°æ®ã€‚è¿™è®©æˆ‘ä»¬æœ‰æœºä¼šåœ¨æ•°æ®è·å–æœŸé—´å±•ç¤ºä¸€ä¸ª loading çŠ¶æ€ï¼Œè¿˜å¯ä»¥åœ¨ä¸åŒè§†å›¾é—´å±•ç¤ºä¸åŒçš„ loading çŠ¶æ€ã€‚



å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª `Post` ç»„ä»¶ï¼Œéœ€è¦åŸºäº `$route.params.id` è·å–æ–‡ç« æ•°æ®ï¼š

```vue
<template>
  <div class="post">
    <div v-if="loading" class="loading">Loading...</div>

    <div v-if="error" class="error">{{ error }}</div>

    <div v-if="post" class="content">
      <h2>{{ post.title }}</h2>
      <p>{{ post.body }}</p>
    </div>
  </div>
</template>
```



```js
export default {
  data() {
    return {
      loading: false,
      post: null,
      error: null,
    }
  },
  created() {
    // watch è·¯ç”±çš„å‚æ•°ï¼Œä»¥ä¾¿å†æ¬¡è·å–æ•°æ®
    this.$watch(
      () => this.$route.params,
      () => {
        this.fetchData()
      },
      // ç»„ä»¶åˆ›å»ºå®Œåè·å–æ•°æ®ï¼Œ
      // æ­¤æ—¶ data å·²ç»è¢« observed äº†
      { immediate: true }
    )
  },
  methods: {
    fetchData() {
      this.error = this.post = null
      this.loading = true
      // replace `getPost` with your data fetching util / API wrapper
      getPost(this.$route.params.id, (err, post) => {
        this.loading = false
        if (err) {
          this.error = err.toString()
        } else {
          this.post = post
        }
      })
    },
  },
}
```





### åœ¨å¯¼èˆªå®Œæˆå‰è·å–æ•°æ®

é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬åœ¨å¯¼èˆªè½¬å…¥æ–°çš„è·¯ç”±å‰è·å–æ•°æ®ã€‚æˆ‘ä»¬å¯ä»¥åœ¨æ¥ä¸‹æ¥çš„ç»„ä»¶çš„ `beforeRouteEnter` å®ˆå«ä¸­è·å–æ•°æ®ï¼Œå½“æ•°æ®è·å–æˆåŠŸååªè°ƒç”¨ `next` æ–¹æ³•

åœ¨ä¸ºåé¢çš„è§†å›¾è·å–æ•°æ®æ—¶ï¼Œç”¨æˆ·ä¼šåœç•™åœ¨å½“å‰çš„ç•Œé¢ï¼Œå› æ­¤å»ºè®®åœ¨æ•°æ®è·å–æœŸé—´ï¼Œæ˜¾ç¤ºä¸€äº›è¿›åº¦æ¡æˆ–è€…åˆ«çš„æŒ‡ç¤ºã€‚å¦‚æœæ•°æ®è·å–å¤±è´¥ï¼ŒåŒæ ·æœ‰å¿…è¦å±•ç¤ºä¸€äº›å…¨å±€çš„é”™è¯¯æé†’ã€‚



```js
export default {
  data() {
    return {
      post: null,
      error: null,
    }
  },
  beforeRouteEnter(to, from, next) {
    getPost(to.params.id, (err, post) => {
      next(vm => vm.setData(err, post))
    })
  },
  // è·¯ç”±æ”¹å˜å‰ï¼Œç»„ä»¶å°±å·²ç»æ¸²æŸ“å®Œäº†
  // é€»è¾‘ç¨ç¨ä¸åŒ
  async beforeRouteUpdate(to, from) {
    this.post = null
    try {
      this.post = await getPost(to.params.id)
    } catch (error) {
      this.error = error.toString()
    }
  },
}
```









## è¿‡æ¸¡åŠ¨æ•ˆ

æƒ³è¦åœ¨ä½ çš„è·¯å¾„ç»„ä»¶ä¸Šä½¿ç”¨è½¬åœºï¼Œå¹¶å¯¹å¯¼èˆªè¿›è¡ŒåŠ¨ç”»å¤„ç†ï¼Œéœ€è¦ä½¿ç”¨ v-slot APIï¼š

```vue
<router-view v-slot="{ Component }">
  <transition name="fade">
    <component :is="Component" />
  </transition>
</router-view>
```



Vue å¯èƒ½ä¼šè‡ªåŠ¨å¤ç”¨çœ‹èµ·æ¥ç›¸ä¼¼çš„ç»„ä»¶ï¼Œä»è€Œå¿½ç•¥äº†ä»»ä½•è¿‡æ¸¡ã€‚å¹¸è¿çš„æ˜¯ï¼Œå¯ä»¥æ·»åŠ ä¸€ä¸ª key å±æ€§æ¥å¼ºåˆ¶è¿‡æ¸¡ã€‚è¿™ä¹Ÿå…è®¸ä½ åœ¨ç›¸åŒè·¯ç”±ä¸Šä½¿ç”¨ä¸åŒçš„å‚æ•°è§¦å‘è¿‡æ¸¡ï¼š

```vue
<router-view v-slot="{ Component, route }">
  <transition name="fade">
    <component :is="Component" :key="route.path" />
  </transition>
</router-view>
```







## æ»šåŠ¨è¡Œä¸º

ä½¿ç”¨å‰ç«¯è·¯ç”±ï¼Œå½“åˆ‡æ¢åˆ°æ–°è·¯ç”±æ—¶ï¼Œæƒ³è¦é¡µé¢æ»šåˆ°é¡¶éƒ¨ï¼Œæˆ–è€…æ˜¯ä¿æŒåŸå…ˆçš„æ»šåŠ¨ä½ç½®ï¼Œå°±åƒé‡æ–°åŠ è½½é¡µé¢é‚£æ ·ã€‚ vue-router èƒ½åšåˆ°ï¼Œè€Œä¸”æ›´å¥½ï¼Œå®ƒè®©ä½ å¯ä»¥è‡ªå®šä¹‰è·¯ç”±åˆ‡æ¢æ—¶é¡µé¢å¦‚ä½•æ»šåŠ¨ã€‚



**æ³¨æ„: è¿™ä¸ªåŠŸèƒ½åªåœ¨æ”¯æŒ history.pushState çš„æµè§ˆå™¨ä¸­å¯ç”¨ã€‚**



å½“åˆ›å»ºä¸€ä¸ª Router å®ä¾‹ï¼Œä½ å¯ä»¥æä¾›ä¸€ä¸ª `scrollBehavior` æ–¹æ³•ï¼š

```js
const router = createRouter({
  history: createWebHashHistory(),
  routes: [...],
  scrollBehavior (to, from, savedPosition) {
    // return æœŸæœ›æ»šåŠ¨åˆ°å“ªä¸ªçš„ä½ç½®
  }
})
```



`scrollBehavior` å‡½æ•°æ¥æ”¶ `to`å’Œ` from` è·¯ç”±å¯¹è±¡

`savedPosition`ï¼Œåªæœ‰å½“è¿™æ˜¯ä¸€ä¸ª `popstate` å¯¼èˆªæ—¶æ‰å¯ç”¨ï¼ˆç”±æµè§ˆå™¨çš„åé€€/å‰è¿›æŒ‰é’®è§¦å‘ï¼‰



è¯¥å‡½æ•°å¯ä»¥è¿”å›ä¸€ä¸ª `ScrollToOptions` ä½ç½®å¯¹è±¡:

```js
const router = createRouter({
  scrollBehavior(to, from, savedPosition) {
    // å§‹ç»ˆæ»šåŠ¨åˆ°é¡¶éƒ¨
    return { top: 0 }
  },
})
```



å¯ä»¥é€šè¿‡ `el` ä¼ é€’ä¸€ä¸ª CSS é€‰æ‹©å™¨æˆ–ä¸€ä¸ª DOM å…ƒç´ ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ`top` å’Œ `left` å°†è¢«è§†ä¸ºè¯¥å…ƒç´ çš„ç›¸å¯¹åç§»é‡ï¼š

```js
const router = createRouter({
  scrollBehavior(to, from, savedPosition) {
    // å§‹ç»ˆåœ¨å…ƒç´  #main ä¸Šæ–¹æ»šåŠ¨ 10px
    return {
      // ä¹Ÿå¯ä»¥è¿™ä¹ˆå†™
      // el: document.getElementById('main'),
      el: '#main',
      top: -10,
    }
  },
})
```



å¦‚æœè¿”å›ä¸€ä¸ª falsy çš„å€¼ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œé‚£ä¹ˆä¸ä¼šå‘ç”Ÿæ»šåŠ¨ã€‚



æŒ‰ä¸‹ åé€€/å‰è¿› æŒ‰é’®æ—¶ï¼Œå°±ä¼šåƒæµè§ˆå™¨çš„åŸç”Ÿè¡¨ç°é‚£æ ·ï¼š

```js
const router = createRouter({
  scrollBehavior(to, from, savedPosition) {
    if (savedPosition) {
      return savedPosition
    } else {
      return { top: 0 }
    }
  },
})
```



æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åœ¨é¡µé¢ä¸­æ»šåŠ¨ä¹‹å‰ç¨ä½œç­‰å¾…ã€‚ä¾‹å¦‚ï¼Œå½“å¤„ç†è¿‡æ¸¡æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›ç­‰å¾…è¿‡æ¸¡ç»“æŸåå†æ»šåŠ¨ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½ å¯ä»¥è¿”å›ä¸€ä¸ª Promiseï¼Œå®ƒå¯ä»¥è¿”å›æ‰€éœ€çš„ä½ç½®æè¿°ç¬¦ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬åœ¨æ»šåŠ¨å‰ç­‰å¾… 500msï¼š

```js
const router = createRouter({
  scrollBehavior(to, from, savedPosition) {
    return new Promise((resolve, reject) => {
      setTimeout(() => {
        resolve({ left: 0, top: 0 })
      }, 500)
    })
  },
})
```







```vue
<script>

import {createRouter, createWebHashHistory} from 'vue-router'
import App from '@/App'
import App2 from '@/App2'
import App3 from '@/App3'
import App4 from '@/App4'
import App5 from '@/App5'
import App6 from '@/App6'
import App7 from '@/App7'
import App8 from '@/App8'
import App9 from '@/App9'
import App10 from '@/App10'
import App11 from '@/App11'
import App12 from '@/App12'
import App13 from '@/App13'
import App15 from '@/App15'
import App14 from '@/App14'
import App16 from '@/App16'
import App17 from '@/App17'
import App18 from '@/App18'
import App19 from '@/App19'
import App_27 from '@/App27'
import App28 from '@/App28'
import NotFound from '@/views/404'

function f1()
{
  console.log("ç¬¬ä¸€ä¸ªè·¯ç”±ç‹¬äº«çš„å®ˆå«")
  return true;
}

function f2()
{
  console.log("ç¬¬äºŒä¸ªè·¯ç”±ç‹¬äº«çš„å®ˆå«")
  return true;
}

const routes = [
  {
    path: '/',
    components:
        {
          default: App,
          r1: App2,
          r2: App3,
          r3: App4,
        },
    alias: ['/aaa', '/bbb', '/ccc']
  },
  {
    path: '/app5',
    components:
        {
          default: App5,
          r1: App6,
          r2: App7,
          r3: App8,
        },
    beforeEnter: [f1, f2]
  },
  {
    path: '/app9',
    components:
        {
          default: App9,
          r1: App10,
          r2: App11,
          r3: App12,
        },
    beforeEnter: (to, from) =>
    {
      console.log("ä»" + from.path + "åˆ°" + to.path)
      //0.5çš„æ¦‚ç‡æ”¾è¡Œ
      if (Math.random() > 0.5)
      {
        console.log("æ”¾è¡Œ")
        return true
      }
      console.log("ä¸æ”¾è¡Œ")
      return false
    }
  },
  {
    path: '/app13',
    component: App13,
    redirect: "/404"
  },
  {
    path: '/app14',
    component: App14,
    beforeEnter: [f1, f2]
  },
  {
    path: '/app15',
    component: App15
  },
  {
    path: '/app16',
    component: App16
  },
  {
    path: '/app17',
    component: App17
  },
  {
    path: '/app18',
    component: App18,
  },
  {
    path: '/app19',
    component: App19,
    alias: '/table'
  },
  {
    path: '/app27',
    component: App_27,
    meta: {a: 131234, b: 666666}
  },
  {
    path: '/app28',
    component: App28,
  },
  {
    path: '/404',
    component: NotFound
  },
  {
    path: '/:pathMatch(.*)*',
    redirect: "/404"
  }
]

const router = createRouter({
  //å†…éƒ¨æä¾›äº† history æ¨¡å¼çš„å®ç°ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨ hash æ¨¡å¼ã€‚
  history: createWebHashHistory(),
  routes, // `routes: routes` çš„ç¼©å†™
  scrollBehavior(to, from, savedPosition)
  {
    console.log(savedPosition)
    //return {top: 2000, left: 0}

    // æ»šåŠ¨åˆ°é”šç‚¹
    if (to.hash)
    {
      return {
        selector: to.hash,
        // å¹³æ»‘æ»šåŠ¨
        behavior: 'smooth',
      }
    }

    return new Promise((resolve, reject) =>
    {
      setTimeout(() =>
      {
        resolve({left: 0, top: 2000})
      }, 1000)
    })
  }
})


export default router

</script>
```



```vue
<template>
  <div>

    <el-table
        :data="tableData"
        style="width: 100%">
      <el-table-column
          prop="id"
          label="å­¦å·"
          width="180">
      </el-table-column>
      <el-table-column
          prop="name"
          label="å§“å"
          width="180">
      </el-table-column>
      <el-table-column
          prop="sex"
          label="æ€§åˆ«"
          width="180">
      </el-table-column>
      <el-table-column
          prop="age"
          label="å¹´é¾„"
          width="180">
      </el-table-column>
    </el-table>

  </div>
</template>

<script>
import {ElMessage} from 'element-plus'

export default {
  name: "App19",
  data()
  {
    return {
      tableData: (function ()
      {
        const data = [];
        for (let i = 0; i < 500; i++)
        {
          data.push({
            id: 100001 + i,
            name: "å§“å" + (i + 1),
            sex: Math.random() > 0.5 ? "ç”·" : "å¥³",
            age: Math.round(Math.random() * 10 + 10)
          })
        }
        ElMessage({
          type: 'success',
          message: "åŠ è½½å®Œæˆ"
        })
        return data;
      }())
    }
  }
}
</script>

<style scoped>

</style>
```









## åŠ¨æ€èœå•

```html
<script>
const options = {
    mounted() {
        const serverRoutes = sessionStorage.getItem('serverRoutes');
        const array = JSON.parse(serverRoutes);
        const map = new Map();
        for(const obj of array) {
            map.set(obj.id, obj);
        }
        const top = [];
        for(const obj of array) {
            const parent = map.get(obj.pid);
            if(parent) {
                parent.children ??= [];
                parent.children.push(obj);
            } else {
                top.push(obj);
            }
        }
        this.top = top;
    },
    data() {
        return {
            top: []
        }
    }
}
export default options;
</script>
```





```html
<el-menu router background-color="#545c64" text-color="#fff" active-text-color="#ffd04b" :unique-opened="true">
    <template v-for="m1 of top">
<el-submenu v-if="m1.children" :key="m1.id" :index="m1.path">
    <span slot="title">
        <i :class="m1.icon"></i> {{m1.name}}
        </span>
    <el-menu-item v-for="m2 of m1.children" :key="m2.id" :index="m2.path">
        <span slot="title">
            <i :class="m2.icon"></i> {{m2.name}}
        </span>
        </el-menu-item>
        </el-submenu>
<el-menu-item v-else :key="m1.id" :index="m1.path">
    <span slot="title">
        <i :class="m1.icon"></i> {{m1.name}}
        </span>
        </el-menu-item>
    </template>
</el-menu>
```















# Vuex

## æ¦‚è¿°

uex æ˜¯ä¸€ä¸ªä¸“é—¨ä¸º Vue.js åº”ç”¨ç¨‹åºå¼€å‘çš„**çŠ¶æ€ç®¡ç†æ¨¡å¼**ï¼Œå®ƒé‡‡ç”¨é›†ä¸­å¼å­˜å‚¨ç®¡ç†åº”ç”¨çš„æ‰€æœ‰ç»„ä»¶çŠ¶æ€ï¼Œå¹¶ä»¥ç›¸åº”çš„è§„åˆ™ä¿è¯çŠ¶æ€ä»¥ä¸€ç§å¯é¢„æµ‹çš„æ–¹å¼å‘ç”Ÿå˜åŒ–ã€‚å¯ä»¥ç†è§£ä¸ºï¼šå°†å¤šä¸ªç»„ä»¶å…±äº«çš„å˜é‡å…¨éƒ¨å­˜å‚¨åœ¨ä¸€ä¸ªå¯¹è±¡é‡Œé¢ï¼Œç„¶åå°†è¿™ä¸ªå¯¹è±¡æ”¾åœ¨é¡¶å±‚çš„ Vue å®ä¾‹ä¸­ï¼Œè®©å…¶ä»–ç»„ä»¶å¯ä»¥ä½¿ç”¨ï¼Œå®ƒæœ€å¤§çš„ç‰¹ç‚¹æ˜¯å“åº”å¼ã€‚

ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šåœ¨ Vuex ä¸­å­˜æ”¾ä¸€äº›éœ€è¦åœ¨å¤šä¸ªç•Œé¢ä¸­è¿›è¡Œå…±äº«çš„ä¿¡æ¯ã€‚æ¯”å¦‚ç”¨æˆ·çš„ç™»å½•çŠ¶æ€ã€ç”¨æˆ·åç§°ã€å¤´åƒã€åœ°ç†ä½ç½®ä¿¡æ¯ã€å•†å“çš„æ”¶è—ã€è´­ç‰©è½¦ä¸­çš„ç‰©å“ç­‰ï¼Œè¿™äº›çŠ¶æ€ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥æ”¾åœ¨ç»Ÿä¸€çš„åœ°æ–¹ï¼Œå¯¹å®ƒè¿›è¡Œä¿å­˜å’Œç®¡ç†ã€‚

ä¸ä¹‹å¯¹æ¯” localStorage ä¸ sessionStorage ä¹Ÿèƒ½å…±äº«æ•°æ®ï¼Œä½†ç¼ºç‚¹æ˜¯æ•°æ®å¹¶éå“åº”å¼



è®©æˆ‘ä»¬ä»ä¸€ä¸ªç®€å•çš„ Vue è®¡æ•°åº”ç”¨å¼€å§‹ï¼š

```js
const Counter = {
  // çŠ¶æ€
  data () {
    return {
      count: 0
    }
  },
  // è§†å›¾
  template: `
    <div>{{ count }}</div>
  `,
  // æ“ä½œ
  methods: {
    increment () {
      this.count++
    }
  }
}

createApp(Counter).mount('#app')
```



è¿™ä¸ªçŠ¶æ€è‡ªç®¡ç†åº”ç”¨åŒ…å«ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š

- **çŠ¶æ€**ï¼Œé©±åŠ¨åº”ç”¨çš„æ•°æ®æºï¼›
- **è§†å›¾**ï¼Œä»¥å£°æ˜æ–¹å¼å°†**çŠ¶æ€**æ˜ å°„åˆ°è§†å›¾ï¼›
- **æ“ä½œ**ï¼Œå“åº”åœ¨**è§†å›¾**ä¸Šçš„ç”¨æˆ·è¾“å…¥å¯¼è‡´çš„çŠ¶æ€å˜åŒ–ã€‚



ä½†æ˜¯ï¼Œå½“æˆ‘ä»¬çš„åº”ç”¨é‡åˆ°**å¤šä¸ªç»„ä»¶å…±äº«çŠ¶æ€**æ—¶ï¼Œå•å‘æ•°æ®æµçš„ç®€æ´æ€§å¾ˆå®¹æ˜“è¢«ç ´åï¼š

- å¤šä¸ªè§†å›¾ä¾èµ–äºåŒä¸€çŠ¶æ€ã€‚
- æ¥è‡ªä¸åŒè§†å›¾çš„è¡Œä¸ºéœ€è¦å˜æ›´åŒä¸€çŠ¶æ€ã€‚



å¯¹äºé—®é¢˜ä¸€ï¼Œä¼ å‚çš„æ–¹æ³•å¯¹äºå¤šå±‚åµŒå¥—çš„ç»„ä»¶å°†ä¼šéå¸¸ç¹çï¼Œå¹¶ä¸”å¯¹äºå…„å¼Ÿç»„ä»¶é—´çš„çŠ¶æ€ä¼ é€’æ— èƒ½ä¸ºåŠ›ã€‚å¯¹äºé—®é¢˜äºŒï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡‡ç”¨çˆ¶å­ç»„ä»¶ç›´æ¥å¼•ç”¨æˆ–è€…é€šè¿‡äº‹ä»¶æ¥å˜æ›´å’ŒåŒæ­¥çŠ¶æ€çš„å¤šä»½æ‹·è´ã€‚ä»¥ä¸Šçš„è¿™äº›æ¨¡å¼éå¸¸è„†å¼±ï¼Œé€šå¸¸ä¼šå¯¼è‡´æ— æ³•ç»´æŠ¤çš„ä»£ç ã€‚

å› æ­¤ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆä¸æŠŠç»„ä»¶çš„å…±äº«çŠ¶æ€æŠ½å–å‡ºæ¥ï¼Œä»¥ä¸€ä¸ªå…¨å±€å•ä¾‹æ¨¡å¼ç®¡ç†å‘¢ï¼Ÿåœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬çš„ç»„ä»¶æ ‘æ„æˆäº†ä¸€ä¸ªå·¨å¤§çš„â€œè§†å›¾â€ï¼Œä¸ç®¡åœ¨æ ‘çš„å“ªä¸ªä½ç½®ï¼Œä»»ä½•ç»„ä»¶éƒ½èƒ½è·å–çŠ¶æ€æˆ–è€…è§¦å‘è¡Œä¸ºï¼

é€šè¿‡å®šä¹‰å’Œéš”ç¦»çŠ¶æ€ç®¡ç†ä¸­çš„å„ç§æ¦‚å¿µå¹¶é€šè¿‡å¼ºåˆ¶è§„åˆ™ç»´æŒè§†å›¾å’ŒçŠ¶æ€é—´çš„ç‹¬ç«‹æ€§ï¼Œæˆ‘ä»¬çš„ä»£ç å°†ä¼šå˜å¾—æ›´ç»“æ„åŒ–ä¸”æ˜“ç»´æŠ¤ã€‚

è¿™å°±æ˜¯ Vuex èƒŒåçš„åŸºæœ¬æ€æƒ³







## æ•™ç¨‹

https://vuex.vuejs.org/zh/installation.html



**vue2å’Œvue3ä¼šæœ‰æ‰€ä¸åŒ**



## å®‰è£…

å‘½ä»¤ï¼š

```sh
npm install vuex@next --save
```



```sh
PS D:\ç¨‹åº\2023Q3\vue-test> npm install vuex@next --save
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.3.2 (node_modules\fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"win32","arch":"x64"})

+ vuex@4.0.2
added 1 package from 1 contributor and audited 1003 packages in 8.203s

96 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities

PS D:\ç¨‹åº\2023Q3\vue-test>
```



å¦‚æœåœ¨package.jsonä¸­çœ‹åˆ°äº†`"vuex": "^xxx"`ï¼Œåˆ™å®‰è£…æˆåŠŸ

![image-20230622210344492](img/vueå­¦ä¹ ç¬”è®°/image-20230622210344492.png)











## å…¥é—¨

åˆ›å»ºsrc/store/index.jsï¼Œå†…å®¹å¦‚ä¸‹ï¼š

```js
import {createStore} from 'vuex'

// åˆ›å»ºä¸€ä¸ªæ–°çš„ store å®ä¾‹
const store = createStore({
    state()
    {
        return {
            count: 0,
            name: '',
            age: 18
        }
    },
    mutations: {
        increment(state)
        {
            state.count++
        },
        updateName(state, name)
        {
            state.name = name;
        },
        updateAge(state, age)
        {
            state.age = age;
        }
    }
})

export default store;
```



åœ¨ Vue ç»„ä»¶ä¸­ï¼Œ å¯ä»¥é€šè¿‡ `this.$store` è®¿é—®storeå®ä¾‹

mutations æ–¹æ³•ä¸èƒ½ç›´æ¥è°ƒç”¨ï¼Œåªèƒ½é€šè¿‡ `store.commit(mutationæ–¹æ³•å, å‚æ•°)` æ¥é—´æ¥è°ƒç”¨



App29.vue

```vue
<template>
  <div>

    <h1>countæ•°é‡ï¼š{{ $store.state.count }}</h1>
    <br>

    <h1>åå­—ï¼š{{ $store.state.name }}</h1>
    <br>

    <h1>å¹´é¾„ï¼š{{ $store.state.age }}</h1>
    <br>

    <el-button type="success" size="large" @click="f1">countè‡ªå¢</el-button>
    <br>
    <el-input type="text" size="large" v-model="name" @change="f2"></el-input>

    <br>
    <el-input type="number" size="large" autocomplete="å¹´é¾„" v-model="age" @change="f3"></el-input>

  </div>
</template>

<script>
export default {
  name: "App29",
  data()
  {
    return {
      name: "",
      age: 0,
    }
  },
  methods:
      {
        f1()
        {
          this.$store.commit("increment")
        },
        f2()
        {
          console.log(this.name)
          this.$store.commit("updateName", this.name)
        },
        f3()
        {
          console.log(this.age)
          this.$store.commit("updateAge", this.age)
        }
      }
}
</script>

<style scoped>

</style>
```



main.js

![image-20230622223400030](img/vueå­¦ä¹ ç¬”è®°/image-20230622223400030.png)



```js
import {createApp} from 'vue'

import ElementPlus from 'element-plus'
import 'element-plus/dist/index.css'

import App from './App29.vue'
import Router2 from '@/router/Router11'
import Store from '@/store/index'

const app = createApp(App)

app.use(ElementPlus)
app.use(Router2)
app.use(Store)
app.mount('#app')
```







![image-20230622223436252](img/vueå­¦ä¹ ç¬”è®°/image-20230622223436252.png)



![image-20230622223508894](img/vueå­¦ä¹ ç¬”è®°/image-20230622223508894.png)



ç”±äº store ä¸­çš„çŠ¶æ€æ˜¯å“åº”å¼çš„ï¼Œåœ¨ç»„ä»¶ä¸­è°ƒç”¨ store ä¸­çš„çŠ¶æ€ç®€å•åˆ°ä»…éœ€è¦åœ¨è®¡ç®—å±æ€§ä¸­è¿”å›å³å¯ã€‚è§¦å‘å˜åŒ–ä¹Ÿä»…ä»…æ˜¯åœ¨ç»„ä»¶çš„ methods ä¸­æäº¤ mutationã€‚







## State

